{"ast":null,"code":"import React__default, { createContext, Fragment, useState, useRef, useEffect, useContext, lazy, Suspense } from 'react';\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction Frame(index) {\n  return [];\n}\nconst c$1 = {\n  configureFrame: _ => ({}),\n  addRecord: async _ => ({}),\n  deleteRecord: async _ => ({}),\n  sync: async () => ({}),\n  updateRecordImage: async _ => ({}),\n  updateRecordVideo: async _ => ({}),\n  updateRecordFile: async _ => ({}),\n  Frame,\n  useFrameEffect: _ => {},\n  fullTableSize: async () => 0,\n  tableTypes: async () => ({}),\n  currentConfiguration: () => ({}),\n  Query: async _ => [],\n  getUserAttributes: async () => ({}),\n  isUserSignedIn: () => false,\n  setUserAttribute: async (_, _2) => ({}),\n  resetUserPassword: async (_, _2) => ({}),\n  signIn: async (_, _2) => ({}),\n  signOut: () => {},\n  signUp: async (_, _2, _3) => ({}),\n  onSignIn: _ => {},\n  db: _ => ({}),\n  dbEventListener: _ => () => {},\n  useReturn: _ => ({}),\n  e: {},\n  setFile: async (_, _2, _3, _4) => ({}),\n  setImage: async (_, _2, _3, _4) => ({}),\n  setVideo: async (_, _2, _3, _4) => ({}),\n  forgotPassword: async (_, _2) => ({}),\n  forgotPasswordConfirm: async (_, _2, _3) => ({}),\n  userID: () => undefined\n};\nvar EasybaseContext = createContext(c$1);\n\n// do not edit .js files directly - edit src/index.jst\n\nvar fastDeepEqual = function equal(a, b) {\n  if (a === b) return true;\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;) if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n    for (i = length; i-- !== 0;) if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n      if (!equal(a[key], b[key])) return false;\n    }\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a !== a && b !== b;\n};\nvar POST_TYPES$1;\n(function (POST_TYPES) {\n  POST_TYPES[\"UPLOAD_ATTACHMENT\"] = \"upload_attachment\";\n  POST_TYPES[\"HANDSHAKE\"] = \"handshake\";\n  POST_TYPES[\"VALID_TOKEN\"] = \"valid_token\";\n  POST_TYPES[\"GET_FRAME\"] = \"get_frame\";\n  POST_TYPES[\"TABLE_SIZE\"] = \"table_size\";\n  POST_TYPES[\"COLUMN_TYPES\"] = \"column_types\";\n  POST_TYPES[\"SYNC_STACK\"] = \"sync_stack\";\n  POST_TYPES[\"SYNC_DELETE\"] = \"sync_delete\";\n  POST_TYPES[\"SYNC_INSERT\"] = \"sync_insert\";\n  POST_TYPES[\"GET_QUERY\"] = \"get_query\";\n  POST_TYPES[\"USER_ATTRIBUTES\"] = \"user_attributes\";\n  POST_TYPES[\"SET_ATTRIBUTE\"] = \"set_attribute\";\n  POST_TYPES[\"SIGN_UP\"] = \"sign_up\";\n  POST_TYPES[\"REQUEST_TOKEN\"] = \"request_token\";\n  POST_TYPES[\"EASY_QB\"] = \"easyqb\";\n  POST_TYPES[\"RESET_PASSWORD\"] = \"reset_password\";\n  POST_TYPES[\"FORGOT_PASSWORD_SEND\"] = \"forgot_password_send\";\n  POST_TYPES[\"FORGOT_PASSWORD_CONFIRM\"] = \"forgot_password_confirm\";\n})(POST_TYPES$1 || (POST_TYPES$1 = {}));\nvar DB_STATUS$1;\n(function (DB_STATUS) {\n  DB_STATUS[\"ERROR\"] = \"error\";\n  DB_STATUS[\"PENDING\"] = \"pending\";\n  DB_STATUS[\"SUCCESS\"] = \"success\";\n})(DB_STATUS$1 || (DB_STATUS$1 = {}));\nvar EXECUTE_COUNT$1;\n(function (EXECUTE_COUNT) {\n  EXECUTE_COUNT[\"ALL\"] = \"all\";\n  EXECUTE_COUNT[\"ONE\"] = \"one\";\n})(EXECUTE_COUNT$1 || (EXECUTE_COUNT$1 = {}));\nvar imageExtensions$1 = [\"ase\", \"art\", \"bmp\", \"blp\", \"cd5\", \"cit\", \"cpt\", \"cr2\", \"cut\", \"dds\", \"dib\", \"djvu\", \"egt\", \"exif\", \"gif\", \"gpl\", \"grf\", \"icns\", \"ico\", \"iff\", \"jng\", \"jpeg\", \"jpg\", \"jfif\", \"jp2\", \"jps\", \"lbm\", \"max\", \"miff\", \"mng\", \"msp\", \"nitf\", \"ota\", \"pbm\", \"pc1\", \"pc2\", \"pc3\", \"pcf\", \"pcx\", \"pdn\", \"pgm\", \"PI1\", \"PI2\", \"PI3\", \"pict\", \"pct\", \"pnm\", \"pns\", \"ppm\", \"psb\", \"psd\", \"pdd\", \"psp\", \"px\", \"pxm\", \"pxr\", \"qfx\", \"raw\", \"rle\", \"sct\", \"sgi\", \"rgb\", \"int\", \"bw\", \"tga\", \"tiff\", \"tif\", \"vtf\", \"xbm\", \"xcf\", \"xpm\", \"3dv\", \"amf\", \"ai\", \"awg\", \"cgm\", \"cdr\", \"cmx\", \"dxf\", \"e2d\", \"egt\", \"eps\", \"fs\", \"gbr\", \"odg\", \"svg\", \"stl\", \"vrml\", \"x3d\", \"sxd\", \"v2d\", \"vnd\", \"wmf\", \"emf\", \"art\", \"xar\", \"png\", \"webp\", \"jxr\", \"hdp\", \"wdp\", \"cur\", \"ecw\", \"iff\", \"lbm\", \"liff\", \"nrrd\", \"pam\", \"pcx\", \"pgf\", \"sgi\", \"rgb\", \"rgba\", \"bw\", \"int\", \"inta\", \"sid\", \"ras\", \"sun\", \"tga\"];\nvar videoExtensions$1 = [\"3g2\", \"3gp\", \"aaf\", \"asf\", \"avchd\", \"avi\", \"drc\", \"flv\", \"m2v\", \"m4p\", \"m4v\", \"mkv\", \"mng\", \"mov\", \"mp2\", \"mp4\", \"mpe\", \"mpeg\", \"mpg\", \"mpv\", \"mxf\", \"nsv\", \"ogg\", \"ogv\", \"qt\", \"rm\", \"rmvb\", \"roq\", \"svi\", \"vob\", \"webm\", \"wmv\", \"yuv\"];\nvar GlobalNamespace;\n(function (GlobalNamespace) {})(GlobalNamespace || (GlobalNamespace = {}));\nconst _g = {\n  ...GlobalNamespace\n};\nfunction gFactory(_ref) {\n  let {\n    ebconfig,\n    options\n  } = _ref;\n  const optionsObj = {\n    ...options\n  }; // Forces undefined to empty object\n  const gaTrackingObj = options ? options.googleAnalyticsEventTracking : {};\n  const defaultG = {\n    options: optionsObj,\n    ebconfig: ebconfig,\n    GA_USER_ID_SALT: \"m83WnAPrq\",\n    analyticsEventsToTrack: {\n      login: true,\n      sign_up: true,\n      forgot_password: true,\n      forgot_password_confirm: true,\n      reset_user_password: true,\n      ...gaTrackingObj\n    }\n  };\n  return {\n    ...GlobalNamespace,\n    ...defaultG\n  };\n}\nfunction utilsFactory(globals) {\n  const g = globals || _g;\n  const generateBareUrl = (type, integrationID) => `https://api.easybase.io/${type}/${integrationID}`;\n  const generateAuthBody = () => {\n    const stamp = Date.now();\n    return {\n      token: g.token,\n      token_time: ~~(g.session / (stamp % 64)),\n      now: stamp\n    };\n  };\n  function log() {\n    if (g.options.logging) {\n      for (var _len = arguments.length, params = new Array(_len), _key = 0; _key < _len; _key++) {\n        params[_key] = arguments[_key];\n      }\n      console.log(\"EASYBASE â€” \", ...params);\n    }\n  }\n  return {\n    generateAuthBody,\n    generateBareUrl,\n    log\n  };\n}\nvar POST_TYPES;\n(function (POST_TYPES) {\n  POST_TYPES[\"UPLOAD_ATTACHMENT\"] = \"upload_attachment\";\n  POST_TYPES[\"HANDSHAKE\"] = \"handshake\";\n  POST_TYPES[\"VALID_TOKEN\"] = \"valid_token\";\n  POST_TYPES[\"GET_FRAME\"] = \"get_frame\";\n  POST_TYPES[\"TABLE_SIZE\"] = \"table_size\";\n  POST_TYPES[\"COLUMN_TYPES\"] = \"column_types\";\n  POST_TYPES[\"SYNC_STACK\"] = \"sync_stack\";\n  POST_TYPES[\"SYNC_DELETE\"] = \"sync_delete\";\n  POST_TYPES[\"SYNC_INSERT\"] = \"sync_insert\";\n  POST_TYPES[\"GET_QUERY\"] = \"get_query\";\n  POST_TYPES[\"USER_ATTRIBUTES\"] = \"user_attributes\";\n  POST_TYPES[\"SET_ATTRIBUTE\"] = \"set_attribute\";\n  POST_TYPES[\"SIGN_UP\"] = \"sign_up\";\n  POST_TYPES[\"REQUEST_TOKEN\"] = \"request_token\";\n  POST_TYPES[\"EASY_QB\"] = \"easyqb\";\n  POST_TYPES[\"RESET_PASSWORD\"] = \"reset_password\";\n  POST_TYPES[\"FORGOT_PASSWORD_SEND\"] = \"forgot_password_send\";\n  POST_TYPES[\"FORGOT_PASSWORD_CONFIRM\"] = \"forgot_password_confirm\";\n})(POST_TYPES || (POST_TYPES = {}));\nvar DB_STATUS;\n(function (DB_STATUS) {\n  DB_STATUS[\"ERROR\"] = \"error\";\n  DB_STATUS[\"PENDING\"] = \"pending\";\n  DB_STATUS[\"SUCCESS\"] = \"success\";\n})(DB_STATUS || (DB_STATUS = {}));\nvar EXECUTE_COUNT;\n(function (EXECUTE_COUNT) {\n  EXECUTE_COUNT[\"ALL\"] = \"all\";\n  EXECUTE_COUNT[\"ONE\"] = \"one\";\n})(EXECUTE_COUNT || (EXECUTE_COUNT = {}));\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\nfunction getDefaultExportFromCjs(x) {\n  return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\nfunction createCommonjsModule(fn) {\n  var module = {\n    exports: {}\n  };\n  return fn(module, module.exports), module.exports;\n}\nvar browserPonyfill = createCommonjsModule(function (module, exports) {\n  var global = typeof self !== 'undefined' ? self : commonjsGlobal;\n  var __self__ = function () {\n    function F() {\n      this.fetch = false;\n      this.DOMException = global.DOMException;\n    }\n    F.prototype = global;\n    return new F();\n  }();\n  (function (self) {\n    (function (exports) {\n      var support = {\n        searchParams: 'URLSearchParams' in self,\n        iterable: 'Symbol' in self && 'iterator' in Symbol,\n        blob: 'FileReader' in self && 'Blob' in self && function () {\n          try {\n            new Blob();\n            return true;\n          } catch (e) {\n            return false;\n          }\n        }(),\n        formData: 'FormData' in self,\n        arrayBuffer: 'ArrayBuffer' in self\n      };\n      function isDataView(obj) {\n        return obj && DataView.prototype.isPrototypeOf(obj);\n      }\n      if (support.arrayBuffer) {\n        var viewClasses = ['[object Int8Array]', '[object Uint8Array]', '[object Uint8ClampedArray]', '[object Int16Array]', '[object Uint16Array]', '[object Int32Array]', '[object Uint32Array]', '[object Float32Array]', '[object Float64Array]'];\n        var isArrayBufferView = ArrayBuffer.isView || function (obj) {\n          return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1;\n        };\n      }\n      function normalizeName(name) {\n        if (typeof name !== 'string') {\n          name = String(name);\n        }\n        if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n          throw new TypeError('Invalid character in header field name');\n        }\n        return name.toLowerCase();\n      }\n      function normalizeValue(value) {\n        if (typeof value !== 'string') {\n          value = String(value);\n        }\n        return value;\n      }\n\n      // Build a destructive iterator for the value list\n      function iteratorFor(items) {\n        var iterator = {\n          next: function () {\n            var value = items.shift();\n            return {\n              done: value === undefined,\n              value: value\n            };\n          }\n        };\n        if (support.iterable) {\n          iterator[Symbol.iterator] = function () {\n            return iterator;\n          };\n        }\n        return iterator;\n      }\n      function Headers(headers) {\n        this.map = {};\n        if (headers instanceof Headers) {\n          headers.forEach(function (value, name) {\n            this.append(name, value);\n          }, this);\n        } else if (Array.isArray(headers)) {\n          headers.forEach(function (header) {\n            this.append(header[0], header[1]);\n          }, this);\n        } else if (headers) {\n          Object.getOwnPropertyNames(headers).forEach(function (name) {\n            this.append(name, headers[name]);\n          }, this);\n        }\n      }\n      Headers.prototype.append = function (name, value) {\n        name = normalizeName(name);\n        value = normalizeValue(value);\n        var oldValue = this.map[name];\n        this.map[name] = oldValue ? oldValue + ', ' + value : value;\n      };\n      Headers.prototype['delete'] = function (name) {\n        delete this.map[normalizeName(name)];\n      };\n      Headers.prototype.get = function (name) {\n        name = normalizeName(name);\n        return this.has(name) ? this.map[name] : null;\n      };\n      Headers.prototype.has = function (name) {\n        return this.map.hasOwnProperty(normalizeName(name));\n      };\n      Headers.prototype.set = function (name, value) {\n        this.map[normalizeName(name)] = normalizeValue(value);\n      };\n      Headers.prototype.forEach = function (callback, thisArg) {\n        for (var name in this.map) {\n          if (this.map.hasOwnProperty(name)) {\n            callback.call(thisArg, this.map[name], name, this);\n          }\n        }\n      };\n      Headers.prototype.keys = function () {\n        var items = [];\n        this.forEach(function (value, name) {\n          items.push(name);\n        });\n        return iteratorFor(items);\n      };\n      Headers.prototype.values = function () {\n        var items = [];\n        this.forEach(function (value) {\n          items.push(value);\n        });\n        return iteratorFor(items);\n      };\n      Headers.prototype.entries = function () {\n        var items = [];\n        this.forEach(function (value, name) {\n          items.push([name, value]);\n        });\n        return iteratorFor(items);\n      };\n      if (support.iterable) {\n        Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n      }\n      function consumed(body) {\n        if (body.bodyUsed) {\n          return Promise.reject(new TypeError('Already read'));\n        }\n        body.bodyUsed = true;\n      }\n      function fileReaderReady(reader) {\n        return new Promise(function (resolve, reject) {\n          reader.onload = function () {\n            resolve(reader.result);\n          };\n          reader.onerror = function () {\n            reject(reader.error);\n          };\n        });\n      }\n      function readBlobAsArrayBuffer(blob) {\n        var reader = new FileReader();\n        var promise = fileReaderReady(reader);\n        reader.readAsArrayBuffer(blob);\n        return promise;\n      }\n      function readBlobAsText(blob) {\n        var reader = new FileReader();\n        var promise = fileReaderReady(reader);\n        reader.readAsText(blob);\n        return promise;\n      }\n      function readArrayBufferAsText(buf) {\n        var view = new Uint8Array(buf);\n        var chars = new Array(view.length);\n        for (var i = 0; i < view.length; i++) {\n          chars[i] = String.fromCharCode(view[i]);\n        }\n        return chars.join('');\n      }\n      function bufferClone(buf) {\n        if (buf.slice) {\n          return buf.slice(0);\n        } else {\n          var view = new Uint8Array(buf.byteLength);\n          view.set(new Uint8Array(buf));\n          return view.buffer;\n        }\n      }\n      function Body() {\n        this.bodyUsed = false;\n        this._initBody = function (body) {\n          this._bodyInit = body;\n          if (!body) {\n            this._bodyText = '';\n          } else if (typeof body === 'string') {\n            this._bodyText = body;\n          } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n            this._bodyBlob = body;\n          } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n            this._bodyFormData = body;\n          } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n            this._bodyText = body.toString();\n          } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n            this._bodyArrayBuffer = bufferClone(body.buffer);\n            // IE 10-11 can't handle a DataView body.\n            this._bodyInit = new Blob([this._bodyArrayBuffer]);\n          } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n            this._bodyArrayBuffer = bufferClone(body);\n          } else {\n            this._bodyText = body = Object.prototype.toString.call(body);\n          }\n          if (!this.headers.get('content-type')) {\n            if (typeof body === 'string') {\n              this.headers.set('content-type', 'text/plain;charset=UTF-8');\n            } else if (this._bodyBlob && this._bodyBlob.type) {\n              this.headers.set('content-type', this._bodyBlob.type);\n            } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n              this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n            }\n          }\n        };\n        if (support.blob) {\n          this.blob = function () {\n            var rejected = consumed(this);\n            if (rejected) {\n              return rejected;\n            }\n            if (this._bodyBlob) {\n              return Promise.resolve(this._bodyBlob);\n            } else if (this._bodyArrayBuffer) {\n              return Promise.resolve(new Blob([this._bodyArrayBuffer]));\n            } else if (this._bodyFormData) {\n              throw new Error('could not read FormData body as blob');\n            } else {\n              return Promise.resolve(new Blob([this._bodyText]));\n            }\n          };\n          this.arrayBuffer = function () {\n            if (this._bodyArrayBuffer) {\n              return consumed(this) || Promise.resolve(this._bodyArrayBuffer);\n            } else {\n              return this.blob().then(readBlobAsArrayBuffer);\n            }\n          };\n        }\n        this.text = function () {\n          var rejected = consumed(this);\n          if (rejected) {\n            return rejected;\n          }\n          if (this._bodyBlob) {\n            return readBlobAsText(this._bodyBlob);\n          } else if (this._bodyArrayBuffer) {\n            return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer));\n          } else if (this._bodyFormData) {\n            throw new Error('could not read FormData body as text');\n          } else {\n            return Promise.resolve(this._bodyText);\n          }\n        };\n        if (support.formData) {\n          this.formData = function () {\n            return this.text().then(decode);\n          };\n        }\n        this.json = function () {\n          return this.text().then(JSON.parse);\n        };\n        return this;\n      }\n\n      // HTTP methods whose capitalization should be normalized\n      var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n      function normalizeMethod(method) {\n        var upcased = method.toUpperCase();\n        return methods.indexOf(upcased) > -1 ? upcased : method;\n      }\n      function Request(input, options) {\n        options = options || {};\n        var body = options.body;\n        if (input instanceof Request) {\n          if (input.bodyUsed) {\n            throw new TypeError('Already read');\n          }\n          this.url = input.url;\n          this.credentials = input.credentials;\n          if (!options.headers) {\n            this.headers = new Headers(input.headers);\n          }\n          this.method = input.method;\n          this.mode = input.mode;\n          this.signal = input.signal;\n          if (!body && input._bodyInit != null) {\n            body = input._bodyInit;\n            input.bodyUsed = true;\n          }\n        } else {\n          this.url = String(input);\n        }\n        this.credentials = options.credentials || this.credentials || 'same-origin';\n        if (options.headers || !this.headers) {\n          this.headers = new Headers(options.headers);\n        }\n        this.method = normalizeMethod(options.method || this.method || 'GET');\n        this.mode = options.mode || this.mode || null;\n        this.signal = options.signal || this.signal;\n        this.referrer = null;\n        if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n          throw new TypeError('Body not allowed for GET or HEAD requests');\n        }\n        this._initBody(body);\n      }\n      Request.prototype.clone = function () {\n        return new Request(this, {\n          body: this._bodyInit\n        });\n      };\n      function decode(body) {\n        var form = new FormData();\n        body.trim().split('&').forEach(function (bytes) {\n          if (bytes) {\n            var split = bytes.split('=');\n            var name = split.shift().replace(/\\+/g, ' ');\n            var value = split.join('=').replace(/\\+/g, ' ');\n            form.append(decodeURIComponent(name), decodeURIComponent(value));\n          }\n        });\n        return form;\n      }\n      function parseHeaders(rawHeaders) {\n        var headers = new Headers();\n        // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n        // https://tools.ietf.org/html/rfc7230#section-3.2\n        var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n        preProcessedHeaders.split(/\\r?\\n/).forEach(function (line) {\n          var parts = line.split(':');\n          var key = parts.shift().trim();\n          if (key) {\n            var value = parts.join(':').trim();\n            headers.append(key, value);\n          }\n        });\n        return headers;\n      }\n      Body.call(Request.prototype);\n      function Response(bodyInit, options) {\n        if (!options) {\n          options = {};\n        }\n        this.type = 'default';\n        this.status = options.status === undefined ? 200 : options.status;\n        this.ok = this.status >= 200 && this.status < 300;\n        this.statusText = 'statusText' in options ? options.statusText : 'OK';\n        this.headers = new Headers(options.headers);\n        this.url = options.url || '';\n        this._initBody(bodyInit);\n      }\n      Body.call(Response.prototype);\n      Response.prototype.clone = function () {\n        return new Response(this._bodyInit, {\n          status: this.status,\n          statusText: this.statusText,\n          headers: new Headers(this.headers),\n          url: this.url\n        });\n      };\n      Response.error = function () {\n        var response = new Response(null, {\n          status: 0,\n          statusText: ''\n        });\n        response.type = 'error';\n        return response;\n      };\n      var redirectStatuses = [301, 302, 303, 307, 308];\n      Response.redirect = function (url, status) {\n        if (redirectStatuses.indexOf(status) === -1) {\n          throw new RangeError('Invalid status code');\n        }\n        return new Response(null, {\n          status: status,\n          headers: {\n            location: url\n          }\n        });\n      };\n      exports.DOMException = self.DOMException;\n      try {\n        new exports.DOMException();\n      } catch (err) {\n        exports.DOMException = function (message, name) {\n          this.message = message;\n          this.name = name;\n          var error = Error(message);\n          this.stack = error.stack;\n        };\n        exports.DOMException.prototype = Object.create(Error.prototype);\n        exports.DOMException.prototype.constructor = exports.DOMException;\n      }\n      function fetch(input, init) {\n        return new Promise(function (resolve, reject) {\n          var request = new Request(input, init);\n          if (request.signal && request.signal.aborted) {\n            return reject(new exports.DOMException('Aborted', 'AbortError'));\n          }\n          var xhr = new XMLHttpRequest();\n          function abortXhr() {\n            xhr.abort();\n          }\n          xhr.onload = function () {\n            var options = {\n              status: xhr.status,\n              statusText: xhr.statusText,\n              headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n            };\n            options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n            var body = 'response' in xhr ? xhr.response : xhr.responseText;\n            resolve(new Response(body, options));\n          };\n          xhr.onerror = function () {\n            reject(new TypeError('Network request failed'));\n          };\n          xhr.ontimeout = function () {\n            reject(new TypeError('Network request failed'));\n          };\n          xhr.onabort = function () {\n            reject(new exports.DOMException('Aborted', 'AbortError'));\n          };\n          xhr.open(request.method, request.url, true);\n          if (request.credentials === 'include') {\n            xhr.withCredentials = true;\n          } else if (request.credentials === 'omit') {\n            xhr.withCredentials = false;\n          }\n          if ('responseType' in xhr && support.blob) {\n            xhr.responseType = 'blob';\n          }\n          request.headers.forEach(function (value, name) {\n            xhr.setRequestHeader(name, value);\n          });\n          if (request.signal) {\n            request.signal.addEventListener('abort', abortXhr);\n            xhr.onreadystatechange = function () {\n              // DONE (success or failure)\n              if (xhr.readyState === 4) {\n                request.signal.removeEventListener('abort', abortXhr);\n              }\n            };\n          }\n          xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n        });\n      }\n      fetch.polyfill = true;\n      if (!self.fetch) {\n        self.fetch = fetch;\n        self.Headers = Headers;\n        self.Request = Request;\n        self.Response = Response;\n      }\n      exports.Headers = Headers;\n      exports.Request = Request;\n      exports.Response = Response;\n      exports.fetch = fetch;\n      Object.defineProperty(exports, '__esModule', {\n        value: true\n      });\n      return exports;\n    })({});\n  })(__self__);\n  __self__.fetch.ponyfill = true;\n  // Remove \"polyfill\" property added by whatwg-fetch\n  delete __self__.fetch.polyfill;\n  // Choose between native implementation (global) or custom implementation (__self__)\n  // var ctx = global.fetch ? global : __self__;\n  var ctx = __self__; // this line disable service worker support temporarily\n  exports = ctx.fetch; // To enable: import fetch from 'cross-fetch'\n  exports.default = ctx.fetch; // For TypeScript consumers without esModuleInterop.\n  exports.fetch = ctx.fetch; // To enable: import {fetch} from 'cross-fetch'\n  exports.Headers = ctx.Headers;\n  exports.Request = ctx.Request;\n  exports.Response = ctx.Response;\n  module.exports = exports;\n});\nvar fetch = /*@__PURE__*/getDefaultExportFromCjs(browserPonyfill);\nfunction authFactory(globals) {\n  const g = globals || _g;\n  const {\n    generateBareUrl,\n    generateAuthBody,\n    log\n  } = utilsFactory(g);\n  function _clearTokens() {\n    g.token = \"\";\n    g.refreshToken = \"\";\n    g.newTokenCallback();\n    g.userID = undefined;\n  }\n  const getUserAttributes = async () => {\n    try {\n      const attrsRes = await tokenPost(POST_TYPES.USER_ATTRIBUTES);\n      g.analyticsEnabled && g.analyticsEventsToTrack.get_user_attributes && g.analyticsEvent('get_user_attributes');\n      return attrsRes.data;\n    } catch (error) {\n      log(error);\n      return error;\n    }\n  };\n  const setUserAttribute = async (key, value) => {\n    try {\n      const setAttrsRes = await tokenPost(POST_TYPES.SET_ATTRIBUTE, {\n        key,\n        value\n      });\n      g.analyticsEnabled && g.analyticsEventsToTrack.set_user_attribute && g.analyticsEvent('set_user_attribute', {\n        key\n      });\n      return {\n        success: setAttrsRes.success,\n        message: JSON.stringify(setAttrsRes.data)\n      };\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || \"Error\",\n        errorCode: error.errorCode || undefined\n      };\n    }\n  };\n  const forgotPassword = async (username, emailTemplate) => {\n    try {\n      const setAttrsRes = await tokenPost(POST_TYPES.FORGOT_PASSWORD_SEND, {\n        username,\n        emailTemplate\n      });\n      g.analyticsEnabled && g.analyticsEventsToTrack.forgot_password && g.analyticsEvent('forgot_password');\n      return {\n        success: setAttrsRes.success,\n        message: setAttrsRes.data\n      };\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || \"Error\",\n        errorCode: error.errorCode || undefined\n      };\n    }\n  };\n  const forgotPasswordConfirm = async (code, username, newPassword) => {\n    try {\n      const setAttrsRes = await tokenPost(POST_TYPES.FORGOT_PASSWORD_CONFIRM, {\n        username,\n        code,\n        newPassword\n      });\n      g.analyticsEnabled && g.analyticsEventsToTrack.forgot_password_confirm && g.analyticsEvent('forgot_password_confirm');\n      return {\n        success: setAttrsRes.success,\n        message: setAttrsRes.data\n      };\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || \"Error\",\n        errorCode: error.errorCode || undefined\n      };\n    }\n  };\n  const signUp = async (newUserID, password, userAttributes) => {\n    try {\n      const signUpRes = await tokenPost(POST_TYPES.SIGN_UP, {\n        newUserID,\n        password,\n        userAttributes\n      });\n      g.analyticsEnabled && g.analyticsEventsToTrack.sign_up && g.analyticsEvent('sign_up', {\n        method: \"Easybase\"\n      });\n      return {\n        success: signUpRes.success,\n        message: signUpRes.data\n      };\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || \"Error\",\n        errorCode: error.errorCode || undefined\n      };\n    }\n  };\n  const signIn = async (userID, password) => {\n    const t1 = Date.now();\n    g.session = Math.floor(100000000 + Math.random() * 900000000);\n    const integrationType = g.ebconfig.integration.split(\"-\")[0].toUpperCase() === \"PROJECT\" ? \"PROJECT\" : \"REACT\";\n    try {\n      const res = await fetch(generateBareUrl(integrationType, g.ebconfig.integration), {\n        method: \"POST\",\n        headers: {\n          'Eb-Post-Req': POST_TYPES.HANDSHAKE,\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          version: g.ebconfig.version,\n          session: g.session,\n          instance: g.instance,\n          userID,\n          password\n        })\n      });\n      const resData = await res.json();\n      if (resData.token) {\n        g.token = resData.token;\n        g.refreshToken = resData.refreshToken;\n        g.newTokenCallback();\n        g.userID = resData.userID;\n        g.mounted = true;\n        const [validTokenRes, {\n          hash\n        }, {\n          fromUtf8\n        }] = await Promise.all([tokenPost(POST_TYPES.VALID_TOKEN), import('./sha256-e0894fe4.js').then(function (n) {\n          return n.s;\n        }), import('./index-10b0f241.js')]);\n        const elapsed = Date.now() - t1;\n        if (validTokenRes.success) {\n          log(\"Valid auth initiation in \" + elapsed + \"ms\");\n          if (g.analyticsEnabled && g.analyticsEventsToTrack.login) {\n            const hashOut = hash(fromUtf8(g.GA_USER_ID_SALT + resData.userID));\n            const hexHash = Array.prototype.map.call(hashOut, x => ('00' + x.toString(16)).slice(-2)).join('');\n            g.analyticsIdentify(hexHash);\n            g.analyticsEvent('login', {\n              method: \"Easybase\"\n            });\n          }\n          return {\n            success: true,\n            message: \"Successfully signed in user\"\n          };\n        } else {\n          return {\n            success: false,\n            message: \"Could not sign in user\"\n          };\n        }\n      } else {\n        return {\n          success: false,\n          message: \"Could not sign in user\",\n          errorCode: resData.ErrorCode || undefined\n        };\n      }\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || \"Could not sign in user\",\n        errorCode: error.errorCode || undefined\n      };\n    }\n  };\n  const resetUserPassword = async (currentPassword, newPassword) => {\n    if (typeof newPassword !== \"string\" || newPassword.length > 100) {\n      return {\n        success: false,\n        message: \"newPassword must be of type string\"\n      };\n    }\n    if (typeof currentPassword !== \"string\" || currentPassword.length > 100) {\n      return {\n        success: false,\n        message: \"currentPassword must be of type string\"\n      };\n    }\n    try {\n      const setAttrsRes = await tokenPost(POST_TYPES.RESET_PASSWORD, {\n        currentPassword,\n        newPassword\n      });\n      g.analyticsEnabled && g.analyticsEventsToTrack.reset_user_password && g.analyticsEvent('reset_user_password');\n      return {\n        success: setAttrsRes.success,\n        message: JSON.stringify(setAttrsRes.data)\n      };\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || \"Error\",\n        errorCode: error.errorCode || undefined\n      };\n    }\n  };\n  const userID = () => g.userID || undefined;\n  const signOut = () => {\n    g.token = \"\";\n    g.newTokenCallback();\n    g.userID = undefined;\n  };\n  const initAuth = async () => {\n    const t1 = Date.now();\n    g.session = Math.floor(100000000 + Math.random() * 900000000);\n    log(`Handshaking on${g.instance} instance`);\n    const integrationType = g.ebconfig.integration.split(\"-\")[0].toUpperCase() === \"PROJECT\" ? \"PROJECT\" : \"REACT\";\n    try {\n      const res = await fetch(generateBareUrl(integrationType, g.ebconfig.integration), {\n        method: \"POST\",\n        headers: {\n          'Eb-Post-Req': POST_TYPES.HANDSHAKE,\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          version: g.ebconfig.version,\n          tt: g.ebconfig.tt,\n          session: g.session,\n          instance: g.instance\n        })\n      });\n      const resData = await res.json();\n      if (resData.token) {\n        g.token = resData.token;\n        g.mounted = true;\n        const validTokenRes = await tokenPost(POST_TYPES.VALID_TOKEN);\n        const elapsed = Date.now() - t1;\n        if (validTokenRes.success) {\n          log(\"Valid auth initiation in \" + elapsed + \"ms\");\n          return true;\n        } else {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    } catch (error) {\n      console.error(error);\n      return false;\n    }\n  };\n  const tokenPost = async (postType, body) => {\n    if (!g.mounted) {\n      await initAuth();\n    }\n    const integrationType = g.ebconfig.integration.split(\"-\")[0].toUpperCase() === \"PROJECT\" ? \"PROJECT\" : \"REACT\";\n    const res = await fetch(generateBareUrl(integrationType, g.ebconfig.integration), {\n      method: \"POST\",\n      headers: {\n        'Eb-Post-Req': postType,\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        _auth: generateAuthBody(),\n        ...body\n      })\n    });\n    const resData = await res.json();\n    if ({}.hasOwnProperty.call(resData, 'ErrorCode') || {}.hasOwnProperty.call(resData, 'code')) {\n      if (resData.ErrorCode === \"TokenExpired\") {\n        if (integrationType === \"PROJECT\") {\n          try {\n            const req_res = await tokenPost(POST_TYPES.REQUEST_TOKEN, {\n              refreshToken: g.refreshToken,\n              token: g.token\n            });\n            if (req_res.success) {\n              g.token = req_res.data.token;\n              g.newTokenCallback();\n              return tokenPost(postType, body);\n            } else {\n              throw new Error(req_res.data || \"Error\");\n            }\n          } catch (error) {\n            _clearTokens();\n            return {\n              success: false,\n              data: error.message || error\n            };\n          }\n        } else {\n          await initAuth();\n        }\n        return tokenPost(postType, body);\n      } else {\n        const err = new Error(resData.body || resData.ErrorCode || resData.code || \"Error\");\n        err.errorCode = resData.ErrorCode || resData.code;\n        throw err;\n      }\n    } else {\n      return {\n        success: resData.success,\n        data: resData.body\n      };\n    }\n  };\n  const tokenPostAttachment = async (formData, customHeaders) => {\n    if (!g.mounted) {\n      await initAuth();\n    }\n    const regularAuthbody = generateAuthBody();\n    const attachmentAuth = {\n      'Eb-token': regularAuthbody.token,\n      'Eb-token-time': regularAuthbody.token_time,\n      'Eb-now': regularAuthbody.now\n    };\n    const integrationType = g.ebconfig.integration.split(\"-\")[0].toUpperCase() === \"PROJECT\" ? \"PROJECT\" : \"REACT\";\n    const res = await fetch(generateBareUrl(integrationType, g.ebconfig.integration), {\n      method: \"POST\",\n      headers: {\n        'Eb-Post-Req': POST_TYPES.UPLOAD_ATTACHMENT,\n        ...customHeaders,\n        ...attachmentAuth\n      },\n      body: formData\n    });\n    const resData = await res.json();\n    if ({}.hasOwnProperty.call(resData, 'ErrorCode') || {}.hasOwnProperty.call(resData, 'code')) {\n      if (resData.ErrorCode === \"TokenExpired\") {\n        if (integrationType === \"PROJECT\") {\n          try {\n            const req_res = await tokenPost(POST_TYPES.REQUEST_TOKEN, {\n              refreshToken: g.refreshToken,\n              token: g.token\n            });\n            if (req_res.success) {\n              g.token = req_res.data.token;\n              g.newTokenCallback();\n              return tokenPostAttachment(formData, customHeaders);\n            } else {\n              throw new Error(req_res.data || \"Error\");\n            }\n          } catch (error) {\n            _clearTokens();\n            return {\n              success: false,\n              data: error.message || error\n            };\n          }\n        } else {\n          await initAuth();\n        }\n        return tokenPostAttachment(formData, customHeaders);\n      } else {\n        const err = new Error(resData.body || resData.ErrorCode || resData.code || \"Error\");\n        err.errorCode = resData.ErrorCode || resData.code;\n        throw err;\n      }\n    } else {\n      return {\n        success: resData.success,\n        data: resData.body\n      };\n    }\n  };\n  return {\n    initAuth,\n    tokenPost,\n    tokenPostAttachment,\n    signUp,\n    setUserAttribute,\n    getUserAttributes,\n    signIn,\n    signOut,\n    resetUserPassword,\n    forgotPassword,\n    forgotPasswordConfirm,\n    userID\n  };\n}\nfunction tableFactory(globals) {\n  const g = globals || _g;\n  const {\n    tokenPost\n  } = authFactory(g);\n  const Query = async options => {\n    const defaultOptions = {\n      queryName: \"\"\n    };\n    const fullOptions = {\n      ...defaultOptions,\n      ...options\n    };\n    const res = await tokenPost(POST_TYPES.GET_QUERY, fullOptions);\n    if (res.success) {\n      g.analyticsEnabled && g.analyticsEventsToTrack.query && g.analyticsEvent('query', {\n        queryName: fullOptions.queryName,\n        tableName: fullOptions.tableName || undefined\n      });\n      return res.data;\n    } else {\n      return [];\n    }\n  };\n  async function fullTableSize(tableName) {\n    const res = await tokenPost(POST_TYPES.TABLE_SIZE, tableName ? {\n      tableName\n    } : {});\n    if (res.success) {\n      g.analyticsEnabled && g.analyticsEventsToTrack.full_table_size && g.analyticsEvent('full_table_size', {\n        tableName: tableName || undefined\n      });\n      return res.data;\n    } else {\n      return 0;\n    }\n  }\n  async function tableTypes(tableName) {\n    const res = await tokenPost(POST_TYPES.COLUMN_TYPES, tableName ? {\n      tableName\n    } : {});\n    if (res.success) {\n      g.analyticsEnabled && g.analyticsEventsToTrack.table_types && g.analyticsEvent('table_types', {\n        tableName: tableName || undefined\n      });\n      return res.data;\n    } else {\n      return {};\n    }\n  }\n  return {\n    Query,\n    fullTableSize,\n    tableTypes\n  };\n}\n\n/** Returns a function the creates a new context */\nconst createNewContext$1 = defaultContext => {\n  const {\n    parameterize,\n    escape,\n    mapKey,\n    build\n  } = defaultContext;\n  return function () {\n    let inherit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      params = [],\n      unparameterized = false\n    } = inherit;\n    const whr = [];\n    return {\n      // properties set by the EasyQB instance\n      parameterize,\n      escape,\n      mapKey,\n      build,\n      // properties inherited from the parent query\n      params,\n      unparameterized,\n      // properties of the current query\n      type: 'select',\n      // | sql' | 'select' | 'delete' | 'insert' | 'update'\n      target: whr,\n      join: undefined,\n      separator: ' ',\n      sql: [],\n      ret: [],\n      frm: [],\n      whr,\n      grp: [],\n      hav: [],\n      setop: [],\n      ord: [],\n      with: [],\n      set: []\n\n      // properties that may be added dynamically:\n      // userType\n      // distinct\n    };\n  };\n};\n\nvar context = createNewContext$1;\nconst createQueryBuilder = _ref2 => {\n  let {\n    defaultContext,\n    query,\n    e,\n    config\n  } = _ref2;\n  const {\n    queries,\n    methods,\n    properties\n  } = query;\n  const newContext = context(defaultContext);\n  const reducers = createReducers(methods);\n  const updateContext = applyReducers(reducers);\n  reducers.extend = (ctx, args) => {\n    const arr = Array.isArray(args[0]) ? args[0] : args;\n    for (let i = 0; i < arr.length; ++i) {\n      updateContext(arr[i].method, ctx);\n    }\n  };\n  const builder = () => {}; // must not be object literal\n  const chain = createChain$1(builder);\n  const executeProperties = {\n    one: {\n      value: async function () {\n        const ret = await config.oneCallback(this.query, config.tableName, config.userAssociatedRecordsOnly);\n        return ret;\n      }\n    },\n    all: {\n      value: async function () {\n        const ret = await config.allCallback(this.query, config.tableName, config.userAssociatedRecordsOnly);\n        return ret;\n      }\n    },\n    _tableName: {\n      get: function () {\n        return config.tableName;\n      }\n    }\n  };\n\n  // EasyQB no access to from\n  const _methodProperties = methodProperties$1({\n    methods,\n    chain\n  });\n  delete _methodProperties.from;\n  Object.defineProperties(builder, {\n    ...builderProperties$1({\n      chain,\n      newContext,\n      updateContext,\n      queries\n    }),\n    ..._methodProperties,\n    ...executeProperties,\n    ...properties,\n    e: {\n      value: e\n    }\n  });\n  return chain();\n};\n\n/** Creates a new builder instance */\nconst createChain$1 = prototype => {\n  const chain = method => {\n    const fn = function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      return chain({\n        name: 'express',\n        args,\n        prev: method\n      });\n    };\n    fn.method = method;\n    Object.setPrototypeOf(fn, prototype);\n    return fn;\n  };\n  return chain;\n};\n\n/** Creates an object containing all method reducers */\nconst createReducers = methods => {\n  const reducers = {};\n  for (const name in methods) {\n    const {\n      updateContext,\n      properties = {}\n    } = methods[name];\n    reducers[name] = updateContext;\n    // some methods have subproperties, e.g. .unionAll\n    for (const key in properties) {\n      reducers[`${name}.${key}`] = properties[key];\n    }\n  }\n  return reducers;\n};\n\n/** Follows a method chain, applying each method's reducer, to ctx */\nconst applyReducers = reducers => (method, ctx) => {\n  // follow method links to construct methods array (in reverse)\n  const methods = [];\n  for (; method !== undefined; method = method.prev) {\n    methods.push(method);\n  }\n  // build methods object by processing methods in call order\n  const express = {\n    id: 0\n  };\n  for (let i = methods.length - 1; i >= 0; --i) {\n    const method = methods[i];\n    reducers[method.name](ctx, method.args, express);\n  }\n  return ctx;\n};\n\n/** Default properties of all SQL Query Builders */\nconst builderProperties$1 = _ref3 => {\n  let {\n    newContext,\n    updateContext,\n    queries\n  } = _ref3;\n  return {\n    _build: {\n      value: function (inheritedContext) {\n        const ctx = updateContext(this.method, newContext(inheritedContext));\n        return queries[ctx.type](ctx);\n      }\n    },\n    query: {\n      get: function () {\n        return this._build();\n      }\n    },\n    unparameterized: {\n      get: function () {\n        return this._build({\n          unparameterized: true\n        }).text;\n      }\n    }\n  };\n};\n\n/** Builds object containing a property for every query building method */\nconst methodProperties$1 = _ref4 => {\n  let {\n    methods,\n    chain\n  } = _ref4;\n  const properties = {};\n  for (const name in methods) {\n    const {\n      getter\n    } = methods[name];\n    if (getter) {\n      // add getter methods\n      properties[name] = {\n        get: function () {\n          return chain({\n            name,\n            prev: this.method\n          });\n        }\n      };\n    } else {\n      // add function call methods\n      properties[name] = {\n        value: function () {\n          for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n            args[_key3] = arguments[_key3];\n          }\n          return chain({\n            name,\n            args,\n            prev: this.method\n          });\n        }\n      };\n    }\n  }\n  return properties;\n};\nvar builderSq = createQueryBuilder;\nconst isTaggedTemplate$5 = _ref5 => {\n  let [strings] = _ref5;\n  return Array.isArray(strings) && strings.raw;\n};\nconst buildTaggedTemplate$5 = (ctx, _ref6) => {\n  let [strings, ...args] = _ref6;\n  let txt = strings[0];\n  for (let i = 0; i < args.length; ++i) {\n    txt += ctx.build(args[i]) + strings[i + 1];\n  }\n  return txt;\n};\nvar tagged_template = {\n  isTaggedTemplate: isTaggedTemplate$5,\n  buildTaggedTemplate: buildTaggedTemplate$5\n};\nconst {\n  isTaggedTemplate: isTaggedTemplate$4,\n  buildTaggedTemplate: buildTaggedTemplate$4\n} = tagged_template;\nconst isObject$6 = arg => arg && arg.constructor.prototype === Object.prototype;\nconst buildCall$8 = callbackfn => (ctx, args) => isTaggedTemplate$4(args) ? buildTaggedTemplate$4(ctx, args) : callbackfn(ctx, args);\nconst mapJoin$8 = function (callbackfn) {\n  let separator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ', ';\n  return (ctx, args) => {\n    let txt = '';\n    for (let i = 0; i < args.length; ++i) {\n      if (i !== 0) txt += separator;\n      txt += callbackfn(ctx, args[i]);\n    }\n    return txt;\n  };\n};\nconst mapJoinWrap$1 = function (callbackfn) {\n  let separator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ', ';\n  let open = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '(';\n  let close = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : ')';\n  return (ctx, args) => {\n    let txt = open;\n    for (let i = 0; i < args.length; ++i) {\n      if (i !== 0) txt += separator;\n      txt += callbackfn(ctx, args[i]);\n    }\n    return txt + close;\n  };\n};\nconst objectMapJoin$5 = function (callbackfn) {\n  let separator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ', ';\n  return (ctx, object) => {\n    let txt = '';\n    const keys = Object.keys(object);\n    for (let i = 0; i < keys.length; ++i) {\n      if (i !== 0) txt += separator;\n      const key = keys[i];\n      txt += callbackfn(ctx, key, object[key]);\n    }\n    return txt;\n  };\n};\nvar build_utils = {\n  isObject: isObject$6,\n  buildCall: buildCall$8,\n  mapJoin: mapJoin$8,\n  mapJoinWrap: mapJoinWrap$1,\n  objectMapJoin: objectMapJoin$5\n};\n\n// included to mitigate cost of case conversion\nconst memoize$1 = fn => {\n  const cache = {};\n  return key => cache[key] || (cache[key] = fn(key));\n};\nconst normalKey$3 = given_key => given_key.indexOf('(') === -1 ? given_key.toLowerCase().trim().replace(/ /g, '_') : given_key;\nvar change_case = {\n  memoize: memoize$1,\n  normalKey: normalKey$3\n};\nvar libUtil = {\n  ...build_utils,\n  ...change_case,\n  ...tagged_template\n};\nconst {\n  isTaggedTemplate: isTaggedTemplate$3\n} = libUtil;\nconst createExpressionCompiler = expressionTable => {\n  const callsCompiler = createCallsCompiler(expressionTable);\n  return (ctx, current) => {\n    const calls = buildCalls(current);\n    const text = callsCompiler(ctx, calls);\n    return {\n      text,\n      args: ctx.params,\n      type: 'expression'\n    };\n  };\n};\n\n// TODO: Performance optimization:\n// inline expression building with this method so at most only one array\n// is allocated in total, no array of object containing arrays nonsense\nconst buildCalls = current => {\n  // get call nodes\n  const calls = [];\n  for (; current; current = current.prev) calls.push(current);\n  if (calls.length === 0) throw Error('Error: Empty expression');\n\n  // build expression list\n  let expression = {\n    name: 'arg',\n    args: []\n  };\n  const expressions = [expression];\n  const last = calls.length - 1;\n  for (let i = last; i >= 0; --i) {\n    const {\n      name,\n      args\n    } = calls[i];\n    if (i === last) {\n      if (name) expression.name = name;else pushCall(expression.args, args);\n    } else {\n      if (name) expressions.push(expression = {\n        name,\n        args: [undefined]\n      });else pushCall(expression.args, args);\n    }\n  }\n  return expressions;\n};\nconst pushCall = (array, args) => {\n  if (isTaggedTemplate$3(args)) {\n    array.push({\n      tag: args\n    });\n  } else {\n    if (args.length === 0) throw Error('Error: Expression call requires at least one argument');\n    for (let i = 0; i < args.length; ++i) {\n      array.push({\n        arg: args[i]\n      });\n    }\n  }\n};\nconst createCallsCompiler = expressionTable => (ctx, calls) => {\n  let exp;\n  for (let i = 0; i < calls.length; ++i) {\n    const {\n      name,\n      args\n    } = calls[i];\n    const {\n      build,\n      minArgs,\n      maxArgs\n    } = expressionTable[name];\n    if (i !== 0) args[0] = {\n      exp\n    };\n    const numArgs = args.length;\n    if (numArgs < minArgs) throw Error(`Error: ${name} requires at least ${minArgs} arguments`);\n    if (numArgs > maxArgs) throw Error(`Error: ${name} accepts at most ${maxArgs} arguments`);\n    exp = build(ctx, args);\n  }\n  return exp;\n};\nvar compile = createExpressionCompiler;\nconst {\n  normalKey: normalKey$2\n} = libUtil;\nconst aggregator = op => columnName => `${op}(${normalKey$2(columnName)})`;\nvar builderExpression = _ref7 => {\n  let {\n    defaultContext,\n    expression\n  } = _ref7;\n  const {\n    expressions\n  } = expression;\n  const newContext = createNewContext(defaultContext);\n  const compile$1 = compile(expressions);\n  const builder = () => {}; // must not be object literal\n  const chain = createChain(builder);\n  Object.defineProperties(builder, {\n    ...builderProperties({\n      compile: compile$1,\n      newContext\n    }),\n    ...methodProperties({\n      expressions,\n      chain\n    })\n  });\n  const ret = chain();\n  ret.max = aggregator('max');\n  ret.min = aggregator('min');\n  ret.avg = aggregator('avg');\n  ret.count = aggregator('count');\n  ret.sum = aggregator('sum');\n  return ret;\n};\nconst builderProperties = _ref8 => {\n  let {\n    compile,\n    newContext\n  } = _ref8;\n  return {\n    _build: {\n      value: function (inherit) {\n        return compile(newContext(inherit), this.current);\n      }\n    },\n    query: {\n      get: function () {\n        return this._build();\n      }\n    },\n    unparameterized: {\n      get: function () {\n        return this._build({\n          unparameterized: true\n        }).text;\n      }\n    }\n  };\n};\nconst createNewContext = defaultContext => {\n  const {\n    build,\n    parameterize,\n    escape,\n    mapKey\n  } = defaultContext;\n  return inherit => {\n    const {\n      params = [],\n      unparameterized = false\n    } = inherit || {};\n    return {\n      // EasyQB instance properties\n      build,\n      parameterize,\n      escape,\n      mapKey,\n      // inherited properties\n      params,\n      unparameterized\n    };\n  };\n};\nconst createChain = prototype => {\n  const chain = current => {\n    const fn = function () {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n      return chain({\n        prev: current,\n        args\n      });\n    };\n    fn.current = current;\n    Object.setPrototypeOf(fn, prototype);\n    return fn;\n  };\n  return chain;\n};\nconst methodProperties = _ref9 => {\n  let {\n    expressions,\n    chain\n  } = _ref9;\n  const properties = {};\n  for (const name in expressions) {\n    properties[name] = {\n      get: function () {\n        return chain({\n          prev: this.current,\n          name\n        });\n      }\n    };\n  }\n  return properties;\n};\nconst {\n  memoize,\n  normalKey: normalKey$1\n} = libUtil;\n\n/**\n * Creates a version of EasyQB for the given SQL dialect and database adapter.\n *\n * A dialect is variant of the SQL language,\n * while an adapter is the driver that communicates with the database.\n *\n * This design makes it easy to swap drivers, e.g. mysql vs mysql2 or\n * add new databases just by connecting a new adapter to an existing dialect.\n *\n */\n\nconst createSqorn = _ref10 => {\n  let {\n    dialect\n  } = _ref10;\n  return function () {\n    let config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      query,\n      expression,\n      parameterize,\n      escape\n    } = dialect;\n\n    // 1. Create default context properties passed through build tree\n    const mapKey = memoize(normalKey$1);\n    const defaultContext = {\n      parameterize,\n      escape,\n      mapKey,\n      build: build$1\n    };\n\n    // 2. Create Expression Builder\n    const e = builderExpression({\n      defaultContext,\n      expression\n    });\n\n    // 3. Create Query Builder\n    const sq = builderSq({\n      defaultContext,\n      query,\n      e,\n      config\n    });\n\n    // 4. TODO: Build Executor, Attach e and execute functions\n\n    // 5. TODO: Return { sq, e, transaction, db }\n    return sq;\n  };\n};\nfunction build$1(arg) {\n  if (arg === undefined) throw Error('Error: undefined argument');\n  if (typeof arg === 'function') {\n    if (arg._build) {\n      const {\n        type,\n        text\n      } = arg._build(this);\n      if (type === 'expression') return text;\n      if (type === 'fragment') return text;\n      return `(${text})`;\n    }\n    return arg(this);\n  }\n  return this.unparameterized ? this.escape(arg) : this.parameterize(arg);\n}\nvar libCore = createSqorn;\nconst {\n  normalKey\n} = libUtil;\n\n/** Query building methods */\nconst methods$1 = {\n  with: {\n    updateContext: (ctx, args) => {\n      ctx.with.push(args);\n    }\n  },\n  withRecursive: {\n    updateContext: (ctx, args) => {\n      ctx.recursive = true;\n      ctx.with.push(args);\n    }\n  },\n  from: {\n    updateContext: (ctx, args) => {\n      ctx.frm.push({\n        args,\n        join: ', '\n      });\n    }\n  },\n  where: {\n    updateContext: (ctx, args) => {\n      ctx.whr.push(args);\n      ctx.target = ctx.whr;\n    }\n  },\n  return: {\n    updateContext: (ctx, args) => {\n      ctx.ret.push(Array.isArray(args) ? args.map(normalKey) : args);\n    }\n  },\n  distinct: {\n    getter: true,\n    updateContext: ctx => {\n      ctx.distinct = [];\n    }\n  },\n  groupBy: {\n    updateContext: (ctx, args) => {\n      ctx.grp.push(args);\n    }\n  },\n  having: {\n    updateContext: (ctx, args) => {\n      ctx.hav.push(args);\n      ctx.target = ctx.hav;\n    }\n  },\n  union: {\n    updateContext: (ctx, args) => {\n      ctx.setop.push({\n        type: 'union',\n        args\n      });\n    }\n  },\n  unionAll: {\n    updateContext: (ctx, args) => {\n      ctx.setop.push({\n        type: 'union all',\n        args\n      });\n    }\n  },\n  intersect: {\n    updateContext: (ctx, args) => {\n      ctx.setop.push({\n        type: 'intersect',\n        args\n      });\n    }\n  },\n  intersectAll: {\n    updateContext: (ctx, args) => {\n      ctx.setop.push({\n        type: 'intersect all',\n        args\n      });\n    }\n  },\n  except: {\n    updateContext: (ctx, args) => {\n      ctx.setop.push({\n        type: 'except',\n        args\n      });\n    }\n  },\n  exceptAll: {\n    updateContext: (ctx, args) => {\n      ctx.setop.push({\n        type: 'except all',\n        args\n      });\n    }\n  },\n  orderBy: {\n    updateContext: (ctx, args) => {\n      ctx.ord.push(args);\n    }\n  },\n  limit: {\n    updateContext: (ctx, args) => {\n      ctx.limit = args;\n    }\n  },\n  offset: {\n    updateContext: (ctx, args) => {\n      ctx.offset = args;\n    }\n  },\n  join: {\n    updateContext: (ctx, args) => {\n      ctx.frm.push(ctx.join = {\n        args,\n        join: ' join '\n      });\n    }\n  },\n  leftJoin: {\n    updateContext: (ctx, args) => {\n      ctx.frm.push(ctx.join = {\n        args,\n        join: ' left join '\n      });\n    }\n  },\n  rightJoin: {\n    updateContext: (ctx, args) => {\n      ctx.frm.push(ctx.join = {\n        args,\n        join: ' right join '\n      });\n    }\n  },\n  fullJoin: {\n    updateContext: (ctx, args) => {\n      ctx.frm.push(ctx.join = {\n        args,\n        join: ' full join '\n      });\n    }\n  },\n  crossJoin: {\n    updateContext: (ctx, args) => {\n      ctx.frm.push(ctx.join = {\n        args,\n        join: ' cross join '\n      });\n    }\n  },\n  naturalJoin: {\n    updateContext: (ctx, args) => {\n      ctx.frm.push(ctx.join = {\n        args,\n        join: ' natural join '\n      });\n    }\n  },\n  naturalLeftJoin: {\n    updateContext: (ctx, args) => {\n      ctx.frm.push(ctx.join = {\n        args,\n        join: ' natural left join '\n      });\n    }\n  },\n  naturalRightJoin: {\n    updateContext: (ctx, args) => {\n      ctx.frm.push(ctx.join = {\n        args,\n        join: ' natural right join '\n      });\n    }\n  },\n  naturalFullJoin: {\n    updateContext: (ctx, args) => {\n      ctx.frm.push(ctx.join = {\n        args,\n        join: ' natural full join '\n      });\n    }\n  },\n  on: {\n    updateContext: (ctx, args) => {\n      const {\n        join\n      } = ctx;\n      if (join.on) {\n        join.on.push(args);\n      } else {\n        ctx.target = join.on = [args];\n      }\n    }\n  },\n  using: {\n    updateContext: (ctx, args) => {\n      const {\n        join\n      } = ctx;\n      if (join.using) {\n        join.using.push(args);\n      } else {\n        join.using = [args];\n      }\n    }\n  },\n  delete: {\n    // getter: true,\n    updateContext: ctx => {\n      ctx.type = 'delete';\n    }\n  },\n  insert: {\n    updateContext: (ctx, args) => {\n      ctx.type = 'insert';\n      ctx.insert = args;\n    }\n  },\n  set: {\n    updateContext: (ctx, args) => {\n      ctx.type = 'update';\n      ctx.set.push(args);\n    }\n  },\n  express: {\n    updateContext: (ctx, args, count) => {\n      if (count.id === 0) {\n        count.id++;\n        ctx.frm.push(ctx.join = {\n          type: 'from',\n          args,\n          join: ', '\n        });\n      } else if (count.id === 1) {\n        count.id++;\n        ctx.whr.push(args);\n      } else if (count.id === 2) {\n        count.id++;\n        ctx.ret.push(args);\n      } else throw Error('Invalid express call');\n    }\n  }\n};\nvar methods_1 = methods$1;\nconst {\n  mapJoin: mapJoin$7\n} = libUtil;\nvar values_array = (ctx, array) => {\n  const keys = uniqueKeys(array);\n  return {\n    columns: columns(ctx, keys),\n    values: values(ctx, array, keys)\n  };\n};\n\n// gets unique keys in object array\nconst uniqueKeys = array => {\n  const keys = {};\n  for (const object of array) {\n    for (const key in object) {\n      keys[key] = true;\n    }\n  }\n  return Object.keys(keys);\n};\n\n// gets column string from unique keys of object array\nconst columns = mapJoin$7((ctx, arg) => ctx.mapKey(arg));\n\n// gets values string of object array\nconst values = (ctx, source, keys) => {\n  let txt = 'values ';\n  for (let i = 0; i < source.length; ++i) {\n    if (i !== 0) txt += ', ';\n    txt += '(';\n    const object = source[i];\n    for (let j = 0; j < keys.length; ++j) {\n      if (j !== 0) txt += ', ';\n      txt += value$1(ctx, object[keys[j]]);\n    }\n    txt += ')';\n  }\n  return txt;\n};\nconst value$1 = (ctx, arg) => {\n  if (arg === undefined) return 'default';\n  return ctx.build(arg);\n};\nconst {\n  isObject: isObject$5,\n  buildCall: buildCall$7,\n  mapJoin: mapJoin$6,\n  objectMapJoin: objectMapJoin$4\n} = libUtil;\nvar _with = ctx => {\n  if (ctx.with.length === 0) return;\n  const txt = calls$3(ctx, ctx.with);\n  return txt && `with ${ctx.recursive ? 'recursive ' : ''}${txt}`;\n};\nconst buildArg$4 = (ctx, arg) => {\n  if (isObject$5(arg)) return buildObject$5(ctx, arg);\n  throw Error('Invalid with argument:', arg);\n};\nconst buildProperty$4 = (ctx, key, value) => {\n  if (typeof value === 'function') {\n    return `${ctx.mapKey(key)} ${ctx.build(value)}`;\n  }\n  if (Array.isArray(value)) {\n    const {\n      columns,\n      values\n    } = values_array(ctx, value);\n    return `${ctx.mapKey(key)}(${columns}) (${values})`;\n  }\n  throw Error(`Error: Invalid .with argument`);\n};\nconst buildObject$5 = objectMapJoin$4(buildProperty$4);\nconst calls$3 = mapJoin$6(buildCall$7(mapJoin$6(buildArg$4)));\nconst {\n  isObject: isObject$4,\n  buildCall: buildCall$6,\n  mapJoin: mapJoin$5,\n  objectMapJoin: objectMapJoin$3\n} = libUtil;\nconst buildArg$3 = (ctx, arg) => {\n  if (typeof arg === 'string') return arg;\n  if (isObject$4(arg)) return buildObject$4(ctx, arg);\n  return ctx.build(arg);\n};\nconst buildProperty$3 = (ctx, key, value) => {\n  const expression = typeof value === 'string' ? value : ctx.build(value);\n  return `${expression} ${ctx.mapKey(key)}`;\n};\nconst buildObject$4 = objectMapJoin$3(buildProperty$3);\nvar expressions$1 = mapJoin$5(buildCall$6(mapJoin$5(buildArg$3)));\nvar select$2 = ctx => `select ${buildDistinct(ctx)}${expressions$1(ctx, ctx.ret) || '*'}`;\nconst buildDistinct = ctx => ctx.distinct ? ctx.distinct.length ?\n// TODO: expressions shouldn't be aliasable here\n`distinct on (${expressions$1(ctx, ctx.distinct)})` : 'distinct' : '';\nconst {\n  isTaggedTemplate: isTaggedTemplate$2,\n  buildTaggedTemplate: buildTaggedTemplate$3,\n  isObject: isObject$3,\n  mapJoin: mapJoin$4,\n  objectMapJoin: objectMapJoin$2\n} = libUtil;\nconst buildCall$5 = callbackfn => (ctx, args) => isTaggedTemplate$2(args) ? `(${buildTaggedTemplate$3(ctx, args)})` : callbackfn(ctx, args);\nconst buildArg$2 = (ctx, arg) => isObject$3(arg) ? buildObject$3(ctx, arg) : ctx.build(arg);\nconst valuesList = mapJoin$4((ctx, arg) => ctx.build(arg));\nconst buildProperty$2 = (ctx, key, value) => {\n  const name = ctx.mapKey(key);\n  if (value === null) return `(${name} is null)`;\n  if (Array.isArray(value)) return `(${name} in (${valuesList(ctx, value)}))`;\n  return `(${name} = ${ctx.build(value)})`;\n};\nconst buildObject$3 = objectMapJoin$2(buildProperty$2, ' and ');\nvar conditions = mapJoin$4(buildCall$5(mapJoin$4(buildArg$2, ' and ')), ' and ');\nconst {\n  isObject: isObject$2,\n  buildCall: buildCall$4,\n  mapJoin: mapJoin$3,\n  objectMapJoin: objectMapJoin$1\n} = libUtil;\nvar from_items = function (ctx, items) {\n  let start = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  let end = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : items.length;\n  if (end > items.length) end = items.length;\n  let txt = '';\n  for (let i = start; i < end; ++i) {\n    const item = items[i];\n    if (i !== start) txt += item.join;\n    txt += fromItem(ctx, item.args);\n    if (item.on) txt += ` on ${conditions(ctx, item.on)}`;else if (item.using) txt += ` using (${using$1(ctx, item.using)})`;\n  }\n  return txt;\n};\nconst usingArg = (ctx, arg) => {\n  if (typeof arg === 'string') return arg;\n  if (typeof arg === 'function') return ctx.build(arg);\n  throw Error('Error: Invalid .using arg');\n};\nconst using$1 = mapJoin$3(buildCall$4(mapJoin$3(usingArg)));\nconst fromArg = (ctx, arg) => {\n  if (typeof arg === 'string') return arg;\n  if (typeof arg === 'function') return ctx.build(arg);\n  if (isObject$2(arg)) return buildObject$2(ctx, arg);\n  throw Error('Error: Invalid .from argument:', arg);\n};\nconst buildProperty$1 = (ctx, key, value) => {\n  if (typeof value === 'string') return `${value} ${ctx.mapKey(key)}`;\n  if (typeof value === 'function') return `${ctx.build(value)} ${ctx.mapKey(key)}`;\n  if (Array.isArray(value)) {\n    const {\n      columns,\n      values\n    } = values_array(ctx, value);\n    return `(${values}) ${ctx.mapKey(key)}(${columns})`;\n  }\n  throw Error('Error: Invalid .from argument');\n};\nconst buildObject$2 = objectMapJoin$1(buildProperty$1);\nconst fromItem = buildCall$4(mapJoin$3(fromArg));\nvar from$2 = ctx => {\n  const txt = from_items(ctx, ctx.frm);\n  return txt && `from ${txt}`;\n};\nvar where$2 = ctx => {\n  if (ctx.whr.length === 0) return;\n  const txt = conditions(ctx, ctx.whr);\n  return txt && 'where ' + txt;\n};\nconst {\n  isObject: isObject$1,\n  buildCall: buildCall$3,\n  mapJoin: mapJoin$2,\n  mapJoinWrap\n} = libUtil;\nvar group$2 = ctx => {\n  if (ctx.grp.length === 0) return;\n  const txt = calls$2(ctx, ctx.grp);\n  return txt && `group by ${txt}`;\n};\nconst buildArg$1 = (ctx, arg) => {\n  if (typeof arg === 'string') return arg;\n  if (typeof arg === 'function') return ctx.build(arg);\n  if (Array.isArray(arg)) return buildArrayArg(ctx, arg);\n  if (isObject$1(arg)) return buildObject$1(ctx, arg);\n  throw Error('Invalid order by argument:', arg);\n};\nconst buildArrayArg = mapJoinWrap(buildArg$1);\n\n// postgres only\n// clone of buildArg() without support for object args\nconst buildCubeOrRollupArg = (ctx, arg) => {\n  if (typeof arg === 'string') return arg;\n  if (typeof arg === 'function') return ctx.build(arg);\n  if (Array.isArray(arg)) return buildCubeOrRollupArrayArg(ctx, arg);\n  throw Error('Invalid cube/rollup argument');\n};\n\n// postgres only\n// clone of buildArrayArg() without support for object args\nconst buildCubeOrRollupArrayArg = mapJoinWrap(buildCubeOrRollupArg);\n\n// postgres only\nconst buildObject$1 = (ctx, obj) => {\n  const {\n    type,\n    args\n  } = obj;\n  if (type === 'rollup') {\n    return `rollup ${buildCubeOrRollupArg(ctx, args)}`;\n  }\n  if (type === 'cube') {\n    return `cube ${buildCubeOrRollupArg(ctx, args)}`;\n  }\n  if (type === 'grouping sets') {\n    return `grouping sets ${buildArg$1(ctx, args)}`;\n  }\n  throw Error('Invalid group by argument');\n};\nconst calls$2 = mapJoin$2(buildCall$3(mapJoin$2(buildArg$1)));\nvar having$2 = ctx => {\n  if (ctx.hav.length === 0) return;\n  const txt = conditions(ctx, ctx.hav);\n  return txt && 'having ' + txt;\n};\nvar setop$2 = ctx => {\n  if (ctx.setop.length === 0) return;\n  let txt = '';\n  let first = true;\n  const {\n    setop\n  } = ctx;\n  for (let i = 0; i < setop.length; ++i) {\n    const {\n      type,\n      args\n    } = ctx.setop[i];\n    for (let j = 0; j < args.length; ++j) {\n      if (!first) {\n        txt += ' ';\n      } else {\n        first = false;\n      }\n      txt += `${type} ${ctx.build(args[j])}`;\n    }\n  }\n  return txt;\n};\nconst {\n  isObject,\n  buildCall: buildCall$2,\n  mapJoin: mapJoin$1\n} = libUtil;\nvar order$2 = ctx => {\n  if (ctx.ord.length === 0) return;\n  const txt = calls$1(ctx, ctx.ord);\n  return txt && `order by ${txt}`;\n};\nconst buildArg = (ctx, arg) => {\n  if (typeof arg === 'string') return arg;\n  if (typeof arg === 'function') return ctx.build(arg);\n  if (isObject(arg)) return buildObject(ctx, arg);\n  throw Error('Invalid order by argument:', arg);\n};\nconst buildObject = (ctx, obj) => {\n  let txt = '';\n  const {\n    by,\n    sort,\n    using,\n    nulls\n  } = obj;\n  // by\n  if (typeof by === 'string') txt += by;else if (typeof by === 'function') txt += ctx.build(by);else throw Error('Invalid order by property \"by\"');\n  // sort\n  if (sort) {\n    if (sort === 'desc') txt += ' desc';else if (sort === 'asc') txt += ' asc';else if (typeof sort === 'string') txt += ` using ${sort}`;else throw Error('Invalid order by property \"sort\"');\n  } else if (using) {\n    if (typeof using === 'string') txt += ` using ${using}`;else throw Error('Invalid order by property \"using\"');\n  }\n  // nulls\n  if (nulls === undefined) ;else if (nulls === 'last') txt += ' nulls last';else if (nulls === 'first') txt += ' nulls first';else throw Error('Invalid order by property \"nulls\"');\n  // return\n  return txt;\n};\nconst calls$1 = mapJoin$1(buildCall$2(mapJoin$1(buildArg)));\nconst {\n  isTaggedTemplate: isTaggedTemplate$1,\n  buildTaggedTemplate: buildTaggedTemplate$2\n} = libUtil;\nvar limit_offset = (ctx, args) => {\n  if (isTaggedTemplate$1(args)) return buildTaggedTemplate$2(ctx, args);\n  const arg = args[0];\n  if (typeof arg === 'number') return ctx.parameterize(arg);\n  if (typeof arg === 'function') return ctx.build(arg);\n  throw Error('Error: Invalid limit/offset argument');\n};\nvar limit$2 = ctx => ctx.limit && `limit ${limit_offset(ctx, ctx.limit)}`;\nvar offset$2 = ctx => ctx.offset && `offset ${limit_offset(ctx, ctx.offset)}`;\nvar _delete = ctx => {\n  const txt = from_items(ctx, ctx.frm);\n  return txt && `delete from ${txt}`;\n};\nvar returning$2 = ctx => {\n  if (!ctx.ret) return;\n  const txt = expressions$1(ctx, ctx.ret);\n  return txt && `returning ${txt}`;\n};\nconst {\n  isTaggedTemplate,\n  buildTaggedTemplate: buildTaggedTemplate$1\n} = libUtil;\nvar insert$1 = ctx => {\n  const table = from_items(ctx, ctx.frm);\n  const values = buildCall$1(ctx, ctx.insert);\n  return `insert into ${table}${values}`;\n};\nconst buildCall$1 = (ctx, args) => {\n  if (isTaggedTemplate(args)) return ' ' + buildTaggedTemplate$1(ctx, args);\n  if (args.length === 1 && args[0] === undefined) return ' default values';\n  if (Array.isArray(args[0])) return buildValuesArray(ctx, args[0]);\n  if (typeof args[0] === 'function') return ' ' + ctx.build(args[0]);\n  return buildValuesArray(ctx, args);\n};\nconst buildValuesArray = (ctx, array) => {\n  const {\n    values,\n    columns\n  } = values_array(ctx, array);\n  return `(${columns}) ${values}`;\n};\nvar update$2 = ctx => {\n  const txt = from_items(ctx, ctx.frm);\n  return txt && `update ${txt}`;\n};\nconst {\n  buildCall,\n  mapJoin,\n  objectMapJoin\n} = libUtil;\nvar set$2 = ctx => {\n  if (!ctx.set) return;\n  const txt = calls(ctx, ctx.set);\n  return txt && 'set ' + txt;\n};\nconst buildProperty = (ctx, key, value) => `${ctx.mapKey(key)} = ${ctx.build(value)}`;\nconst calls = mapJoin(buildCall(mapJoin(objectMapJoin(buildProperty))));\nvar clauses$1 = {\n  wth: _with,\n  select: select$2,\n  from: from$2,\n  where: where$2,\n  group: group$2,\n  having: having$2,\n  setop: setop$2,\n  order: order$2,\n  limit: limit$2,\n  offset: offset$2,\n  del: _delete,\n  returning: returning$2,\n  insert: insert$1,\n  update: update$2,\n  set: set$2\n};\nconst {\n  wth: wth$1,\n  select: select$1,\n  from: from$1,\n  where: where$1,\n  group: group$1,\n  having: having$1,\n  setop: setop$1,\n  order: order$1,\n  limit: limit$1,\n  offset: offset$1,\n  del: del$1,\n  returning: returning$1,\n  insert,\n  update: update$1,\n  set: set$1\n} = clauses$1;\nconst query$2 = function () {\n  for (var _len5 = arguments.length, clauses = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n    clauses[_key5] = arguments[_key5];\n  }\n  return ctx => {\n    let text = '';\n    for (const clause of clauses) {\n      const str = clause && clause(ctx);\n      if (str) {\n        if (text) text += ctx.separator;\n        text += str;\n      }\n    }\n    return {\n      text,\n      args: ctx.params,\n      type: ctx.userType || ctx.type\n    };\n  };\n};\nconst queries$2 = {\n  select: query$2(wth$1, select$1, from$1, where$1, group$1, having$1, setop$1, order$1, limit$1, offset$1),\n  update: query$2(wth$1, update$1, set$1, where$1, returning$1),\n  delete: query$2(wth$1, del$1, where$1, returning$1),\n  insert: query$2(wth$1, insert, returning$1)\n};\nvar query_1$1 = {\n  query: query$2,\n  queries: queries$2\n};\nvar common$1 = {\n  conditions,\n  expressions: expressions$1,\n  fromItems: from_items,\n  limitOffset: limit_offset,\n  valuesArray: values_array\n};\nconst {\n  query: query$1,\n  queries: queries$1\n} = query_1$1;\nvar libSq = {\n  methods: methods_1,\n  query: query$1,\n  queries: queries$1,\n  clauses: clauses$1,\n  common: common$1\n};\nconst {\n  methods,\n  queries,\n  query,\n  clauses,\n  common\n} = libSq;\nconst {\n  fromItems,\n  expressions\n} = common;\nconst {\n  wth,\n  from,\n  where,\n  group,\n  having,\n  setop,\n  order,\n  limit,\n  offset,\n  returning,\n  set\n} = clauses;\nconst postgresMethods = {\n  distinctOn: {\n    updateContext: (ctx, args) => {\n      if (ctx.distinct) {\n        ctx.distinct.push(args);\n      } else {\n        ctx.distinct = [args];\n      }\n    }\n  }\n};\n\n// SELECT supports .distinctOn(...expressions)\nconst select = ctx => {\n  let txt = 'select ';\n  if (ctx.distinct) {\n    txt += 'distinct ';\n    if (ctx.distinct.length) {\n      txt += `on (${expressions(ctx, ctx.distinct)}) `;\n    }\n  }\n  txt += expressions(ctx, ctx.ret) || '*';\n  return txt;\n};\n// DELETE: first .from call is used in the DELETE clause\n// subsequent .from calls are used in the USING clause\nconst del = ctx => {\n  const txt = fromItems(ctx, ctx.frm, 0, 1);\n  return txt && `delete from ${txt}`;\n};\nconst using = ctx => {\n  const txt = fromItems(ctx, ctx.frm, 1);\n  return txt && `using ${txt}`;\n};\n// UPDATE: first .from call is used in the UPDATE clause\n// subsequent .from calls are used in the FROM clause\nconst update = ctx => {\n  const txt = fromItems(ctx, ctx.frm, 0, 1);\n  return txt && `update ${txt}`;\n};\nconst updateFrom = ctx => {\n  const txt = fromItems(ctx, ctx.frm, 1);\n  return txt && `from ${txt}`;\n};\nvar query_1 = {\n  methods: {\n    ...methods,\n    ...postgresMethods\n  },\n  queries: {\n    ...queries,\n    select: query(wth, select, from, where, group, having, setop, order, limit, offset),\n    delete: query(wth, del, using, where, returning),\n    update: query(wth, update, set, updateFrom, where, returning)\n  },\n  properties: {\n    rollup: {\n      value: function () {\n        for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n          args[_key6] = arguments[_key6];\n        }\n        return {\n          type: 'rollup',\n          args\n        };\n      }\n    },\n    cube: {\n      value: function () {\n        for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n          args[_key7] = arguments[_key7];\n        }\n        return {\n          type: 'cube',\n          args\n        };\n      }\n    },\n    groupingSets: {\n      value: function () {\n        for (var _len8 = arguments.length, args = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {\n          args[_key8] = arguments[_key8];\n        }\n        return {\n          type: 'grouping sets',\n          args\n        };\n      }\n    }\n  }\n};\nconst {\n  buildTaggedTemplate\n} = libUtil;\nconst dateToYYYYMMDD = d => [d.getFullYear(), ('0' + (d.getMonth() + 1)).slice(-2), ('0' + d.getDate()).slice(-2)].join('-');\nconst build = (ctx, arg) => {\n  // compiled expression string\n  if (arg.exp) return arg.exp;\n  // tagged template argument\n  if (arg.tag) return buildTaggedTemplate(ctx, arg.tag);\n  // expression, subquery or fragment argument\n  return ctx.build(arg.arg);\n};\nconst unaryPre$1 = op => ({\n  minArgs: 1,\n  maxArgs: 1,\n  build: (ctx, args) => `(${op} ${build(ctx, args[0])})`\n});\nconst unaryPost$1 = op => ({\n  minArgs: 1,\n  maxArgs: 1,\n  build: (ctx, args) => `(${build(ctx, args[0])} ${op})`\n});\nconst unaryFunction$1 = op => ({\n  minArgs: 1,\n  maxArgs: 1,\n  build: (ctx, args) => `${op}(${build(ctx, args[0])})`\n});\nconst binary$1 = op => ({\n  minArgs: 2,\n  maxArgs: 2,\n  build: (ctx, args) => `(${build(ctx, args[0])} ${op} ${build(ctx, args[1])})`\n});\nconst dateBinary$1 = op => ({\n  minArgs: 2,\n  maxArgs: 2,\n  build: (ctx, args) => {\n    const inDate = args[1].arg;\n    if (typeof inDate.getMonth === 'function') {\n      args[1].arg = dateToYYYYMMDD(inDate);\n    }\n    return `date(${build(ctx, args[0])}, 'YYYY-MM-DD') ${op} ${build(ctx, args[1])}`;\n  }\n});\nconst ternary$1 = (op1, op2) => ({\n  minArgs: 3,\n  maxArgs: 3,\n  build: (ctx, args) => `(${build(ctx, args[0])} ${op1} ${build(ctx, args[1])} ${op2} ${build(ctx, args[2])})`\n});\nconst nary$1 = op => ({\n  minArgs: 1,\n  maxArgs: Number.MAX_SAFE_INTEGER,\n  build: (ctx, args) => {\n    if (args.length === 1) return build(ctx, args[0]);\n    let txt = '(';\n    for (let i = 0; i < args.length; ++i) {\n      if (i !== 0) txt += ` ${op} `;\n      txt += build(ctx, args[i]);\n    }\n    return txt + ')';\n  }\n});\nconst naryFunction$1 = fn => ({\n  minArgs: 1,\n  maxArgs: Number.MAX_SAFE_INTEGER,\n  build: (ctx, args) => {\n    let txt = `${fn}(`;\n    for (let i = 0; i < args.length; ++i) {\n      if (i !== 0) txt += `, `;\n      txt += build(ctx, args[i]);\n    }\n    return txt + ')';\n  }\n});\nconst oneValue$1 = {\n  minArgs: 1,\n  maxArgs: 1,\n  build: (ctx, args) => build(ctx, args[0])\n};\nconst compositeValue$1 = {\n  minArgs: 1,\n  maxArgs: Number.MAX_SAFE_INTEGER,\n  build: (ctx, args) => {\n    if (args.length === 1) return build(ctx, args[0]);\n    let txt = '';\n    for (let i = 0; i < args.length; ++i) {\n      if (i !== 0) txt += ', ';\n      txt += build(ctx, args[i]);\n    }\n    return args.length > 1 ? `(${txt})` : txt;\n  }\n};\nconst buildValuesList = (ctx, values) => {\n  if (values.length === 0) throw Error('Error: .in operation values list empty');\n  let txt = '(';\n  for (let i = 0; i < values.length; ++i) {\n    if (i !== 0) txt += ', ';\n    txt += ctx.build(values[i]);\n  }\n  return txt + ')';\n};\nconst membership$1 = op => ({\n  minArgs: 2,\n  maxArgs: 2,\n  build: (ctx, _ref11) => {\n    let [arg1, arg2] = _ref11;\n    return `(${build(ctx, arg1)} ${op} ${Array.isArray(arg2.arg) ? buildValuesList(ctx, arg2.arg) : build(ctx, arg2)})`;\n  }\n});\nconst quantifiedComparison$1 = op => ({\n  minArgs: 2,\n  maxArgs: 2,\n  build: (ctx, args) => `(${build(ctx, args[0])} ${op}(${build(ctx, args[1])}))`\n});\nvar util = {\n  build,\n  unaryFunction: unaryFunction$1,\n  unaryPre: unaryPre$1,\n  unaryPost: unaryPost$1,\n  binary: binary$1,\n  ternary: ternary$1,\n  nary: nary$1,\n  naryFunction: naryFunction$1,\n  oneValue: oneValue$1,\n  compositeValue: compositeValue$1,\n  membership: membership$1,\n  quantifiedComparison: quantifiedComparison$1,\n  dateBinary: dateBinary$1\n};\nconst {\n  unaryPre,\n  unaryPost,\n  unaryFunction,\n  binary,\n  ternary,\n  nary,\n  naryFunction,\n  oneValue,\n  compositeValue,\n  membership,\n  quantifiedComparison,\n  dateBinary\n} = util;\n\n// value\nconst value = {\n  arg: compositeValue,\n  row: compositeValue,\n  unknown: oneValue,\n  boolean: oneValue,\n  number: oneValue,\n  string: oneValue,\n  array: oneValue,\n  json: oneValue,\n  table: oneValue\n};\n\n// boolean\nconst boolean = {\n  // logical\n  and: nary('and'),\n  or: nary('or'),\n  not: unaryFunction('not'),\n  // comparison\n  isTrue: unaryPost('is true'),\n  isNotTrue: unaryPost('is not true'),\n  isFalse: unaryPost('is false'),\n  isNotFalse: unaryPost('is not false'),\n  isUnknown: unaryPost('is unknown'),\n  isNotUnknown: unaryPost('is not unknown')\n};\n\n// comparison\nconst comparison = {\n  // binary comparison\n  eq: binary('='),\n  neq: binary('<>'),\n  lt: binary('<'),\n  gt: binary('>'),\n  lte: binary('<='),\n  gte: binary('>='),\n  // misc\n  between: ternary('between', 'and'),\n  isDistinctFrom: binary('is distinct from'),\n  isNotDistinctFrom: binary('is not distinct from'),\n  isNull: unaryPost('is null'),\n  isNotNull: unaryPost('is not null'),\n  in: membership('in'),\n  notIn: membership('not in'),\n  // quantified any\n  eqAny: quantifiedComparison('= any'),\n  neqAny: quantifiedComparison('<> any'),\n  ltAny: quantifiedComparison('< any'),\n  gtAny: quantifiedComparison('> any'),\n  lteAny: quantifiedComparison('<= any'),\n  gteAny: quantifiedComparison('>= any'),\n  // quantified all\n  eqAll: quantifiedComparison('= all'),\n  neqAll: quantifiedComparison('<> all'),\n  ltAll: quantifiedComparison('< all'),\n  gtAll: quantifiedComparison('> all'),\n  lteAll: quantifiedComparison('<= all'),\n  gteAll: quantifiedComparison('>= all')\n};\n\n// dates\nconst dateComparison = {\n  // dateEq: dateBinary('='),\n  // dateNeq: dateBinary('<>'),\n  dateLt: dateBinary('<'),\n  dateGt: dateBinary('>'),\n  dateLte: dateBinary('<='),\n  dateGte: dateBinary('>=')\n};\n\n// math\nconst math = {\n  add: binary('+'),\n  sub: binary('-'),\n  mul: binary('*'),\n  div: binary('/'),\n  mod: binary('%'),\n  exp: binary('%'),\n  sqrt: unaryPre('|/'),\n  cbrt: unaryPre('||/'),\n  fact: unaryPre('!!'),\n  abs: unaryFunction('abs')\n};\n\n// string\nconst string = {\n  like: binary('like'),\n  notLike: binary('not like')\n};\nconst array = {\n  unnest: naryFunction('unnest')\n};\nvar libExpression = {\n  ...value,\n  ...boolean,\n  ...comparison,\n  ...math,\n  ...array,\n  ...dateComparison,\n  ...string\n};\nvar expression = {\n  expressions: libExpression\n};\n\n// parameterizes given argument, function should be attached to ctx\nfunction parameterize$1(arg) {\n  if (arg === undefined) throw Error('Error: parameter is undefined');\n  return `$${this.params.push(arg)}`;\n}\n\n/** Escapes an argument for use in UNPARAMETERIZED queries. NOT SAFE AT ALL. */\nconst escape$1 = arg => {\n  if (arg === undefined) throw Error('Error: parameter is undefined');\n  if (arg === null) return 'null';\n  if (typeof arg === 'string') return escapeLiteral(arg);\n  if (typeof arg === 'number') return '' + arg;\n  if (typeof arg === 'boolean') return '' + arg;\n  if (typeof arg === 'object') {\n    if (Array.isArray(arg)) {\n      return `array[${arg.map(e => escape$1(e)).join(', ')}]`;\n    } else {\n      return escapeLiteral(JSON.stringify(arg));\n    }\n  }\n  throw Error(`Invalid argument SQL argument of type '${typeof arg}'`, arg);\n};\n\n// from https://github.com/brianc/node-postgres/blob/eb076db5d47a29c19d3212feac26cd7b6d257a95/lib/client.js#L351\nconst escapeLiteral = str => {\n  let hasBackslash = false;\n  let escaped = \"'\";\n  for (let i = 0; i < str.length; i++) {\n    const c = str[i];\n    if (c === \"'\") {\n      escaped += c + c;\n    } else if (c === '\\\\') {\n      escaped += c + c;\n      hasBackslash = true;\n    } else {\n      escaped += c;\n    }\n  }\n  escaped += \"'\";\n  if (hasBackslash === true) {\n    escaped = ' E' + escaped;\n  }\n  return escaped;\n};\nvar parameterize_1 = {\n  parameterize: parameterize$1,\n  escape: escape$1\n};\nconst {\n  parameterize,\n  escape\n} = parameterize_1;\nvar dialectPostgres = {\n  query: query_1,\n  expression,\n  parameterize,\n  escape\n};\nconst a$1 = libCore({\n  dialect: dialectPostgres\n});\na$1.from = undefined;\nvar src = a$1;\nvar imageExtensions = [\"ase\", \"art\", \"bmp\", \"blp\", \"cd5\", \"cit\", \"cpt\", \"cr2\", \"cut\", \"dds\", \"dib\", \"djvu\", \"egt\", \"exif\", \"gif\", \"gpl\", \"grf\", \"icns\", \"heic\", \"ico\", \"iff\", \"jng\", \"jpeg\", \"jpg\", \"jfif\", \"jp2\", \"jps\", \"lbm\", \"max\", \"miff\", \"mng\", \"msp\", \"nitf\", \"ota\", \"pbm\", \"pc1\", \"pc2\", \"pc3\", \"pcf\", \"pcx\", \"pdn\", \"pgm\", \"PI1\", \"PI2\", \"PI3\", \"pict\", \"pct\", \"pnm\", \"pns\", \"ppm\", \"psb\", \"psd\", \"pdd\", \"psp\", \"px\", \"pxm\", \"pxr\", \"qfx\", \"raw\", \"rle\", \"sct\", \"sgi\", \"rgb\", \"int\", \"bw\", \"tga\", \"tiff\", \"tif\", \"vtf\", \"xbm\", \"xcf\", \"xpm\", \"3dv\", \"amf\", \"ai\", \"awg\", \"cgm\", \"cdr\", \"cmx\", \"dxf\", \"e2d\", \"egt\", \"eps\", \"fs\", \"gbr\", \"odg\", \"svg\", \"stl\", \"vrml\", \"x3d\", \"sxd\", \"v2d\", \"vnd\", \"wmf\", \"emf\", \"art\", \"xar\", \"png\", \"webp\", \"jxr\", \"hdp\", \"wdp\", \"cur\", \"ecw\", \"iff\", \"lbm\", \"liff\", \"nrrd\", \"pam\", \"pcx\", \"pgf\", \"sgi\", \"rgb\", \"rgba\", \"bw\", \"int\", \"inta\", \"sid\", \"ras\", \"sun\", \"tga\"];\nvar videoExtensions = [\"3g2\", \"3gp\", \"aaf\", \"asf\", \"avchd\", \"avi\", \"drc\", \"flv\", \"m2v\", \"m4p\", \"m4v\", \"mkv\", \"mng\", \"mov\", \"mp2\", \"mp4\", \"mpe\", \"mpeg\", \"mpg\", \"mpv\", \"mxf\", \"nsv\", \"ogg\", \"ogv\", \"qt\", \"rm\", \"rmvb\", \"roq\", \"svi\", \"vob\", \"webm\", \"wmv\", \"yuv\"];\nfunction dbFactory(globals) {\n  const g = globals || _g;\n  const {\n    tokenPost,\n    tokenPostAttachment\n  } = authFactory(g);\n  let _listenerIndex = 0;\n  const _listeners = {};\n  function _runListeners() {\n    for (const cb of Object.values(_listeners)) {\n      cb(...arguments);\n    }\n  }\n  const dbEventListener = callback => {\n    const currKey = '' + _listenerIndex++;\n    _listeners[currKey] = callback;\n    return () => {\n      delete _listeners[currKey];\n    };\n  };\n  const allCallback = async (trx, tableName, userAssociatedRecordsOnly) => {\n    trx.count = \"all\";\n    trx.tableName = tableName;\n    if (userAssociatedRecordsOnly) trx.userAssociatedRecordsOnly = userAssociatedRecordsOnly;\n    _runListeners(DB_STATUS.PENDING, trx.type, EXECUTE_COUNT.ALL, tableName !== \"untable\" ? tableName : null);\n    try {\n      const res = await tokenPost(POST_TYPES.EASY_QB, trx);\n      if (res.success) {\n        g.analyticsEnabled && g.analyticsEventsToTrack.db_all && g.analyticsEvent('db_all', {\n          tableName: tableName !== \"untable\" ? tableName : undefined,\n          type: trx.type\n        });\n        _runListeners(DB_STATUS.SUCCESS, trx.type, EXECUTE_COUNT.ALL, tableName !== \"untable\" ? tableName : null, res.data);\n        return res.data;\n      } else {\n        _runListeners(DB_STATUS.ERROR, trx.type, EXECUTE_COUNT.ALL, tableName !== \"untable\" ? tableName : null);\n        return res;\n      }\n    } catch (error) {\n      console.warn(error);\n      _runListeners(DB_STATUS.ERROR, trx.type, EXECUTE_COUNT.ALL, tableName !== \"untable\" ? tableName : null);\n      return [];\n    }\n  };\n  const oneCallback = async (trx, tableName, userAssociatedRecordsOnly) => {\n    trx.count = \"one\";\n    trx.tableName = tableName;\n    if (userAssociatedRecordsOnly) trx.userAssociatedRecordsOnly = userAssociatedRecordsOnly;\n    _runListeners(DB_STATUS.PENDING, trx.type, EXECUTE_COUNT.ONE, tableName !== \"untable\" ? tableName : null);\n    try {\n      const res = await tokenPost(POST_TYPES.EASY_QB, trx);\n      if (res.success) {\n        g.analyticsEnabled && g.analyticsEventsToTrack.db_one && g.analyticsEvent('db_one', {\n          tableName: tableName !== \"untable\" ? tableName : undefined,\n          type: trx.type\n        });\n        _runListeners(DB_STATUS.SUCCESS, trx.type, EXECUTE_COUNT.ONE, tableName !== \"untable\" ? tableName : null, res.data);\n        return res.data;\n      } else {\n        _runListeners(DB_STATUS.ERROR, trx.type, EXECUTE_COUNT.ONE, tableName !== \"untable\" ? tableName : null);\n        return res;\n      }\n    } catch (error) {\n      console.warn(error);\n      _runListeners(DB_STATUS.ERROR, trx.type, EXECUTE_COUNT.ONE, tableName !== \"untable\" ? tableName : null);\n      return {};\n    }\n  };\n  const db = (tableName, userAssociatedRecordsOnly) => {\n    if (tableName && typeof tableName === \"string\") {\n      return src({\n        allCallback,\n        oneCallback,\n        userAssociatedRecordsOnly,\n        tableName: tableName.toUpperCase()\n      })(tableName.replace(/[^0-9a-zA-Z]/g, '_').toUpperCase());\n    } else {\n      return src({\n        allCallback,\n        oneCallback,\n        userAssociatedRecordsOnly,\n        tableName: \"untable\"\n      })(\"untable\");\n    }\n  };\n  const _setAttachment = async _ref12 => {\n    let {\n      recordKey,\n      columnName,\n      attachment,\n      tableName,\n      type\n    } = _ref12;\n    const ext = attachment.name.split(\".\").pop().toLowerCase();\n    // Similar pattern as db() naming\n    let fixedTableName;\n    if (tableName && typeof tableName === \"string\") {\n      fixedTableName = tableName.toUpperCase();\n    } else {\n      fixedTableName = \"untable\";\n    }\n    if (type === \"image\" && !imageExtensions.includes(ext)) {\n      return {\n        success: false,\n        message: \"Image files must have a proper image extension in the file name\"\n      };\n    }\n    if (type === \"video\" && !videoExtensions.includes(ext)) {\n      return {\n        success: false,\n        message: \"Video files must have a proper video extension in the file name\"\n      };\n    }\n    const formData = new FormData();\n    formData.append(\"file\", attachment);\n    formData.append(\"name\", attachment.name);\n    const customHeaders = {\n      'Eb-upload-type': type,\n      'Eb-column-name': columnName,\n      'Eb-record-id': recordKey,\n      'Eb-table-name': fixedTableName\n    };\n    try {\n      const res = await tokenPostAttachment(formData, customHeaders);\n      if (res.success) {\n        g.analyticsEnabled && g.analyticsEventsToTrack.db_one && g.analyticsEvent('db_one', {\n          tableName: fixedTableName !== \"untable\" ? fixedTableName : undefined,\n          type: \"update\"\n        });\n        _runListeners(DB_STATUS.SUCCESS, \"update\", EXECUTE_COUNT.ONE, fixedTableName !== \"untable\" ? fixedTableName : null, res.data);\n      } else {\n        _runListeners(DB_STATUS.ERROR, \"update\", EXECUTE_COUNT.ONE, fixedTableName !== \"untable\" ? fixedTableName : null);\n      }\n      return {\n        message: res.data,\n        success: res.success\n      };\n    } catch (error) {\n      console.warn(error);\n      _runListeners(DB_STATUS.ERROR, \"update\", EXECUTE_COUNT.ONE, fixedTableName !== \"untable\" ? fixedTableName : null);\n      return {\n        message: \"\",\n        success: false\n      };\n    }\n  };\n  const setImage = async (recordKey, columnName, image, tableName) => _setAttachment({\n    recordKey,\n    columnName,\n    tableName,\n    attachment: image,\n    type: \"image\"\n  });\n  const setVideo = async (recordKey, columnName, video, tableName) => _setAttachment({\n    recordKey,\n    columnName,\n    tableName,\n    attachment: video,\n    type: \"video\"\n  });\n  const setFile = async (recordKey, columnName, file, tableName) => _setAttachment({\n    recordKey,\n    columnName,\n    tableName,\n    attachment: file,\n    type: \"file\"\n  });\n  return {\n    db,\n    dbEventListener,\n    e: src().e,\n    setImage,\n    setFile,\n    setVideo\n  };\n}\nfunction t() {\n  const t = this[d],\n    e = t.target;\n  let o, r, n;\n  for (e.reverse(), o = 0, r = e.length; o < r; o++) if ((n = e[o]) && \"object\" == typeof n) {\n    const i = n[d];\n    i && (i.ownKey = o);\n  }\n  var s = [new O(h, [], void 0, void 0, this)];\n  return j(t, s), this;\n}\nfunction e(t) {\n  const e = this[d],\n    o = e.target;\n  let r, n, s;\n  for (o.sort(t), r = 0, n = o.length; r < n; r++) if ((s = o[r]) && \"object\" == typeof s) {\n    const i = s[d];\n    i && (i.ownKey = r);\n  }\n  return t = [new O(a, [], void 0, void 0, this)], j(e, t), this;\n}\nfunction o(t, n, s) {\n  const i = this[d],\n    h = i.target,\n    a = [],\n    e = h.length,\n    l = h.slice(0);\n  if (n = void 0 === n ? 0 : n < 0 ? Math.max(e + n, 0) : Math.min(n, e), s = void 0 === s ? e : s < 0 ? Math.max(e + s, 0) : Math.min(s, e), n < e && n < s) {\n    h.fill(t, n, s);\n    let r;\n    for (let t = n, e, o; t < s; t++) e = h[t], h[t] = m(e, t, i), t in l ? (o = l[t], o && \"object\" == typeof o && (r = o[d], r && (o = r.detach())), a.push(new O(v, [t], h[t], o, this))) : a.push(new O(w, [t], h[t], void 0, this));\n    j(i, a);\n  }\n  return this;\n}\nfunction r(n, t, e) {\n  const s = this[d],\n    i = s.target,\n    o = i.length;\n  n = n < 0 ? Math.max(o + n, 0) : n, t = void 0 === t ? 0 : t < 0 ? Math.max(o + t, 0) : Math.min(t, o), e = void 0 === e ? o : e < 0 ? Math.max(o + e, 0) : Math.min(e, o);\n  var h = Math.min(e - t, o - n);\n  if (n < o && n !== t && 0 < h) {\n    const a = i.slice(0),\n      l = [];\n    i.copyWithin(n, t, e);\n    for (let t = n, e, o, r; t < n + h; t++) e = i[t], e && \"object\" == typeof e && (e = m(e, t, s), i[t] = e), o = a[t], o && \"object\" == typeof o && (r = o[d], r && (o = r.detach())), \"object\" != typeof e && e === o || l.push(new O(v, [t], e, o, this));\n    j(s, l);\n  }\n  return this;\n}\nconst w = \"insert\",\n  v = \"update\",\n  g = \"delete\",\n  h = \"reverse\",\n  a = \"shuffle\",\n  d = Symbol.for(\"object-observer-meta-key-0\"),\n  n = {\n    async: 1\n  },\n  s = {\n    observe: {\n      value: function (e, t) {\n        if (\"function\" != typeof e) throw new Error(`observer MUST be a function, got '${e}'`);\n        const o = this[d].observers;\n        o.some(t => t[0] === e) ? console.warn(\"observer may be bound to an observable only once; will NOT rebind\") : o.push([e, (t => {\n          if (!t || \"object\" != typeof t) return null;\n          const e = {},\n            o = [];\n          for (var [r, n] of Object.entries(t)) if (\"path\" === r) {\n            if (\"string\" != typeof n || \"\" === n) throw new Error('\"path\" option, if/when provided, MUST be a non-empty string');\n            e[r] = n;\n          } else if (\"pathsOf\" === r) {\n            if (t.path) throw new Error('\"pathsOf\" option MAY NOT be specified together with \"path\" option');\n            if (\"string\" != typeof n) throw new Error('\"pathsOf\" option, if/when provided, MUST be a string (MAY be empty)');\n            e[r] = t.pathsOf.split(\".\").filter(Boolean);\n          } else if (\"pathsFrom\" === r) {\n            if (t.path || t.pathsOf) throw new Error('\"pathsFrom\" option MAY NOT be specified together with \"path\"/\"pathsOf\" option/s');\n            if (\"string\" != typeof n || \"\" === n) throw new Error('\"pathsFrom\" option, if/when provided, MUST be a non-empty string');\n            e[r] = n;\n          } else o.push(r);\n          if (o.length) throw new Error(`'${o.join(\", \")}' is/are not a valid observer option/s`);\n          return e;\n        })(t)]);\n      }\n    },\n    unobserve: {\n      value: function () {\n        const o = this[d].observers;\n        let r = o.length;\n        if (r) {\n          let e = arguments.length;\n          if (e) for (; e--;) {\n            let t = r;\n            for (; t--;) o[t][0] === arguments[e] && (o.splice(t, 1), r--);\n          } else o.splice(0);\n        }\n      }\n    }\n  },\n  i = (t, e) => {\n    const o = Object.defineProperties({}, s);\n    o[d] = e;\n    for (const r in t) o[r] = m(t[r], r, e);\n    return o;\n  },\n  l = (e, o) => {\n    var r = e.length;\n    const n = Object.defineProperties(new Array(r), s);\n    n[d] = o;\n    for (let t = 0; t < r; t++) n[t] = m(e[t], t, o);\n    return n;\n  },\n  f = (t, e) => (Object.defineProperties(t, s), t[d] = e, t),\n  c = (t, e) => {\n    if (!t) return e;\n    let o = e;\n    if (t.path) {\n      const r = t.path;\n      o = e.filter(t => t.path.join(\".\") === r);\n    } else if (t.pathsOf) {\n      const n = t.pathsOf,\n        s = n.join(\".\");\n      o = e.filter(t => (t.path.length === n.length + 1 || t.path.length === n.length && (t.type === h || t.type === a)) && t.path.join(\".\").startsWith(s));\n    } else if (t.pathsFrom) {\n      const i = t.pathsFrom;\n      o = e.filter(t => t.path.join(\".\").startsWith(i));\n    }\n    return o;\n  },\n  p = (e, o) => {\n    try {\n      e(o);\n    } catch (t) {\n      console.error(`failed to notify listener ${e} with ` + o, t);\n    }\n  },\n  u = function () {\n    var t,\n      e,\n      o = this.batches;\n    this.batches = null;\n    for ([t, e] of o) p(t, e);\n  },\n  j = (t, e) => {\n    let o = t,\n      r,\n      n,\n      s,\n      i,\n      h;\n    var a = e.length;\n    do {\n      for (r = o.observers, h = r.length; h--;) if ([n, s] = r[h], (i = c(s, e)).length) if (o.options.async) {\n        o.batches || (o.batches = [], queueMicrotask(u.bind(o)));\n        let t;\n        for (const l of o.batches) if (l[0] === n) {\n          t = l;\n          break;\n        }\n        t || (t = [n, []], o.batches.push(t)), Array.prototype.push.apply(t[1], i);\n      } else p(n, i);\n      if (o.parent) {\n        const f = new Array(a);\n        for (let t = 0; t < a; t++) f[t] = {\n          ...e[t]\n        }, f[t].path = [o.ownKey, ...f[t].path];\n        e = f, o = o.parent;\n      } else o = null;\n    } while (o);\n  },\n  m = (t, e, o) => t && \"object\" == typeof t ? Array.isArray(t) ? new A({\n    target: t,\n    ownKey: e,\n    parent: o\n  }).proxy : ArrayBuffer.isView(t) ? new K({\n    target: t,\n    ownKey: e,\n    parent: o\n  }).proxy : t instanceof Date ? t : new M({\n    target: t,\n    ownKey: e,\n    parent: o\n  }).proxy : t,\n  y = {\n    pop: function () {\n      const t = this[d],\n        e = t.target,\n        o = e.length - 1;\n      let r = e.pop();\n      if (r && \"object\" == typeof r) {\n        const s = r[d];\n        s && (r = s.detach());\n      }\n      var n = [new O(g, [o], void 0, r, this)];\n      return j(t, n), r;\n    },\n    push: function () {\n      const e = this[d],\n        o = e.target,\n        r = arguments.length,\n        n = new Array(r),\n        s = o.length;\n      for (let t = 0; t < r; t++) n[t] = m(arguments[t], s + t, e);\n      var t = Reflect.apply(o.push, o, n);\n      const i = [];\n      for (let t = s, e = o.length; t < e; t++) i[t - s] = new O(w, [t], o[t], void 0, this);\n      return j(e, i), t;\n    },\n    shift: function () {\n      const t = this[d],\n        e = t.target;\n      let o, r, n, s, i;\n      for (o = e.shift(), o && \"object\" == typeof o && (i = o[d], i && (o = i.detach())), r = 0, n = e.length; r < n; r++) (s = e[r]) && \"object\" == typeof s && (i = s[d], i && (i.ownKey = r));\n      var h = [new O(g, [0], void 0, o, this)];\n      return j(t, h), o;\n    },\n    unshift: function () {\n      const e = this[d],\n        r = e.target,\n        o = arguments.length,\n        n = new Array(o);\n      for (let t = 0; t < o; t++) n[t] = m(arguments[t], t, e);\n      var t = Reflect.apply(r.unshift, r, n);\n      for (let t = 0, e = r.length, o; t < e; t++) if ((o = r[t]) && \"object\" == typeof o) {\n        const h = o[d];\n        h && (h.ownKey = t);\n      }\n      var s = n.length;\n      const i = new Array(s);\n      for (let t = 0; t < s; t++) i[t] = new O(w, [t], r[t], void 0, this);\n      return j(e, i), t;\n    },\n    reverse: t,\n    sort: e,\n    fill: o,\n    copyWithin: r,\n    splice: function () {\n      const e = this[d],\n        o = e.target,\n        r = arguments.length,\n        n = new Array(r),\n        t = o.length;\n      for (let t = 0; t < r; t++) n[t] = m(arguments[t], t, e);\n      const s = 0 === r ? 0 : n[0] < 0 ? t + n[0] : n[0],\n        i = r < 2 ? t - s : n[1],\n        h = Math.max(r - 2, 0),\n        a = Reflect.apply(o.splice, o, n),\n        l = o.length;\n      let f;\n      for (let t = 0, e; t < l; t++) (e = o[t]) && \"object\" == typeof e && (f = e[d], f && (f.ownKey = t));\n      let c, p, u;\n      for (c = 0, p = a.length; c < p; c++) (u = a[c]) && \"object\" == typeof u && (f = u[d], f && (a[c] = f.detach()));\n      const y = [];\n      let b;\n      for (b = 0; b < i; b++) b < h ? y.push(new O(v, [s + b], o[s + b], a[b], this)) : y.push(new O(g, [s + b], void 0, a[b], this));\n      for (; b < h; b++) y.push(new O(w, [s + b], o[s + b], void 0, this));\n      return j(e, y), a;\n    }\n  },\n  b = {\n    reverse: t,\n    sort: e,\n    fill: o,\n    copyWithin: r,\n    set: function (t, e) {\n      const o = this[d],\n        r = o.target,\n        n = t.length,\n        s = r.slice(0);\n      e = e || 0, r.set(t, e);\n      const i = new Array(n);\n      for (let t = e; t < n + e; t++) i[t - e] = new O(v, [t], r[t], s[t], this);\n      j(o, i);\n    }\n  };\nclass O {\n  constructor(t, e, o, r, n) {\n    this.type = t, this.path = e, this.value = o, this.oldValue = r, this.object = n;\n  }\n}\nclass x {\n  constructor(t, e) {\n    var {\n      target: o,\n      parent: r,\n      ownKey: n\n    } = t;\n    r && void 0 !== n ? (this.parent = r, this.ownKey = n) : (this.parent = null, this.ownKey = null);\n    o = e(o, this);\n    this.observers = [], this.revocable = Proxy.revocable(o, this), this.proxy = this.revocable.proxy, this.target = o, this.options = this.processOptions(t.options);\n  }\n  processOptions(t) {\n    if (t) {\n      if (\"object\" != typeof t) throw new Error(`Observable options if/when provided, MAY only be an object, got '${t}'`);\n      const e = Object.keys(t).filter(t => !(t in n));\n      if (e.length) throw new Error(`'${e.join(\", \")}' is/are not a valid Observable option/s`);\n      return Object.assign({}, t);\n    }\n    return {};\n  }\n  detach() {\n    return this.parent = null, this.target;\n  }\n  set(t, e, o) {\n    let r = t[e];\n    if (o !== r) {\n      o = m(o, e, this);\n      if (t[e] = o, r && \"object\" == typeof r) {\n        const n = r[d];\n        n && (r = n.detach());\n      }\n      o = void 0 === r ? [new O(w, [e], o, void 0, this.proxy)] : [new O(v, [e], o, r, this.proxy)];\n      j(this, o);\n    }\n    return !0;\n  }\n  deleteProperty(t, e) {\n    let o = t[e];\n    if (delete t[e], o && \"object\" == typeof o) {\n      const r = o[d];\n      r && (o = r.detach());\n    }\n    e = [new O(g, [e], void 0, o, this.proxy)];\n    return j(this, e), !0;\n  }\n}\nclass M extends x {\n  constructor(t) {\n    super(t, i);\n  }\n}\nclass A extends x {\n  constructor(t) {\n    super(t, l);\n  }\n  get(t, e) {\n    return y[e] || t[e];\n  }\n}\nclass K extends x {\n  constructor(t) {\n    super(t, f);\n  }\n  get(t, e) {\n    return b[e] || t[e];\n  }\n}\nconst E = Object.freeze({\n  from: (t, e) => {\n    if (t && \"object\" == typeof t) {\n      if (t[d]) return t;\n      if (Array.isArray(t)) return new A({\n        target: t,\n        ownKey: null,\n        parent: null,\n        options: e\n      }).proxy;\n      if (ArrayBuffer.isView(t)) return new K({\n        target: t,\n        ownKey: null,\n        parent: null,\n        options: e\n      }).proxy;\n      if (t instanceof Date) throw new Error(t + \" found to be one of a non-observable types\");\n      return new M({\n        target: t,\n        ownKey: null,\n        parent: null,\n        options: e\n      }).proxy;\n    }\n    throw new Error(\"observable MAY ONLY be created from a non-null object\");\n  },\n  isObservable: t => !(!t || !t[d])\n});\nconst cache = require(\"./cache\");\nlet _isFrameInitialized = true;\nlet _frameConfiguration = {\n  offset: 0,\n  limit: 0\n};\nlet _effect = () => () => {};\nlet _signInCallback;\nconst _observedChangeStack = [];\nlet _recordIdMap = new WeakMap();\nlet _proxyRecordMap = new WeakMap();\nconst EasybaseProvider = _ref13 => {\n  let {\n    children,\n    ebconfig,\n    options\n  } = _ref13;\n  if (typeof ebconfig !== 'object' || ebconfig === null || ebconfig === undefined) {\n    console.error(\"No ebconfig object passed. do `import ebconfig from \\\"./ebconfig.js\\\"` and pass it to the Easybase provider\");\n    return React__default.createElement(Fragment, null, children);\n  } else if (!ebconfig.integration) {\n    console.error(\"Invalid ebconfig object passed. Download ebconfig.json from Easybase.io and try again.\");\n    return React__default.createElement(Fragment, null, children);\n  }\n  const [mounted, setMounted] = useState(false);\n  const [isSyncing, setIsSyncing] = useState(false);\n  const [userSignedIn, setUserSignedIn] = useState(false);\n  const [_frame, _setFrame] = useState([]);\n  const [_observableFrame, _setObservableFrame] = useState({\n    observe: () => {},\n    unobserve: () => {}\n  });\n  const _ranSignInCallback = useRef(false); // TODO: useRef vs useState({})\n\n  const g = useRef(gFactory({\n    ebconfig,\n    options\n  })).current;\n  const {\n    initAuth,\n    tokenPost,\n    tokenPostAttachment,\n    signUp,\n    setUserAttribute,\n    getUserAttributes,\n    resetUserPassword,\n    signIn,\n    signOut,\n    forgotPassword,\n    forgotPasswordConfirm,\n    userID\n  } = useRef(authFactory(g)).current;\n  const {\n    log\n  } = useRef(utilsFactory(g)).current;\n  const {\n    Query,\n    fullTableSize,\n    tableTypes\n  } = useRef(tableFactory(g)).current;\n  const {\n    db,\n    dbEventListener,\n    e,\n    setFile,\n    setImage,\n    setVideo\n  } = useRef(dbFactory(g)).current;\n  useEffect(() => {\n    const mount = async () => {\n      // eslint-disable-next-line dot-notation\n      const isIE = typeof document !== 'undefined' && !!document['documentMode'];\n      if (isIE) {\n        console.error(\"EASYBASE â€” easybase-react does not support Internet Explorer. Please use a different browser.\");\n      }\n      g.instance = typeof navigator !== 'undefined' && navigator.product === 'ReactNative' ? \"React Native\" : \"React\";\n      if (options != null && options.googleAnalyticsId) {\n        if (options.googleAnalyticsId.startsWith(\"G-\")) {\n          if (g.instance === \"React\") {\n            const {\n              GA4React\n            } = await import('./ga-4-react.esm-a020cb83.js');\n            const ga4ReactLoader = new GA4React(options.googleAnalyticsId);\n            try {\n              const ga4React = await ga4ReactLoader.initialize();\n              g.analyticsEvent = (eventTitle, params) => ga4React.gtag('event', eventTitle, params);\n              g.analyticsIdentify = hashedUserId => ga4React.gtag('config', options.googleAnalyticsId, {\n                user_id: hashedUserId\n              });\n              g.analyticsEnabled = true;\n              if (window.location.hash) {\n                // Using hash router - https://github.com/unrealmanu/ga-4-react/issues/15\n                window.onhashchange = () => {\n                  ga4React.pageview(window.location.hash);\n                };\n              }\n            } catch (error) {\n              log(\"Analytics initialization error: \", error);\n            }\n          } else if (g.instance === \"React Native\") {\n            if (options.googleAnalyticsSecret) {\n              const genUUID = () => {\n                // https://www.w3resource.com/javascript-exercises/javascript-math-exercise-23.php\n                let dt = new Date().getTime();\n                const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n                  const r = (dt + Math.random() * 16) % 16 | 0;\n                  dt = Math.floor(dt / 16);\n                  return (c === 'x' ? r : r & 0x3 | 0x8).toString(16);\n                });\n                return uuid;\n              };\n              let _userIdHash;\n              const _mockDeviceId = genUUID(); // Mocking a 'pageview'\n\n              fetch(`https://www.google-analytics.com/mp/collect?measurement_id=${options.googleAnalyticsId}&api_secret=${options.googleAnalyticsSecret}`, {\n                method: \"POST\",\n                body: JSON.stringify({\n                  client_id: _mockDeviceId,\n                  events: [{\n                    name: 'select_content'\n                  }]\n                })\n              });\n              g.analyticsEvent = (eventTitle, params) => fetch(`https://www.google-analytics.com/mp/collect?measurement_id=${options.googleAnalyticsId}&api_secret=${options.googleAnalyticsSecret}`, {\n                method: \"POST\",\n                body: JSON.stringify({\n                  client_id: _mockDeviceId,\n                  user_id: _userIdHash,\n                  events: [{\n                    name: eventTitle,\n                    params\n                  }]\n                })\n              });\n              g.analyticsIdentify = hashedUserId => {\n                _userIdHash = hashedUserId;\n              };\n              g.analyticsEnabled = true;\n            } else {\n              console.error(\"EASYBASE â€” React Native analytics requires the presence of 'googleAnalyticsSecret'. To create a new secret, navigate in the Google Analytics UI to: Admin > Data Streams > choose your stream > Measurement Protocol > Create\");\n            }\n          }\n        } else if (options.googleAnalyticsId.startsWith(\"UA-\")) {\n          console.error(\"EASYBASE â€” Detected Universal Analytics tag in googleAnalyticsId parameter. This version is not supported â€“Â please update to Google Analytics 4.\\nhttps://support.google.com/analytics/answer/9744165?hl=en\");\n        } else {\n          console.error(\"EASYBASE â€” Unknown googleAnalyticsId version parameter. Please use Google Analytics 4.\\nhttps://support.google.com/analytics/answer/9744165?hl=en\");\n        }\n      }\n      if (g.ebconfig.tt && g.ebconfig.integration.split(\"-\")[0].toUpperCase() !== \"PROJECT\") {\n        const t1 = Date.now();\n        log(\"mounting...\");\n        await initAuth();\n        const res = await tokenPost(POST_TYPES$1.VALID_TOKEN);\n        const elapsed = Date.now() - t1;\n        if (res.success) {\n          log(\"Valid auth initiation in \" + elapsed + \"ms\");\n          setMounted(true);\n        }\n      } else {\n        g.mounted = true; // Bypass initAuth()\n\n        const cookieName = g.ebconfig.integration.slice(-10);\n        const {\n          cacheToken,\n          cacheRefreshToken,\n          cacheSession\n        } = await cache.getCacheTokens(cookieName);\n        if (cacheRefreshToken) {\n          g.token = cacheToken;\n          g.refreshToken = cacheRefreshToken;\n          g.session = +cacheSession;\n          const fallbackMount = setTimeout(() => {\n            setMounted(true);\n          }, 2500);\n          const [refreshTokenRes, {\n            hash\n          }, {\n            fromUtf8\n          }] = await Promise.all([tokenPost(POST_TYPES$1.REQUEST_TOKEN, {\n            refreshToken: g.refreshToken,\n            token: g.token,\n            getUserID: true\n          }), import('./sha256-e0894fe4.js').then(function (n) {\n            return n.s;\n          }), import('./index-10b0f241.js')]);\n          if (refreshTokenRes.success) {\n            clearTimeout(fallbackMount);\n            g.token = refreshTokenRes.data.token;\n            g.userID = refreshTokenRes.data.userID;\n            if (g.analyticsEnabled && g.analyticsEventsToTrack.login) {\n              const hashOut = hash(fromUtf8(g.GA_USER_ID_SALT + refreshTokenRes.data.userID));\n              const hexHash = Array.prototype.map.call(hashOut, x => ('00' + x.toString(16)).slice(-2)).join('');\n              g.analyticsIdentify(hexHash);\n              g.analyticsEvent('login', {\n                method: \"Easybase\"\n              });\n            }\n            await cache.setCacheTokens(g, cookieName);\n            setUserSignedIn(true);\n          } else {\n            cache.clearCacheTokens(cookieName);\n          }\n        }\n        setMounted(true);\n      }\n    };\n    mount();\n  }, []);\n  const useFrameEffect = effect => {\n    _effect = effect;\n  };\n  useEffect(() => {\n    if (userSignedIn === true && _ranSignInCallback.current === false && _signInCallback !== undefined) {\n      _signInCallback();\n      _ranSignInCallback.current = true;\n    }\n  }, [userSignedIn]);\n  const onSignIn = callback => {\n    _signInCallback = callback;\n    if (userSignedIn === true && _ranSignInCallback.current === false && _signInCallback !== undefined) {\n      _signInCallback();\n      _ranSignInCallback.current = true;\n    }\n  };\n  useEffect(() => {\n    _observableFrame.observe(allChanges => {\n      allChanges.forEach(change => {\n        _observedChangeStack.push({\n          type: change.type,\n          path: change.path,\n          value: change.value,\n          _id: _recordIdMap.get(_frame[Number(change.path[0])]) // Not bringing change.object or change.oldValue\n        });\n\n        log(JSON.stringify({\n          type: change.type,\n          path: change.path,\n          value: change.value,\n          _id: _recordIdMap.get(_frame[Number(change.path[0])]) // Not bringing change.object or change.oldValue\n        }));\n      });\n    });\n\n    _proxyRecordMap = new WeakMap();\n    _frame.forEach((_, i) => _proxyRecordMap.set(_observableFrame[i], \"\" + i));\n    _effect(); // call useFrameEffect\n  }, [_observableFrame]);\n  useEffect(() => {\n    _observableFrame.unobserve();\n    _setObservableFrame(E.from(_frame));\n  }, [_frame]);\n  function Frame(index) {\n    if (typeof index === \"number\") {\n      return _observableFrame[index];\n    } else {\n      return _observableFrame;\n    }\n  }\n  const _recordIDExists = record => !!_recordIdMap.get(record) || !!_recordIdMap.get(_getRawRecordFromProxy(record) || {});\n  const _getRawRecordFromProxy = proxyRecord => _proxyRecordMap.get(proxyRecord) ? _frame[+_proxyRecordMap.get(proxyRecord)] : undefined;\n  const configureFrame = options => {\n    _frameConfiguration = _extends({}, _frameConfiguration);\n    if (options.limit !== undefined) _frameConfiguration.limit = options.limit;\n    if (options.offset !== undefined && options.offset >= 0) _frameConfiguration.offset = options.offset;\n    if (options.tableName !== undefined) _frameConfiguration.tableName = options.tableName;\n    _isFrameInitialized = false;\n    return {\n      message: \"Successfully configured frame. Run sync() for changes to be shown in frame\",\n      success: true\n    };\n  };\n  const currentConfiguration = () => _extends({}, _frameConfiguration);\n  const addRecord = async options => {\n    const defaultValues = {\n      insertAtEnd: false,\n      newRecord: {},\n      tableName: undefined\n    };\n    const fullOptions = _extends({}, defaultValues, options);\n    try {\n      const res = await tokenPost(POST_TYPES$1.SYNC_INSERT, fullOptions);\n      return {\n        message: res.data,\n        success: res.success\n      };\n    } catch (err) {\n      console.error(\"Easybase Error: addRecord failed \", err);\n      return {\n        message: \"Easybase Error: addRecord failed \" + err,\n        success: false,\n        errorCode: err\n      };\n    }\n  };\n  const deleteRecord = async options => {\n    const _frameRecord = _getRawRecordFromProxy(options.record) || _frame.find(ele => fastDeepEqual(ele, options.record));\n    if (_frameRecord && _recordIdMap.get(_frameRecord)) {\n      const res = await tokenPost(POST_TYPES$1.SYNC_DELETE, {\n        _id: _recordIdMap.get(_frameRecord),\n        tableName: options.tableName\n      });\n      return {\n        success: res.success,\n        message: res.data\n      };\n    } else {\n      try {\n        const res = await tokenPost(POST_TYPES$1.SYNC_DELETE, {\n          record: options.record,\n          tableName: options.tableName\n        });\n        return {\n          success: res.success,\n          message: res.data\n        };\n      } catch (error) {\n        console.error(\"Easybase Error: deleteRecord failed \", error);\n        return {\n          success: false,\n          message: \"Easybase Error: deleteRecord failed \" + error,\n          errorCode: error.errorCode || undefined\n        };\n      }\n    }\n  }; // Only allow the deletion of one element at a time\n  // First handle shifting of the array size. Then iterate\n\n  const sync = async () => {\n    const _realignFrames = newData => {\n      let isNewDataTheSame = true;\n      if (newData.length !== _frame.length) {\n        isNewDataTheSame = false;\n      } else {\n        for (let i = 0; i < newData.length; i++) {\n          const newDataNoId = _extends({}, newData[i]);\n          delete newDataNoId._id;\n          if (!fastDeepEqual(newDataNoId, _frame[i])) {\n            isNewDataTheSame = false;\n            break;\n          }\n        }\n      }\n      if (!isNewDataTheSame) {\n        _recordIdMap = new WeakMap();\n        _frame.length = newData.length;\n        newData.forEach((currNewEle, i) => {\n          _frame[i] = currNewEle;\n          _recordIdMap.set(currNewEle, currNewEle._id);\n          delete currNewEle._id;\n        });\n        _setFrame([..._frame]);\n      }\n    };\n    if (isSyncing) {\n      return {\n        success: false,\n        message: \"Easybase Error: the provider is currently syncing, use 'await sync()' before calling sync() again\"\n      };\n    }\n    setIsSyncing(true);\n    if (_isFrameInitialized) {\n      if (_observedChangeStack.length > 0) {\n        log(\"Stack change: \", _observedChangeStack);\n        const res = await tokenPost(POST_TYPES$1.SYNC_STACK, _extends({\n          stack: _observedChangeStack\n        }, _frameConfiguration));\n        if (res.success) {\n          _observedChangeStack.length = 0;\n        }\n      }\n    }\n    try {\n      const res = await tokenPost(POST_TYPES$1.GET_FRAME, _frameConfiguration); // Check if the array received from db is the same as frame\n      // If not, update it and send useFrameEffect\n\n      if (res.success === false) {\n        console.error(res.data);\n        setIsSyncing(false);\n        return {\n          success: false,\n          message: \"\" + res.data\n        };\n      } else {\n        _isFrameInitialized = true;\n        _realignFrames(res.data);\n        setIsSyncing(false);\n        return {\n          message: 'Success. Call frame for data',\n          success: true\n        };\n      }\n    } catch (error) {\n      console.error(\"Easybase Error: get failed \", error);\n      setIsSyncing(false);\n      return {\n        success: false,\n        message: \"Easybase Error: get failed \" + error,\n        errorCode: error.errorCode || undefined\n      };\n    }\n  };\n  const updateRecordImage = async options => {\n    const res = await _updateRecordAttachment(options, \"image\");\n    return res;\n  };\n  const updateRecordVideo = async options => {\n    const res = await _updateRecordAttachment(options, \"video\");\n    return res;\n  };\n  const updateRecordFile = async options => {\n    const res = await _updateRecordAttachment(options, \"file\");\n    return res;\n  };\n  const _updateRecordAttachment = async (options, type) => {\n    const _frameRecord = _getRawRecordFromProxy(options.record) || _frame.find(ele => fastDeepEqual(ele, options.record));\n    if (_frameRecord === undefined || !_recordIDExists(_frameRecord)) {\n      log(\"Attempting to add attachment to a new record that has not been synced. Please sync() before trying to add attachment.\");\n      return {\n        success: false,\n        message: \"Attempting to add attachment to a new record that has not been synced. Please sync() before trying to add attachment.\"\n      };\n    }\n    const ext = options.attachment.name.split(\".\").pop().toLowerCase();\n    log(ext);\n    if (type === \"image\" && !imageExtensions$1.includes(ext)) {\n      return {\n        success: false,\n        message: \"Image files must have a proper image extension in the file name\"\n      };\n    }\n    if (type === \"video\" && !videoExtensions$1.includes(ext)) {\n      return {\n        success: false,\n        message: \"Video files must have a proper video extension in the file name\"\n      };\n    }\n    function isFileFromURI(f) {\n      return f.uri !== undefined;\n    }\n    const formData = new FormData();\n    if (isFileFromURI(options.attachment)) {\n      formData.append(\"file\", options.attachment);\n      formData.append(\"name\", options.attachment.name);\n    } else {\n      formData.append(\"file\", options.attachment);\n      formData.append(\"name\", options.attachment.name);\n    }\n    const customHeaders = {\n      'Eb-upload-type': type,\n      'Eb-column-name': options.columnName,\n      'Eb-record-id': _recordIdMap.get(_frameRecord),\n      'Eb-table-name': options.tableName\n    };\n    const res = await tokenPostAttachment(formData, customHeaders);\n    await sync();\n    return {\n      message: res.data,\n      success: res.success\n    };\n  };\n  const isUserSignedIn = () => userSignedIn;\n  g.newTokenCallback = () => {\n    const cookieName = g.ebconfig.integration.slice(-10);\n    if (!g.token) {\n      // User signed out\n      cache.clearCacheTokens(cookieName).then(_ => {\n        setUserSignedIn(false);\n        _ranSignInCallback.current = false;\n      });\n    } else {\n      // User signed in or refreshed token\n      cache.setCacheTokens(g, cookieName).then(_ => {\n        setUserSignedIn(true);\n      });\n    }\n  };\n  const useReturn = (dbInstance, deps) => {\n    // eslint-disable-next-line no-extra-parens\n    const [unsubscribe, setUnsubscribe] = useState(() => () => {});\n    const [frame, setFrame] = useState([]);\n    const [error, setError] = useState(null);\n    const [loading, setLoading] = useState(false);\n    const [dead, setDead] = useState(false);\n    const doFetch = async () => {\n      setLoading(true);\n      try {\n        const res = await dbInstance().all();\n        if (Array.isArray(res)) {\n          setFrame(res);\n        }\n      } catch (error) {\n        setError(error);\n      }\n      setLoading(false);\n    };\n    useEffect(() => {\n      let isAlive = true;\n      if (!dead) {\n        const _instanceTableName = dbInstance()._tableName;\n        unsubscribe(\"true\");\n        const _listener = dbEventListener((status, queryType, executeCount, tableName, returned) => {\n          if (!isAlive) {\n            return;\n          }\n          log(_instanceTableName, status, queryType, executeCount, tableName);\n          if (tableName === null && _instanceTableName === \"untable\" || tableName === _instanceTableName) {\n            if (status === DB_STATUS$1.SUCCESS && queryType !== \"select\") {\n              if (typeof returned === \"number\" && returned > 0) {\n                doFetch();\n              } else if (Array.isArray(returned) && typeof returned[0] === \"number\" && returned[0] > 0) {\n                doFetch();\n              }\n            }\n          }\n        });\n        setUnsubscribe(() => stayAlive => {\n          _listener();\n          stayAlive !== \"true\" && setDead(true);\n        });\n        doFetch();\n      }\n      return () => {\n        isAlive = false;\n      };\n    }, deps || []);\n    return {\n      frame,\n      unsubscribe,\n      error,\n      manualFetch: doFetch,\n      loading\n    };\n  };\n  const c = {\n    configureFrame,\n    addRecord,\n    deleteRecord,\n    sync,\n    updateRecordImage,\n    updateRecordVideo,\n    updateRecordFile,\n    Frame,\n    useFrameEffect,\n    fullTableSize,\n    tableTypes,\n    currentConfiguration,\n    Query,\n    signIn,\n    signOut,\n    isUserSignedIn,\n    signUp,\n    setUserAttribute,\n    getUserAttributes,\n    resetUserPassword,\n    onSignIn,\n    db,\n    dbEventListener,\n    e,\n    setFile,\n    setImage,\n    setVideo,\n    useReturn,\n    forgotPassword,\n    forgotPasswordConfirm,\n    userID\n  };\n  return React__default.createElement(EasybaseContext.Provider, {\n    value: c\n  }, mounted && children);\n};\nconst useEasybase = () => {\n  const easybase = useContext(EasybaseContext);\n  return easybase;\n};\nconst Auth = lazy(() => import('./Auth-25393280.js').then(function (n) {\n  return n.A;\n}));\nfunction index(props) {\n  return React__default.createElement(Suspense, {\n    fallback: React__default.createElement(Fragment, null)\n  }, React__default.createElement(Auth, Object.assign({}, props)));\n}\n/**\r\n * Note that this wrapper component exists to force code-splitting\r\n */\n\nexport { EasybaseProvider as E, _extends as _, commonjsGlobal as a, createCommonjsModule as c, getDefaultExportFromCjs as g, index as i, useEasybase as u };","map":{"version":3,"names":["Frame","index","c$1","configureFrame","_","addRecord","deleteRecord","sync","updateRecordImage","updateRecordVideo","updateRecordFile","useFrameEffect","fullTableSize","tableTypes","currentConfiguration","Query","getUserAttributes","isUserSignedIn","setUserAttribute","_2","resetUserPassword","signIn","signOut","signUp","_3","onSignIn","db","dbEventListener","useReturn","e","setFile","_4","setImage","setVideo","forgotPassword","forgotPasswordConfirm","userID","undefined","EasybaseContext","createContext","fastDeepEqual","equal","a","b","constructor","length","i","keys","Array","isArray","RegExp","source","flags","valueOf","Object","prototype","toString","hasOwnProperty","call","key","POST_TYPES$1","POST_TYPES","DB_STATUS$1","DB_STATUS","EXECUTE_COUNT$1","EXECUTE_COUNT","GlobalNamespace","_g","gFactory","_ref","ebconfig","options","optionsObj","gaTrackingObj","googleAnalyticsEventTracking","defaultG","GA_USER_ID_SALT","analyticsEventsToTrack","login","sign_up","forgot_password","forgot_password_confirm","reset_user_password","utilsFactory","globals","g","generateBareUrl","type","integrationID","generateAuthBody","stamp","Date","now","token","token_time","session","log","logging","_len","arguments","params","_key","console","global","self","commonjsGlobal","__self__","F","fetch","DOMException","exports","support","searchParams","iterable","Symbol","blob","Blob","formData","arrayBuffer","isDataView","obj","DataView","isPrototypeOf","viewClasses","isArrayBufferView","ArrayBuffer","isView","indexOf","normalizeName","name","String","test","TypeError","toLowerCase","normalizeValue","value","iteratorFor","items","iterator","next","shift","done","Headers","headers","map","forEach","append","header","getOwnPropertyNames","oldValue","get","has","set","callback","thisArg","push","values","entries","consumed","body","bodyUsed","Promise","reject","fileReaderReady","reader","resolve","onload","result","onerror","error","readBlobAsArrayBuffer","FileReader","promise","readAsArrayBuffer","readBlobAsText","readAsText","readArrayBufferAsText","buf","view","Uint8Array","chars","fromCharCode","join","bufferClone","slice","byteLength","buffer","Body","_initBody","_bodyInit","_bodyText","_bodyBlob","FormData","_bodyFormData","URLSearchParams","_bodyArrayBuffer","rejected","Error","then","text","decode","json","JSON","parse","methods","normalizeMethod","method","upcased","toUpperCase","Request","input","url","credentials","mode","signal","referrer","clone","form","trim","split","bytes","replace","decodeURIComponent","parseHeaders","rawHeaders","preProcessedHeaders","line","parts","Response","bodyInit","status","ok","statusText","response","redirectStatuses","redirect","RangeError","location","err","message","stack","create","init","request","aborted","xhr","XMLHttpRequest","abortXhr","abort","getAllResponseHeaders","responseURL","responseText","ontimeout","onabort","open","withCredentials","responseType","setRequestHeader","addEventListener","onreadystatechange","readyState","removeEventListener","send","polyfill","defineProperty","ponyfill","ctx","default","module","authFactory","_clearTokens","refreshToken","newTokenCallback","attrsRes","tokenPost","USER_ATTRIBUTES","analyticsEnabled","get_user_attributes","analyticsEvent","data","setAttrsRes","SET_ATTRIBUTE","set_user_attribute","success","stringify","errorCode","username","emailTemplate","FORGOT_PASSWORD_SEND","code","newPassword","FORGOT_PASSWORD_CONFIRM","newUserID","password","userAttributes","signUpRes","SIGN_UP","t1","Math","floor","random","integrationType","integration","res","HANDSHAKE","version","instance","resData","mounted","validTokenRes","hash","fromUtf8","all","VALID_TOKEN","n","s","elapsed","hashOut","hexHash","x","analyticsIdentify","ErrorCode","currentPassword","RESET_PASSWORD","initAuth","tt","postType","_auth","req_res","REQUEST_TOKEN","tokenPostAttachment","customHeaders","regularAuthbody","attachmentAuth","UPLOAD_ATTACHMENT","tableFactory","defaultOptions","queryName","fullOptions","GET_QUERY","query","tableName","TABLE_SIZE","full_table_size","COLUMN_TYPES","table_types","createNewContext$1","defaultContext","parameterize","escape","mapKey","build","inherit","unparameterized","whr","target","separator","sql","ret","frm","grp","hav","setop","ord","with","context","createQueryBuilder","_ref2","config","queries","properties","newContext","reducers","createReducers","updateContext","applyReducers","extend","args","arr","builder","chain","createChain$1","executeProperties","one","oneCallback","userAssociatedRecordsOnly","allCallback","_tableName","_methodProperties","methodProperties$1","from","defineProperties","builderProperties$1","fn","_len2","_key2","prev","setPrototypeOf","express","id","_ref3","_build","inheritedContext","_ref4","getter","_len3","_key3","builderSq","isTaggedTemplate$5","_ref5","strings","raw","buildTaggedTemplate$5","buildTaggedTemplate","_ref6","txt","tagged_template","isTaggedTemplate","isTaggedTemplate$4","buildTaggedTemplate$4","isObject$6","arg","buildCall$8","callbackfn","mapJoin$8","mapJoin","mapJoinWrap$1","mapJoinWrap","close","objectMapJoin$5","objectMapJoin","object","build_utils","isObject","buildCall","memoize$1","cache","normalKey$3","given_key","change_case","memoize","normalKey","libUtil","isTaggedTemplate$3","createExpressionCompiler","expressionTable","callsCompiler","createCallsCompiler","current","calls","buildCalls","expression","expressions","last","pushCall","array","tag","exp","minArgs","maxArgs","numArgs","compile","normalKey$2","aggregator","op","columnName","builderExpression","_ref7","createNewContext","compile$1","createChain","builderProperties","methodProperties","max","min","avg","count","sum","_ref8","_len4","_key4","_ref9","normalKey$1","createSqorn","_ref10","dialect","build$1","sq","libCore","methods$1","withRecursive","recursive","where","return","distinct","groupBy","having","union","unionAll","intersect","intersectAll","except","exceptAll","orderBy","limit","offset","leftJoin","rightJoin","fullJoin","crossJoin","naturalJoin","naturalLeftJoin","naturalRightJoin","naturalFullJoin","on","using","delete","insert","methods_1","mapJoin$7","values_array","uniqueKeys","columns","j","value$1","isObject$5","buildCall$7","mapJoin$6","objectMapJoin$4","_with","calls$3","buildArg$4","buildArg","buildObject$5","buildProperty$4","buildProperty","isObject$4","buildCall$6","mapJoin$5","objectMapJoin$3","buildArg$3","buildObject$4","buildProperty$3","expressions$1","select$2","buildDistinct","isTaggedTemplate$2","buildTaggedTemplate$3","isObject$3","mapJoin$4","objectMapJoin$2","buildCall$5","buildArg$2","buildObject$3","valuesList","buildProperty$2","conditions","isObject$2","buildCall$4","mapJoin$3","objectMapJoin$1","from_items","start","end","item","fromItem","using$1","usingArg","fromArg","buildObject$2","buildProperty$1","from$2","where$2","isObject$1","buildCall$3","mapJoin$2","group$2","calls$2","buildArg$1","buildArrayArg","buildObject$1","buildCubeOrRollupArg","buildCubeOrRollupArrayArg","buildObject","having$2","setop$2","first","buildCall$2","mapJoin$1","order$2","calls$1","by","sort","nulls","isTaggedTemplate$1","buildTaggedTemplate$2","limit_offset","limit$2","offset$2","_delete","returning$2","buildTaggedTemplate$1","insert$1","table","buildCall$1","buildValuesArray","update$2","set$2","clauses$1","wth","select","group","order","del","returning","update","wth$1","select$1","from$1","where$1","group$1","having$1","setop$1","order$1","limit$1","offset$1","del$1","returning$1","update$1","set$1","query$2","_len5","clauses","_key5","clause","str","userType","queries$2","query_1$1","common$1","fromItems","limitOffset","valuesArray","query$1","queries$1","libSq","common","postgresMethods","distinctOn","updateFrom","query_1","rollup","_len6","_key6","cube","_len7","_key7","groupingSets","_len8","_key8","dateToYYYYMMDD","d","getFullYear","getMonth","getDate","unaryPre$1","unaryPost$1","unaryFunction$1","binary$1","dateBinary$1","inDate","ternary$1","ternary","op1","op2","nary$1","Number","MAX_SAFE_INTEGER","naryFunction$1","oneValue$1","compositeValue$1","buildValuesList","membership$1","_ref11","arg1","arg2","quantifiedComparison$1","util","unaryFunction","unaryPre","unaryPost","binary","nary","naryFunction","oneValue","compositeValue","membership","quantifiedComparison","dateBinary","row","unknown","boolean","number","string","and","or","not","isTrue","isNotTrue","isFalse","isNotFalse","isUnknown","isNotUnknown","comparison","eq","neq","lt","gt","lte","gte","between","isDistinctFrom","isNotDistinctFrom","isNull","isNotNull","in","notIn","eqAny","neqAny","ltAny","gtAny","lteAny","gteAny","eqAll","neqAll","ltAll","gtAll","lteAll","gteAll","dateComparison","dateLt","dateGt","dateLte","dateGte","math","add","sub","mul","div","mod","sqrt","cbrt","fact","abs","like","notLike","unnest","libExpression","parameterize$1","escape$1","escapeLiteral","hasBackslash","escaped","c","parameterize_1","dialectPostgres","a$1","src","dbFactory","_listenerIndex","_listeners","_runListeners","cb","currKey","trx","PENDING","ALL","EASY_QB","db_all","SUCCESS","ERROR","warn","ONE","db_one","_setAttachment","_ref12","recordKey","attachment","ext","pop","fixedTableName","imageExtensions","includes","videoExtensions","image","video","file","t","o","r","reverse","ownKey","O","h","l","fill","m","detach","v","w","copyWithin","for","async","observe","observers","some","path","pathsOf","filter","Boolean","unobserve","splice","f","startsWith","pathsFrom","p","u","batches","queueMicrotask","bind","apply","parent","A","proxy","K","M","y","Reflect","unshift","revocable","Proxy","processOptions","assign","deleteProperty","E","freeze","isObservable","require","_isFrameInitialized","_frameConfiguration","_effect","_signInCallback","_observedChangeStack","_recordIdMap","WeakMap","_proxyRecordMap","EasybaseProvider","_ref13","children","React__default","createElement","Fragment","setMounted","useState","isSyncing","setIsSyncing","userSignedIn","setUserSignedIn","_frame","_setFrame","_observableFrame","_setObservableFrame","_ranSignInCallback","useRef","useEffect","mount","isIE","document","navigator","product","googleAnalyticsId","GA4React","ga4ReactLoader","ga4React","initialize","eventTitle","gtag","hashedUserId","user_id","window","onhashchange","pageview","googleAnalyticsSecret","genUUID","dt","getTime","uuid","_userIdHash","_mockDeviceId","client_id","events","cookieName","cacheToken","cacheRefreshToken","cacheSession","getCacheTokens","fallbackMount","setTimeout","refreshTokenRes","getUserID","clearTimeout","setCacheTokens","clearCacheTokens","effect","allChanges","change","_id","_recordIDExists","record","_getRawRecordFromProxy","proxyRecord","_extends","defaultValues","insertAtEnd","newRecord","SYNC_INSERT","_frameRecord","find","ele","SYNC_DELETE","_realignFrames","newData","isNewDataTheSame","newDataNoId","currNewEle","SYNC_STACK","GET_FRAME","_updateRecordAttachment","imageExtensions$1","videoExtensions$1","isFileFromURI","uri","dbInstance","deps","unsubscribe","setUnsubscribe","frame","setFrame","setError","loading","setLoading","dead","setDead","doFetch","isAlive","_instanceTableName","_listener","queryType","executeCount","returned","stayAlive","manualFetch","Provider","useEasybase","easybase","useContext","Auth","lazy","props","Suspense","fallback"],"sources":["I:\\React\\01-starting-setup\\node_modules\\easybase-react\\src\\EasybaseContext.tsx","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\fast-deep-equal\\index.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\src\\types\\types.tsx","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easybasejs\\src\\EasybaseProvider\\g.ts","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easybasejs\\src\\EasybaseProvider\\utils.ts","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easybasejs\\src\\EasybaseProvider\\types.ts","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\cross-fetch\\dist\\browser-ponyfill.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easybasejs\\src\\EasybaseProvider\\auth.ts","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easybasejs\\src\\EasybaseProvider\\table.ts","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\builder-sq\\context.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\builder-sq\\index.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-util\\tagged_template.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-util\\build_utils.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-util\\change_case.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-util\\index.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\builder-expression\\compile.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\builder-expression\\index.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-core\\index.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-sq\\methods.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-sq\\common\\values_array.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-sq\\clauses\\with.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-sq\\common\\expressions.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-sq\\clauses\\select.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-sq\\common\\conditions.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-sq\\common\\from_items.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-sq\\clauses\\from.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-sq\\clauses\\where.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-sq\\clauses\\group.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-sq\\clauses\\having.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-sq\\clauses\\setop.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-sq\\clauses\\order.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-sq\\common\\limit_offset.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-sq\\clauses\\limit.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-sq\\clauses\\offset.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-sq\\clauses\\delete.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-sq\\clauses\\returning.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-sq\\clauses\\insert.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-sq\\clauses\\update.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-sq\\clauses\\set.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-sq\\clauses\\index.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-sq\\query.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-sq\\common\\index.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-sq\\index.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\dialect-postgres\\query.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-expression\\util.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\lib-expression\\index.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\dialect-postgres\\expression.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\dialect-postgres\\parameterize.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\dialect-postgres\\index.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easyqb\\src\\index.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\easybasejs\\src\\EasybaseProvider\\db.ts","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\node_modules\\object-observer\\dist\\object-observer.min.js","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\src\\EasybaseProvider.tsx","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\src\\useEasybase.tsx","I:\\React\\01-starting-setup\\node_modules\\easybase-react\\src\\ui\\Auth\\index.tsx"],"sourcesContent":["import { createContext } from \"react\";\nimport {\n    ContextValue,\n    UseReturnValue,\n    ConfigureFrameOptions,\n    StatusResponse,\n    AddRecordOptions,\n    UpdateRecordAttachmentOptions,\n    FrameConfiguration,\n    QueryOptions,\n    EmailTemplate,\n    FileFromURI\n} from \"./types/types\";\nimport { SQW } from \"easyqb/types/sq\";\nimport { NewExpression } from \"easyqb/types/expression\";\n\nfunction Frame(): Record<string, any>[];\nfunction Frame(index: number): Record<string, any>;\nfunction Frame(index?: number): Record<string, any>[] | Record<string, any> {\n    return [];\n}\n\nconst c: ContextValue = {\n    configureFrame: (_: ConfigureFrameOptions) => ({}) as StatusResponse,\n    addRecord: async (_: AddRecordOptions) => ({}) as StatusResponse,\n    deleteRecord: async (_: Record<string, any>) => ({}) as StatusResponse,\n    sync: async () => ({}) as StatusResponse,\n    updateRecordImage: async (_: UpdateRecordAttachmentOptions) => ({}) as StatusResponse,\n    updateRecordVideo: async (_: UpdateRecordAttachmentOptions) => ({}) as StatusResponse,\n    updateRecordFile: async (_: UpdateRecordAttachmentOptions) => ({}) as StatusResponse,\n    Frame,\n    useFrameEffect: (_: React.EffectCallback) => {},\n    fullTableSize: async () => 0,\n    tableTypes: async() => ({}) as Record<string, any>,\n    currentConfiguration: () => ({}) as FrameConfiguration,\n    Query: async (_: QueryOptions) => ([]),\n    getUserAttributes: async() => ({}) as Record<string, string>,\n    isUserSignedIn: () => false,\n    setUserAttribute: async (_: string, _2: string) => ({}) as StatusResponse,\n    resetUserPassword: async (_: string, _2: string) => ({}) as StatusResponse,\n    signIn: async (_: string, _2: string) => ({}) as StatusResponse,\n    signOut: () => {},\n    signUp: async (_: string, _2: string, _3?: Record<string, string>) => ({}) as StatusResponse,\n    onSignIn: (_: () => void) => {},\n    db: (_?: string) => ({}) as SQW,\n    dbEventListener: (_: () => void) => () => {},\n    useReturn: <T, >(_: () => SQW) => ({}) as UseReturnValue<T>,\n    e: ({}) as NewExpression,\n    setFile: async (_: string, _2: string, _3: File | FileFromURI, _4?: string) => ({}) as StatusResponse,\n    setImage: async (_: string, _2: string, _3: File | FileFromURI, _4?: string) => ({}) as StatusResponse,\n    setVideo: async (_: string, _2: string, _3: File | FileFromURI, _4?: string) => ({}) as StatusResponse,\n    forgotPassword: async (_: string, _2?: EmailTemplate) => ({}) as StatusResponse,\n    forgotPasswordConfirm: async (_: string, _2: string, _3: string) => ({}) as StatusResponse,\n    userID: () => undefined\n}\n\nexport default createContext(c);\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","/* eslint-disable camelcase */\nimport React from \"react\";\nimport { SQW } from \"easyqb/types/sq\";\nimport { NewExpression } from \"easyqb/types/expression\";\n\nexport interface GoogleAnalyticsEvents {\n    login?: boolean;\n    sign_up?: boolean;\n    forgot_password?: boolean;\n    forgot_password_confirm?: boolean;\n    reset_user_password?: boolean;\n    get_user_attributes?: boolean;\n    set_user_attribute?: boolean;\n    query?: boolean;\n    full_table_size?: boolean;\n    table_types?: boolean;\n    db_one?: boolean;\n    db_all?: boolean;\n}\n\nexport interface EasybaseProviderPropsOptions {\n    /** Custom authentication string. Can be set in integration menu. If it is set, it is required to access integration. This acts as an extra layer of security and extensibility. */\n    authentication?: string;\n    /** Log Easybase react status and events to console. */\n    logging?: boolean;\n    /** Google Analytics 4 Measurement ID for activity reporting */\n    googleAnalyticsId?: string;\n    /** **Only Required for React Native** â€“ Google Analytics 4 Measurement Protocol Secret ID for activity reporting. To create a new secret, navigate in the Google Analytics UI to: Admin > Data Streams > choose your stream > Measurement Protocol > Create */\n    googleAnalyticsSecret?: string;\n    /**\n     * Specify which extra events are tracked in Google Analytics\n     * \n     * **default**:\n     *  * Page Mount\n     *  * login\n     *  * sign_up\n     *  * forgot_password\n     *  * forgot_password_confirm\n     *  * reset_user_password\n     *  \n    */\n    googleAnalyticsEventTracking?: GoogleAnalyticsEvents;\n}\n\nexport interface EasybaseProviderProps {\n    /** React elements */\n    children: JSX.Element[] | JSX.Element;\n    /** Easybase ebconfig object. Can be downloaded in the integration drawer next to 'React Token'. This is automatically generated.  */\n    ebconfig: Ebconfig;\n    /** Optional configuration parameters. */\n    options?: EasybaseProviderPropsOptions\n}\n\nexport interface UseReturnValue<T> {\n    /** Stateful frame that responds to local calls to `.update`, `.delete`, and `.set` */\n    frame: T[];\n    /** Call this function to unsubscribe to future events */\n    unsubscribe(): void;\n    /** Errors that occur in the useReturn workflow */\n    error: any;\n    /**\n     * @async\n     * Manually refresh the data in `frame`\n     */\n    manualFetch(): Promise<void>;\n    /** Is the frame awaiting a response from server to be set to */\n    loading: boolean;\n}\n\nexport interface ContextValue {\n    /**\n     * Pass a callback function to run when a user signs in. This callback function will run after either successfully\n     * signing in with the signIn() function OR after a user is automatically signed in via valid tokens saved to the browser from a \n     * previous instance. This is best placed with useEffect(() => {}, []);\n     * @param callback callback function to run on sign in event\n     */\n    onSignIn(callback: () => void): void;\n    /**\n     * Check if a user is currently signed in.\n     * @return {boolean} Is a user signed in.\n     */\n    isUserSignedIn(): boolean;\n    /**\n     * Sign out the current user and invalidate their cached tokens.\n     */\n    signOut(): void;\n    /**\n     * Retrieve the currently signed in users attribute object.\n     * @async\n     * @return {Promise<Record<string, string>>} Promise<Record<string, string>>\n     */\n    getUserAttributes(): Promise<Record<string, string>>;\n    /**\n     * Set a single attribute of the currently signed in user. Can also be updated visually in the Easybase 'Users' tab.\n     * @async\n     * @param key Object key. Can be a new key or existing key.\n     * @param value attribute value.\n     * @return {Promise<StatusResponse>} Promise<StatusResponse>\n     */\n    setUserAttribute(key: string, value: string): Promise<StatusResponse>;\n    /**\n     * Reset the currently signed-in user's password to a new string.\n     * @async\n     * @param {string} currentPassword Signed-in user's current password\n     * @param {string} newPassword New password for user's account\n     * @return {Promise<StatusResponse>} Promise<StatusResponse>\n     */\n    resetUserPassword(currentPassword: string, newPassword: string): Promise<StatusResponse>;\n    /**\n     * Sign in a user that already exists for a project. This will save authentication tokens to a user's browser so that \n     * they will be automatically authenticated when they return to the application. These authentication tokens will become invalid\n     * when a user signs out or after 24 hours.\n     * @async\n     * @param userID unique identifier for new user. Usually an email or phone number.\n     * @param password user password.\n     * @return {Promise<StatusResponse>} Promise<StatusResponse>\n     */\n    signIn(userID: string, password: string): Promise<StatusResponse>;\n    /**\n     * Create a new user for your project. You must still call signIn() after signing up.\n     * @async\n     * @param newUserID unique identifier for new user. Usually an email or phone number.\n     * @param password user password. Must be at least 8 characters long.\n     * @param userAttributes Optional object to store user attributes. Can also be edited visually in the Easybase 'Users' tab.\n     * @return {Promise<StatusResponse>} Promise<StatusResponse>\n     */\n    signUp(newUserID: string, password: string, userAttributes?: Record<string, string>): Promise<StatusResponse>;\n    /**\n     * **DEPRECATED**: Use `db` instead - https://easybase.github.io/EasyQB/\n     * \n     * This hook runs when the Frame changes. This can be triggered by calling sync().\n     * @param {React.EffectCallback} effect Callback function that executes when Frame changes.\n     */\n    useFrameEffect(effect: React.EffectCallback): void;\n    /**\n     * **DEPRECATED**: Use `db` instead - https://easybase.github.io/EasyQB/\n     * @deprecated Use `db` instead - https://easybase.github.io/EasyQB/\n     * @param {ConfigureFrameOptions} options ConfigureFrameOptions\n     * @return {StatusResponse} StatusResponse\n     */\n    configureFrame(options: ConfigureFrameOptions): StatusResponse;\n    /**\n     * **DEPRECATED**: Use `db().insert()` instead - https://easybase.github.io/EasyQB/docs/insert_queries.html\n     * @deprecated Use `db().insert()` instead - https://easybase.github.io/EasyQB/docs/insert_queries.html\n     * @async\n     * @param {AddRecordOptions} options AddRecordOptions\n     * @return {Promise<StatusResponse>} Promise<StatusResponse>\n     */\n    addRecord(options: AddRecordOptions): Promise<StatusResponse>;\n    /**\n     * **DEPRECATED**: Use `db().delete()` instead - https://easybase.github.io/EasyQB/docs/delete_queries.html\n     * @deprecated Use `db().delete()` instead - https://easybase.github.io/EasyQB/docs/delete_queries.html\n     * @async\n     * @param {Record<string, any>} record \n     * @return {Promise<StatusResponse>} Promise<StatusResponse>\n     */\n    deleteRecord(options: DeleteRecordOptions): Promise<StatusResponse>;\n    /**\n     * **DEPRECATED**: Use `db` instead - https://easybase.github.io/EasyQB/\n     * @deprecated Use `db` instead - https://easybase.github.io/EasyQB/\n     * @async\n     * @return {Promise<StatusResponse>} Promise<StatusResponse>\n     */\n    sync(): Promise<StatusResponse>;\n    /**\n     * **DEPRECATED**: Use the `setImage` function instead.\n     * @deprecated Use the `setImage` function instead.\n     * @async\n     * @param {UpdateRecordAttachmentOptions} options UpdateRecordAttachmentOptions\n     * @return {Promise<StatusResponse>} Promise<StatusResponse>\n     */\n    updateRecordImage(options: UpdateRecordAttachmentOptions): Promise<StatusResponse>;\n    /**\n     * **DEPRECATED**: Use the `setVideo` function instead.\n     * @deprecated Use the `setVideo` function instead.\n     * @async\n     * @param {UpdateRecordAttachmentOptions} options UpdateRecordAttachmentOptions\n     * @return {Promise<StatusResponse>} Promise<StatusResponse>\n     */\n    updateRecordVideo(options: UpdateRecordAttachmentOptions): Promise<StatusResponse>;\n    /**\n     * **DEPRECATED**: Use the `setFile` function instead.\n     * @deprecated Use the `setFile` function instead.\n     * @async\n     * @param {UpdateRecordAttachmentOptions} options UpdateRecordAttachmentOptions\n     * @return {Promise<StatusResponse>} Promise<StatusResponse>\n     */\n    updateRecordFile(options: UpdateRecordAttachmentOptions): Promise<StatusResponse>;\n    /**\n     * Upload an image to your backend and attach it to a specific record. columnName must reference a column of type 'image'.\n     * The file must have a valid image extension (png, jpg, heic, etc). \n     * @async\n     * @param {string} recordKey The '_key' of the record to attach this image to. Can be retrieved like: `db().return(\"_key\").where({ title: \"The Lion King\" }).one()`\n     * @param {string} columnName The name of the column that is of type image to attach.\n     * @param {File | FileFromURI} image Either an HTML File element or a FileFromURI object for React Native instances. For React Native, use libraries such as react-native-image-picker and react-native-document-picker. The file name must have a valid image file extension.\n     * @param {string} [tableName] Table to post attachment to. (Projects only)\n     * @return {Promise<StatusResponse>} Promise<StatusResponse>\n     */\n    setImage(recordKey: string, columnName: string, image: File | FileFromURI, tableName?: string): Promise<StatusResponse>;\n    /**\n     * Upload a video to your backend and attach it to a specific record. columnName must reference a column of type 'video'.\n     * The file must have a valid video extension (webm, mp4, mov, etc). \n     * @async\n     * @param {string} recordKey The '_key' of the record to attach this image to. Can be retrieved like: `db().return(\"_key\").where({ title: \"The Lion King\" }).one()`\n     * @param {string} columnName The name of the column that is of type video to attach.\n     * @param {File | FileFromURI} video Either an HTML File element or a FileFromURI object for React Native instances. For React Native, use libraries such as react-native-image-picker and react-native-document-picker. The file name must have a valid video file extension.\n     * @param {string} [tableName] Table to post attachment to. (Projects only)\n     * @return {Promise<StatusResponse>} Promise<StatusResponse>\n     */\n    setVideo(recordKey: string, columnName: string, video: File | FileFromURI, tableName?: string): Promise<StatusResponse>;\n    /**\n     * Upload a file to your backend and attach it to a specific record. columnName must reference a column of type 'file'.\n     * @async\n     * @param {string} recordKey The '_key' of the record to attach this image to. Can be retrieved like: `db().return(\"_key\").where({ title: \"The Lion King\" }).one()`\n     * @param {string} columnName The name of the column that is of type file to attach.\n     * @param {File | FileFromURI} file Either an HTML File element or a FileFromURI object for React Native instances. For React Native, use libraries such as react-native-image-picker and react-native-document-picker.\n     * @param {string} [tableName] Table to post attachment to. (Projects only)\n     * @return {Promise<StatusResponse>} Promise<StatusResponse>\n     */\n    setFile(recordKey: string, columnName: string, file: File | FileFromURI, tableName?: string): Promise<StatusResponse>;\n    /**\n     * **DEPRECATED**: Use `db` instead - https://easybase.github.io/EasyQB/\n     * @deprecated Use `db` instead - https://easybase.github.io/EasyQB/\n     * @return {Record<string, any>[]} Array of records corresponding to the current frame. Call sync() to push changes that you have made to this array.\n     */\n    Frame(): Record<string, any>[];\n    /**\n     * **DEPRECATED**: Use `db` instead - https://easybase.github.io/EasyQB/\n     * @deprecated Use `db` instead - https://easybase.github.io/EasyQB/\n     * @param {number} [index] Passing an index will only return the object at that index in your Frame, rather than the entire array. This is useful for editing single objects based on an index.\n     * @return {Record<string, any>} Single record corresponding to that object within the current frame. Call sync() to push changes that you have made to this object.\n     */\n    Frame(index: number): Record<string, any>;\n    /**\n     * Gets the number of records in your table.\n     * @async\n     * @returns {Promise<number>} The the number of records in your table.\n     */\n    fullTableSize(): Promise<number>;\n    /**\n     * Gets the number of records in your table.\n     * @async\n     * @param {string} [tableName] Name of table to get the sizes of. (Projects only)\n     * @returns {Promise<number>} The the number of records in your table.\n     */\n    fullTableSize(tableName: string): Promise<number>;\n    /**\n     * Retrieve an object detailing the columns in your table mapped to their corresponding type.\n     * @async\n     * @returns {Promise<Record<string, any>>} Object detailing the columns in your table mapped to their corresponding type.\n     */\n    tableTypes(): Promise<Record<string, any>>;\n    /**\n     * Retrieve an object detailing the columns in your table mapped to their corresponding type.\n     * @async\n     * @param {string} [tableName] Name of table to get the types of. (Projects only)\n     * @returns {Promise<Record<string, any>>} Object detailing the columns in your table mapped to their corresponding type.\n     */\n    tableTypes(tableName: string): Promise<Record<string, any>>;\n    /**\n     * View your frames current configuration\n     * @returns {Record<string, any>} Object contains the `offset` and `length` of your current frame.\n     */\n    currentConfiguration(): FrameConfiguration;\n    /**\n     * @async\n     * View a query by name. This returns an isolated array that has no effect on your frame or frame configuration. sync() and Frame() have no \n     * relationship with a Query(). An edited Query cannot be synced with your database, use Frame() for realtime \n     * database array features.\n     * @param {QueryOptions} options QueryOptions\n     * @return {Promise<Record<string, any>[]>} Isolated array of records in the same form as Frame(). Editing this array has no effect and cannot be synced with your database. Use Frame() for realtime database features.\n     */\n    Query(options: QueryOptions): Promise<Record<string, any>[]>;\n    /**\n     * Instantiate EasyQB instance for dynamic CRUD query building: https://easybase.github.io/EasyQB/\n     * @param {string} [tableName] Name of your table.\n     * @param {boolean} [userAssociatedRecordsOnly] **PROJECTS ONLY** Operations will only be performed on records already associated to the currently signed-in user. Inserted records will automatically be associate to the user.\n     * @returns {SQW} EasyQB object for dynamic querying: https://easybase.github.io/EasyQB/\n     */\n    db(tableName?: string, userAssociatedRecordsOnly?: boolean): SQW;\n    /**\n     * Subscribe to db events, invoked by calling `.all` or `.one`: https://easybase.github.io/EasyQB/\n     * @param {function(status?: DB_STATUS, queryType?: string, executeCount?: EXECUTE_COUNT, tableName?: string | null, returned?: any):void} [callback] Callback function to execute on db operations.\n     * @returns {function():void} Calling this function unsubscribes your callback function from events.\n     */\n    dbEventListener(callback: (status?: DB_STATUS, queryType?: string, executeCount?: EXECUTE_COUNT, tableName?: string | null, returned?: any) => void): () => void;\n    /**\n     * Expressions and operations builder for `.db()`, used to create complex conditions, aggregators, and clauses. https://easybase.github.io/EasyQB/docs/operations.html\n     */\n    e: NewExpression;\n    /**\n     * Custom stateful hook to an instance of `db().return`. Other local changes will automatically re-fetch the query \n     * as detailed in the passed-in db.\n     * \n     * ```\n     * \n     * const { frame } = useReturn(() => db('MYTABLE').return().where(e.gt('rating', ratingState)).limit(10), [ratingState])\n     * \n     * const onButtonClick = (_key) => {\n     *   db('MYTABLE').delete().where({ _key }).all();\n     * }\n     * \n     * // Stays fresh after call to `.delete()`\n     * return (<div>{ frame.map(ele => <Card {...ele} />) }</div>)\n     * \n     * ```\n     * \n     * @param {function():SQW} dbInstance Function returning an instance of `db().return` without having called `.all` or `.one`\n     * @param {React.DependencyList} deps If present, instance will be reloaded if the values in the list change.\n     * @return {UseReturnValue} Object with the required values to statefully access an array that is subscribed to local executions to the corresponding db instance.\n     */\n    useReturn<T = Record<string, any>>(dbInstance: () => SQW, deps?: React.DependencyList): UseReturnValue<T>;\n    /**\n     * @async\n     * Trigger an email to the given username with a verification code to reset the user's password. This verification \n     * code is used in the `forgotPasswordConfirm` function, along with a new password. **The username must be the user's email address**.\n     * @param {string} username A username which must also be a valid email address\n     * @param {EmailTemplate} emailTemplate Optional details for the formatting & content of the verification email\n     * @return {Promise<StatusResponse>} A StatusResponse corresponding to the successful sending of a verification code email\n     */\n    forgotPassword(username: string, emailTemplate?: EmailTemplate): Promise<StatusResponse>\n    /**\n     * @async\n     * Confirm the resetting of an unauthenticated users password. This function is invoked after `forgotPassword` is used to trigger\n     * an email containing a verification code to the given username [*which must also be an email*]. The user's randomly generated\n     * verification code from their email is passed in the first parameter. \n     * @param {string} code Verification code found in the email sent from the `forgotPassword` function\n     * @param {string} username The same username (email) used in the `forgotPassword` function\n     * @param {string} newPassword The new password for the corresponding verified user\n     * @return {Promise<StatusResponse>} A StatusResponse corresponding to the successful setting of a new password\n     */\n    forgotPasswordConfirm(code: string, username: string, newPassword: string): Promise<StatusResponse>\n    /**\n     * Retrieve the currently signed-in user's ID.\n     * @return {string | undefined} The currently signed-in user's ID (username), otherwise undefined.\n     */\n    userID(): string | undefined;\n}\n\n/**\n * JS TYPES: ++++++++++++++++++\n */\n\nexport interface ConfigureFrameOptions {\n    /** Edit starting index from which records will be retrieved from. Useful for paging. */\n    offset?: number;\n    /** Limit the amount of records to be retrieved. Set to -1 or null to return all records. Can be used in combination with offset. */\n    limit?: number | null;\n    /** Table to sync frame with. (Projects only) */\n    tableName?: string;\n}\n\nexport interface FrameConfiguration {\n    /** Edit starting index from which records will be retrieved from. Useful for paging. */\n    offset: number;\n    /** Limit the amount of records to be retrieved. Set to -1 or null to return all records. Can be used in combination with offset. */\n    limit: number | null;\n    /** Table to sync frame with. (Projects only) */\n    tableName?: string;\n}\n\nexport interface Ebconfig {\n    tt?: string,\n    integration: string,\n    version: string\n}\n\nexport interface AddRecordOptions {\n    /** If true, record will be inserted at the end of the collection rather than the front. Overwrites absoluteIndex. */\n    insertAtEnd?: boolean;\n    /** Values to post to EasyBase collection. Format is { column name: value } */\n    newRecord: Record<string, any>;\n    /** Table to post new record to. (Projects only) */\n    tableName?: string;\n}\n\nexport interface DeleteRecordOptions {\n    record: Record<string, any>;\n    /** Table to delete record from. (Projects only) */\n    tableName?: string;\n}\n\nexport interface QueryOptions {\n    /** Name of the query saved in Easybase's Visual Query Builder */\n    queryName: string;\n    /** If you would like to sort the order of your query by a column. Pass the name of that column here */\n    sortBy?: string;\n    /** By default, columnToSortBy will sort your query by ascending value (1, 2, 3...). To sort by descending set this to true */\n    descending?: boolean;\n    /** Edit starting index from which records will be retrieved from. Useful for paging. */\n    offset?: number;\n    /** Limit the amount of records to be retrieved. Can be used in combination with offset. */\n    limit?: number;\n    /** This object can be set to overwrite the query values as set in the integration menu. If your query is setup to find records where 'age' >= 0, passing in { age: 50 } will query where 'age' >= 50. Read more: https://easybase.io/about/2020/09/15/Customizing-query-values/ */\n    customQuery?: Record<string, any>;\n    /** Table to query. (Projects only) */\n    tableName?: string;\n}\n\nexport interface FileFromURI {\n    /** Path on local device to the attachment. Usually received from react-native-image-picker or react-native-document-picker */\n    uri: string,\n    /** Name of the file with proper extension */\n    name: string,\n    /** File MIME type */\n    type: string\n}\n\nexport interface UpdateRecordAttachmentOptions {\n    /** EasyBase Record to attach this attachment to */\n    record: Record<string, any>;\n    /** The name of the column that is of type file/image/video */\n    columnName: string;\n    /** Either an HTML File element containing the correct type of attachment or a FileFromURI object for React Native instances.\n     * For React Native use libraries such as react-native-image-picker and react-native-document-picker.\n     * The file name must have a proper file extension corresponding to the attachment. \n     */\n    attachment: File | FileFromURI;\n    /** Table to post attachment to. (Projects only) */\n    tableName?: string;\n}\n\nexport interface StatusResponse {\n    /** Returns true if the operation was successful */\n    success: boolean;\n    /** Readable description of the the operation's status */\n    message: string;\n    /** Will represent a corresponding error if an error was thrown during the operation. */\n    errorCode?: string;\n}\n\nexport interface EmailTemplate {\n    /** Optional header of email that will be sent to user with verification code */\n    greeting?: string;\n    /** Optional name of application for placement within email */\n    appName?: string;\n    /** Optional footer of verification email often used for disclaimers. Can be a valid HTML string */\n    footer?: string;\n}\n\nexport enum POST_TYPES {\n    UPLOAD_ATTACHMENT = \"upload_attachment\",\n    HANDSHAKE = \"handshake\",\n    VALID_TOKEN = \"valid_token\",\n    GET_FRAME = \"get_frame\",\n    TABLE_SIZE = \"table_size\",\n    COLUMN_TYPES = \"column_types\",\n    SYNC_STACK = \"sync_stack\",\n    SYNC_DELETE = \"sync_delete\",\n    SYNC_INSERT = \"sync_insert\",\n    GET_QUERY = \"get_query\",\n    USER_ATTRIBUTES = \"user_attributes\",\n    SET_ATTRIBUTE = \"set_attribute\",\n    SIGN_UP = \"sign_up\",\n    REQUEST_TOKEN = \"request_token\",\n    EASY_QB = \"easyqb\",\n    RESET_PASSWORD = \"reset_password\",\n    FORGOT_PASSWORD_SEND = \"forgot_password_send\",\n    FORGOT_PASSWORD_CONFIRM = \"forgot_password_confirm\"\n}\n\nexport enum DB_STATUS {\n    ERROR = \"error\",\n    PENDING = \"pending\",\n    SUCCESS = \"success\"\n}\n\nexport enum EXECUTE_COUNT {\n    ALL = \"all\",\n    ONE = \"one\"\n}\n\nexport interface AuthPostResponse {\n    success: boolean;\n    data: any;\n}\n\nexport interface Globals {\n    ebconfig: Ebconfig;\n    token: string;\n    refreshToken: string;\n    session: number;\n    options: EasybaseProviderPropsOptions;\n    instance: \"Node\" | \"React\" | \"React Native\";\n    mounted: boolean;\n    newTokenCallback(): void;\n    userID: string | undefined;\n    analyticsEnabled: boolean;\n    analyticsEventsToTrack: GoogleAnalyticsEvents;\n    analyticsEvent(eventTitle: string, params?: Record<string, any>): void;\n    analyticsIdentify(hashedUserId: string): void;\n    GA_USER_ID_SALT: string; // https://support.google.com/analytics/answer/6366371?hl=en#hashed\n}\n","import { Ebconfig, EasybaseProviderPropsOptions, Globals, EasybaseProviderProps, GoogleAnalyticsEvents } from \"./types\";\n\nnamespace GlobalNamespace {\n    export let ebconfig: Ebconfig;\n    export let token: string;\n    export let refreshToken: string;\n    export let session: number;\n    export let options: EasybaseProviderPropsOptions;\n    export let instance: \"Node\" | \"React\" | \"React Native\";\n    export let mounted: boolean;\n    export let newTokenCallback: () => {};\n    export let userID: string;\n    export let analyticsEnabled: boolean;\n    export let analyticsEventsToTrack: GoogleAnalyticsEvents;\n    export let analyticsEvent: () => {};\n    export let analyticsIdentify: () => {};\n    export let GA_USER_ID_SALT: string; // https://support.google.com/analytics/answer/6366371?hl=en#hashed\n}\n\nconst _g: Globals = { ...GlobalNamespace };\n\nexport default _g;\n\nexport function gFactory({ ebconfig, options }: EasybaseProviderProps): Globals {\n    const optionsObj = { ...options }; // Forces undefined to empty object\n    const gaTrackingObj = options ? options.googleAnalyticsEventTracking : {};\n    const defaultG = {\n        options: optionsObj,\n        ebconfig: ebconfig,\n        GA_USER_ID_SALT: \"m83WnAPrq\",\n        analyticsEventsToTrack: {\n            login: true,\n            sign_up: true,\n            forgot_password: true,\n            forgot_password_confirm: true,\n            reset_user_password: true,\n            ...gaTrackingObj\n        }\n    }\n    return { ...GlobalNamespace, ...defaultG } as Globals;\n}\n","import _g from \"./g\";\nimport { Globals } from \"./types\";\n\nexport default function utilsFactory(globals?: Globals): any {\n    const g = globals || _g;\n\n    const generateBareUrl = (type: string, integrationID: string): string => `https://api.easybase.io/${type}/${integrationID}`;\n\n    const generateAuthBody = (): any => {\n        const stamp = Date.now();\n        return {\n            token: g.token,\n            token_time: ~~(g.session / (stamp % 64)),\n            now: stamp\n        }\n    }\n    \n    function log(...params: any): void {\n        if (g.options.logging) {\n            console.log(\"EASYBASE â€” \", ...params);\n        }\n    }\n\n    return {\n        generateAuthBody,\n        generateBareUrl,\n        log\n    }\n}\n","import { SQW } from \"easyqb/types/sq\";\nimport { NewExpression } from \"easyqb/types/expression\";\n\nexport interface ConfigureFrameOptions {\n    /** Edit starting index from which records will be retrieved from. Useful for paging. */\n    offset?: number;\n    /** Limit the amount of records to be retrieved. Set to -1 or null to return all records. Can be used in combination with offset. */\n    limit?: number | null;\n    /** Table to sync frame with. (Projects only) */\n    tableName?: string;\n}\n\nexport interface GoogleAnalyticsEvents {\n    login?: boolean;\n    sign_up?: boolean;\n    forgot_password?: boolean;\n    forgot_password_confirm?: boolean;\n    reset_user_password?: boolean;\n    get_user_attributes?: boolean;\n    set_user_attribute?: boolean;\n    query?: boolean;\n    full_table_size?: boolean;\n    table_types?: boolean;\n    db_one?: boolean;\n    db_all?: boolean;\n}\n\nexport interface EasybaseProviderPropsOptions {\n    /** Custom authentication string. Can be set in integration menu. If it is set, it is required to access integration. This acts as an extra layer of security and extensibility. */\n    authentication?: string;\n    /** Log Easybase react status and events to console. */\n    logging?: boolean;\n    /** Google Analytics 4 Measurement ID for activity reporting */\n    googleAnalyticsId?: string;\n    /** **Only Required for React Native** â€“ Google Analytics 4 Measurement Protocol Secret ID for activity reporting. To create a new secret, navigate in the Google Analytics UI to: Admin > Data Streams > choose your stream > Measurement Protocol > Create */\n    googleAnalyticsSecret?: string;\n    /**\n     * Specify which extra events are tracked in Google Analytics\n     * \n     * **default**:\n     *  * Page Mount\n     *  * login\n     *  * sign_up\n     *  * forgot_password\n     *  * forgot_password_confirm\n     *  * reset_user_password\n     *  \n    */\n    googleAnalyticsEventTracking?: GoogleAnalyticsEvents;\n}\n\n\nexport interface EasybaseProviderProps {\n    /** Easybase ebconfig object. Can be downloaded in the integration drawer next to 'React Token'. This is automatically generated.  */\n    ebconfig: Ebconfig;\n    /** Optional configuration parameters. */\n    options?: EasybaseProviderPropsOptions\n}\n\nexport interface FrameConfiguration {\n    /** Edit starting index from which records will be retrieved from. Useful for paging. */\n    offset: number;\n    /** Limit the amount of records to be retrieved. Set to -1 or null to return all records. Can be used in combination with offset. */\n    limit: number | null;\n    /** Table to sync frame with. (Projects only) */\n    tableName?: string;\n}\n\nexport interface Ebconfig {\n    tt?: string,\n    integration: string,\n    version: string\n}\n\nexport interface AddRecordOptions {\n    /** If true, record will be inserted at the end of the collection rather than the front. Overwrites absoluteIndex. */\n    insertAtEnd?: boolean;\n    /** Values to post to Easybase collection. Format is { column name: value } */\n    newRecord: Record<string, any>;\n    /** Table to post new record to. (Projects only) */\n    tableName?: string;\n}\n\nexport interface DeleteRecordOptions {\n    record: Record<string, any>;\n    /** Table to delete record from. (Projects only) */\n    tableName?: string;\n}\n\nexport interface QueryOptions {\n    /** Name of the query saved in Easybase's Visual Query Builder */\n    queryName: string;\n    /** If you would like to sort the order of your query by a column. Pass the name of that column here */\n    sortBy?: string;\n    /** By default, columnToSortBy will sort your query by ascending value (1, 2, 3...). To sort by descending set this to true */\n    descending?: boolean;\n    /** Edit starting index from which records will be retrieved from. Useful for paging. */\n    offset?: number;\n    /** Limit the amount of records to be retrieved. Can be used in combination with offset. */\n    limit?: number;\n    /** This object can be set to overwrite the query values as set in the integration menu. If your query is setup to find records where 'age' >= 0, passing in { age: 50 } will query where 'age' >= 50. Read more: https://easybase.io/about/2020/09/15/Customizing-query-values/ */\n    customQuery?: Record<string, any>;\n    /** Table to query. (Projects only) */\n    tableName?: string;\n}\n\nexport interface FileFromURI {\n    /** Path on local device to the attachment. Usually received from react-native-image-picker or react-native-document-picker */\n    uri: string,\n    /** Name of the file with proper extension */\n    name: string,\n    /** File MIME type */\n    type: string\n}\n\nexport interface UpdateRecordAttachmentOptions {\n    /** Easybase Record to attach this attachment to */\n    record: Record<string, any>;\n    /** The name of the column that is of type file/image/video */\n    columnName: string;\n    /** Either an HTML File element containing the correct type of attachment or a FileFromURI object for React Native instances.\n     * For React Native use libraries such as react-native-image-picker and react-native-document-picker.\n     * The file name must have a proper file extension corresponding to the attachment. \n     */\n    attachment: File | FileFromURI;\n    /** Table to post attachment to. (Projects only) */\n    tableName?: string;\n}\n\nexport interface StatusResponse {\n    /** Returns true if the operation was successful */\n    success: boolean;\n    /** Readable description of the the operation's status */\n    message: string;\n    /** Will represent a corresponding error if an error was thrown during the operation. */\n    errorCode?: string;\n}\n\nexport interface EmailTemplate {\n    /** Optional header of email that will be sent to user with verification code */\n    greeting?: string;\n    /** Optional name of application for placement within email */\n    appName?: string;\n    /** Optional footer of verification email often used for disclaimers. Can be a valid HTML string */\n    footer?: string;\n}\n\nexport enum POST_TYPES {\n    UPLOAD_ATTACHMENT = \"upload_attachment\",\n    HANDSHAKE = \"handshake\",\n    VALID_TOKEN = \"valid_token\",\n    GET_FRAME = \"get_frame\",\n    TABLE_SIZE = \"table_size\",\n    COLUMN_TYPES = \"column_types\",\n    SYNC_STACK = \"sync_stack\",\n    SYNC_DELETE = \"sync_delete\",\n    SYNC_INSERT = \"sync_insert\",\n    GET_QUERY = \"get_query\",\n    USER_ATTRIBUTES = \"user_attributes\",\n    SET_ATTRIBUTE = \"set_attribute\",\n    SIGN_UP = \"sign_up\",\n    REQUEST_TOKEN = \"request_token\",\n    EASY_QB = \"easyqb\",\n    RESET_PASSWORD = \"reset_password\",\n    FORGOT_PASSWORD_SEND = \"forgot_password_send\",\n    FORGOT_PASSWORD_CONFIRM = \"forgot_password_confirm\"\n}\n\nexport enum DB_STATUS {\n    ERROR = \"error\",\n    PENDING = \"pending\",\n    SUCCESS = \"success\"\n}\n\nexport enum EXECUTE_COUNT {\n    ALL = \"all\",\n    ONE = \"one\"\n}\n\nexport interface AuthPostResponse {\n    success: boolean;\n    data: any;\n}\n\nexport interface ContextValue {\n    /**\n     * Signs out the current user.\n     */\n    signOut(): void;\n    /**\n     * Retrieve the currently signed in users attribute object.\n     * @async\n     * @return {Promise<Record<string, string>>} Promise<Record<string, string>>\n     */\n    getUserAttributes(): Promise<Record<string, string>>;\n    /**\n     * Set a single attribute of the currently signed in user. Can also be updated visually in the Easybase 'Users' tab.\n     * @async\n     * @param key Object key. Can be a new key or existing key.\n     * @param value attribute value.\n     * @return {Promise<StatusResponse>} Promise<StatusResponse>\n     */\n    setUserAttribute(key: string, value: string): Promise<StatusResponse>;\n    /**\n     * Reset the currently signed-in user's password to a new string.\n     * @async\n     * @param {string} currentPassword Signed-in user's current password\n     * @param {string} newPassword New password for user's account\n     * @return {Promise<StatusResponse>} Promise<StatusResponse>\n     */\n    resetUserPassword(currentPassword: string, newPassword: string): Promise<StatusResponse>;\n    /**\n     * Sign in a user that already exists for a project.\n     * @async\n     * @param userID unique identifier for new user. Usually an email or phone number.\n     * @param password user password.\n     * @return {Promise<StatusResponse>} Promise<StatusResponse>\n     */\n    signIn(userID: string, password: string): Promise<StatusResponse>;\n    /**\n     * Create a new user for your project. You must still call signIn() after signing up.\n     * @async\n     * @param newUserID unique identifier for new user. Usually an email or phone number.\n     * @param password user password. Must be at least 8 characters long.\n     * @param userAttributes Optional object to store user attributes. Can also be edited visually in the Easybase 'Users' tab.\n     * @return {Promise<StatusResponse>} Promise<StatusResponse>\n     */\n    signUp(newUserID: string, password: string, userAttributes?: Record<string, string>): Promise<StatusResponse>;\n    /**\n     * **DEPRECATED**: Use `db` instead - https://easybase.github.io/EasyQB/\n     * @deprecated Use `db` instead - https://easybase.github.io/EasyQB/\n     * @param {ConfigureFrameOptions} options ConfigureFrameOptions\n     * @return {StatusResponse} StatusResponse\n     */\n    configureFrame(options: ConfigureFrameOptions): StatusResponse;\n    /**\n     * **DEPRECATED**: Use `db().insert()` instead - https://easybase.github.io/EasyQB/docs/insert_queries.html\n     * @deprecated Use `db().insert()` instead - https://easybase.github.io/EasyQB/docs/insert_queries.html\n     * @async\n     * @param {AddRecordOptions} options AddRecordOptions\n     * @return {Promise<StatusResponse>} Promise<StatusResponse>\n     */\n    addRecord(options: AddRecordOptions): Promise<StatusResponse>;\n    /**\n     * **DEPRECATED**: Use `db().delete()` instead - https://easybase.github.io/EasyQB/docs/delete_queries.html\n     * @deprecated Use `db().delete()` instead - https://easybase.github.io/EasyQB/docs/delete_queries.html\n     * @async\n     * @param {Record<string, any>} record \n     * @return {Promise<StatusResponse>} Promise<StatusResponse>\n     */\n    deleteRecord(options: DeleteRecordOptions): Promise<StatusResponse>;\n    /**\n     * **DEPRECATED**: Use `db` instead - https://easybase.github.io/EasyQB/\n     * @deprecated Use `db` instead - https://easybase.github.io/EasyQB/\n     * @async\n     * @return {Promise<StatusResponse>} Promise<StatusResponse>\n     */\n    sync(): Promise<StatusResponse>;\n    /**\n     * **DEPRECATED**: Use the `setImage` function instead.\n     * @deprecated Use the `setImage` function instead.\n     * @async\n     * @param {UpdateRecordAttachmentOptions} options UpdateRecordAttachmentOptions\n     * @return {Promise<StatusResponse>} Promise<StatusResponse>\n     */\n    updateRecordImage(options: UpdateRecordAttachmentOptions): Promise<StatusResponse>;\n    /**\n     * **DEPRECATED**: Use the `setVideo` function instead.\n     * @deprecated Use the `setVideo` function instead.\n     * @async\n     * @param {UpdateRecordAttachmentOptions} options UpdateRecordAttachmentOptions\n     * @return {Promise<StatusResponse>} Promise<StatusResponse>\n     */\n    updateRecordVideo(options: UpdateRecordAttachmentOptions): Promise<StatusResponse>;\n    /**\n     * **DEPRECATED**: Use the `setFile` function instead.\n     * @deprecated Use the `setFile` function instead.\n     * @async\n     * @param {UpdateRecordAttachmentOptions} options UpdateRecordAttachmentOptions\n     * @return {Promise<StatusResponse>} Promise<StatusResponse>\n     */\n    updateRecordFile(options: UpdateRecordAttachmentOptions): Promise<StatusResponse>;\n    /**\n     * Upload an image to your backend and attach it to a specific record. columnName must reference a column of type 'image'.\n     * The file must have a valid image extension (png, jpg, heic, etc). \n     * @async\n     * @param {string} recordKey The '_key' of the record to attach this image to. Can be retrieved like: `db().return(\"_key\").where({ title: \"The Lion King\" }).one()`\n     * @param {string} columnName The name of the column that is of type image to attach.\n     * @param {File | FileFromURI} image Either an HTML File element or a FileFromURI object for React Native instances. For React Native, use libraries such as react-native-image-picker and react-native-document-picker. The file name must have a valid image file extension.\n     * @param {string} [tableName] Table to post attachment to. (Projects only)\n     * @return {Promise<StatusResponse>} Promise<StatusResponse>\n     */\n    setImage(recordKey: string, columnName: string, image: File | FileFromURI, tableName?: string): Promise<StatusResponse>;\n    /**\n     * Upload a video to your backend and attach it to a specific record. columnName must reference a column of type 'video'.\n     * The file must have a valid video extension (webm, mp4, mov, etc). \n     * @async\n     * @param {string} recordKey The '_key' of the record to attach this image to. Can be retrieved like: `db().return(\"_key\").where({ title: \"The Lion King\" }).one()`\n     * @param {string} columnName The name of the column that is of type video to attach.\n     * @param {File | FileFromURI} video Either an HTML File element or a FileFromURI object for React Native instances. For React Native, use libraries such as react-native-image-picker and react-native-document-picker. The file name must have a valid video file extension.\n     * @param {string} [tableName] Table to post attachment to. (Projects only)\n     * @return {Promise<StatusResponse>} Promise<StatusResponse>\n     */\n    setVideo(recordKey: string, columnName: string, video: File | FileFromURI, tableName?: string): Promise<StatusResponse>;\n    /**\n     * Upload a file to your backend and attach it to a specific record. columnName must reference a column of type 'file'.\n     * @async\n     * @param {string} recordKey The '_key' of the record to attach this image to. Can be retrieved like: `db().return(\"_key\").where({ title: \"The Lion King\" }).one()`\n     * @param {string} columnName The name of the column that is of type file to attach.\n     * @param {File | FileFromURI} file Either an HTML File element or a FileFromURI object for React Native instances. For React Native, use libraries such as react-native-image-picker and react-native-document-picker.\n     * @param {string} [tableName] Table to post attachment to. (Projects only)\n     * @return {Promise<StatusResponse>} Promise<StatusResponse>\n     */\n    setFile(recordKey: string, columnName: string, file: File | FileFromURI, tableName?: string): Promise<StatusResponse>;\n    /**\n     * **DEPRECATED**: Use `db` instead - https://easybase.github.io/EasyQB/\n     * @deprecated Use `db` instead - https://easybase.github.io/EasyQB/\n     * @return {Record<string, any>[]} Array of records corresponding to the current frame. Call sync() to push changes that you have made to this array.\n     */\n    Frame(): Record<string, any>[];\n    /**\n     * **DEPRECATED**: Use `db` instead - https://easybase.github.io/EasyQB/\n     * @deprecated Use `db` instead - https://easybase.github.io/EasyQB/\n     * @param {number} [index] Passing an index will only return the object at that index in your Frame, rather than the entire array. This is useful for editing single objects based on an index.\n     * @return {Record<string, any>} Single record corresponding to that object within the current frame. Call sync() to push changes that you have made to this object.\n     */\n    Frame(index: number): Record<string, any>;\n    /**\n     * Gets the number of records in your table.\n     * @async\n     * @returns {Promise<number>} The the number of records in your table.\n     */\n    fullTableSize(): Promise<number>;\n    /**\n     * Gets the number of records in your table.\n     * @async\n     * @param {string} [tableName] Name of table to get the sizes of. (Projects only)\n     * @returns {Promise<number>} The the number of records in your table.\n     */\n    fullTableSize(tableName: string): Promise<number>;\n    /**\n     * Retrieve an object detailing the columns in your table mapped to their corresponding type.\n     * @async\n     * @returns {Promise<Record<string, any>>} Object detailing the columns in your table mapped to their corresponding type.\n     */\n    tableTypes(): Promise<Record<string, any>>;\n    /**\n     * Retrieve an object detailing the columns in your table mapped to their corresponding type.\n     * @async\n     * @param {string} [tableName] Name of table to get the types of. (Projects only)\n     * @returns {Promise<Record<string, any>>} Object detailing the columns in your table mapped to their corresponding type.\n     */\n    tableTypes(tableName: string): Promise<Record<string, any>>;\n    /**\n     * View your frames current configuration\n     * @returns {Record<string, any>} Object contains the `offset` and `length` of your current frame.\n     */\n    currentConfiguration(): FrameConfiguration;\n    /**\n     * @async\n     * View a query by name. This returns an isolated array that has no effect on your frame or frame configuration. sync() and Frame() have no \n     * relationship with a Query(). An edited Query cannot be synced with your database, use Frame() for realtime \n     * database array features.\n     * @param {QueryOptions} options QueryOptions\n     * @return {Promise<Record<string, any>[]>} Isolated array of records in the same form as Frame(). Editing this array has no effect and cannot be synced with your database. Use Frame() for realtime database features.\n     */\n    Query(options: QueryOptions): Promise<Record<string, any>[]>;\n    /**\n     * Instantiate EasyQB instance for dynamic CRUD query building: https://easybase.github.io/EasyQB/\n     * @param {string} [tableName] Name of your table.\n     * @param {boolean} [userAssociatedRecordsOnly] **PROJECTS ONLY** Operations will only be performed on records already associated to the currently signed-in user. Inserted records will automatically be associate to the user.\n     * @returns {SQW} EasyQB object for dynamic querying: https://easybase.github.io/EasyQB/\n     */\n    db(tableName?: string, userAssociatedRecordsOnly?: boolean): SQW;\n    /**\n     * Subscribe to db events, invoked by calling `.all` or `.one`: https://easybase.github.io/EasyQB/\n     * @param {function(status?: DB_STATUS, queryType?: string, executeCount?: EXECUTE_COUNT, tableName?: string | null, returned?: any):void} [callback] Callback function to execute on db operations.\n     * @returns {function():void} Calling this function unsubscribes your callback function from events.\n     */\n    dbEventListener(callback: (status?: DB_STATUS, queryType?: string, executeCount?: EXECUTE_COUNT, tableName?: string | null, returned?: any) => void): () => void;\n    /**\n     * Expressions and operations builder for `.db()`, used to create complex conditions, aggregators, and clauses. https://easybase.github.io/EasyQB/docs/operations.html\n     */\n    e: NewExpression;\n    /**\n     * @async\n     * Trigger an email to the given username with a verification code to reset the user's password. This verification \n     * code is used in the `forgotPasswordConfirm` function, along with a new password. **The username must be the user's email address**.\n     * @param {string} username A username which must also be a valid email address\n     * @param {EmailTemplate} emailTemplate Optional details for the formatting & content of the verification email\n     * @return {Promise<StatusResponse>} A StatusResponse corresponding to the successful sending of a verification code email\n     */\n    forgotPassword(username: string, emailTemplate?: EmailTemplate): Promise<StatusResponse>\n    /**\n     * @async\n     * Confirm the resetting of an unauthenticated users password. This function is invoked after `forgotPassword` is used to trigger\n     * an email containing a verification code to the given username [*which must also be an email*]. The user's randomly generated\n     * verification code from their email is passed in the first parameter. \n     * @param {string} code Verification code found in the email sent from the `forgotPassword` function\n     * @param {string} username The same username (email) used in the `forgotPassword` function\n     * @param {string} newPassword The new password for the corresponding verified user\n     * @return {Promise<StatusResponse>} A StatusResponse corresponding to the successful setting of a new password\n     */\n    forgotPasswordConfirm(code: string, username: string, newPassword: string): Promise<StatusResponse>\n    /**\n     * Retrieve the currently signed-in user's ID.\n     * @return {string | undefined} The currently signed-in user's ID (username), otherwise undefined.\n     */\n    userID(): string | undefined;\n}\n\nexport interface Globals {\n    ebconfig: Ebconfig;\n    token: string;\n    refreshToken: string;\n    session: number;\n    options: EasybaseProviderPropsOptions;\n    instance: \"Node\" | \"React\" | \"React Native\";\n    mounted: boolean;\n    newTokenCallback(): void;\n    userID: string | undefined;\n    analyticsEnabled: boolean;\n    analyticsEventsToTrack: GoogleAnalyticsEvents;\n    analyticsEvent(eventTitle: string, params?: Record<string, any>): void;\n    analyticsIdentify(hashedUserId: string): void;\n    GA_USER_ID_SALT: string; // https://support.google.com/analytics/answer/6366371?hl=en#hashed\n}\n","var global = typeof self !== 'undefined' ? self : this;\nvar __self__ = (function () {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = global.DOMException\n}\nF.prototype = global;\nreturn new F();\n})();\n(function(self) {\n\nvar irrelevant = (function (exports) {\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n  return exports;\n\n}({}));\n})(__self__);\n__self__.fetch.ponyfill = true;\n// Remove \"polyfill\" property added by whatwg-fetch\ndelete __self__.fetch.polyfill;\n// Choose between native implementation (global) or custom implementation (__self__)\n// var ctx = global.fetch ? global : __self__;\nvar ctx = __self__; // this line disable service worker support temporarily\nexports = ctx.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = ctx.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = ctx.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = ctx.Headers\nexports.Request = ctx.Request\nexports.Response = ctx.Response\nmodule.exports = exports\n","import { POST_TYPES, AuthPostResponse, Globals, StatusResponse, EmailTemplate } from \"./types\";\nimport _g from \"./g\";\nimport utilsFactory from \"./utils\";\nimport fetch from 'cross-fetch';\n\nexport default function authFactory(globals?: Globals): any {\n    const g = globals || _g;\n\n    const { generateBareUrl, generateAuthBody, log } = utilsFactory(g);\n\n    function _clearTokens() {\n        g.token = \"\";\n        g.refreshToken = \"\";\n        g.newTokenCallback();\n        g.userID = undefined;\n    }\n\n    const getUserAttributes = async (): Promise<Record<string, string>> => {\n        try {\n            const attrsRes = await tokenPost(POST_TYPES.USER_ATTRIBUTES);\n            g.analyticsEnabled && g.analyticsEventsToTrack.get_user_attributes && g.analyticsEvent('get_user_attributes');\n            return attrsRes.data;\n        } catch (error) {\n            log(error)\n            return error;\n        }\n    }\n\n    const setUserAttribute = async (key: string, value: string): Promise<StatusResponse> => {\n        try {\n            const setAttrsRes = await tokenPost(POST_TYPES.SET_ATTRIBUTE, {\n                key,\n                value\n            });\n            g.analyticsEnabled && g.analyticsEventsToTrack.set_user_attribute && g.analyticsEvent('set_user_attribute', { key });\n            return {\n                success: setAttrsRes.success,\n                message: JSON.stringify(setAttrsRes.data)\n            };\n        } catch (error) {\n            return {\n                success: false,\n                message: error.message || \"Error\",\n                errorCode: error.errorCode || undefined\n            };\n        }\n    }\n\n    const forgotPassword = async (username: string, emailTemplate?: EmailTemplate): Promise<StatusResponse> => {\n        try {\n            const setAttrsRes = await tokenPost(POST_TYPES.FORGOT_PASSWORD_SEND, {\n                username,\n                emailTemplate\n            });\n            g.analyticsEnabled && g.analyticsEventsToTrack.forgot_password && g.analyticsEvent('forgot_password');\n            return {\n                success: setAttrsRes.success,\n                message: setAttrsRes.data\n            };\n        } catch (error) {\n            return {\n                success: false,\n                message: error.message || \"Error\",\n                errorCode: error.errorCode || undefined\n            };\n        }\n    }\n\n    const forgotPasswordConfirm = async (code: string, username: string, newPassword: string): Promise<StatusResponse> => {\n        try {\n            const setAttrsRes = await tokenPost(POST_TYPES.FORGOT_PASSWORD_CONFIRM, {\n                username,\n                code,\n                newPassword\n            });\n            g.analyticsEnabled && g.analyticsEventsToTrack.forgot_password_confirm && g.analyticsEvent('forgot_password_confirm');\n            return {\n                success: setAttrsRes.success,\n                message: setAttrsRes.data\n            };\n        } catch (error) {\n            return {\n                success: false,\n                message: error.message || \"Error\",\n                errorCode: error.errorCode || undefined\n            };\n        }\n    }\n\n    const signUp = async (newUserID: string, password: string, userAttributes?: Record<string, string>): Promise<StatusResponse> => {\n        try {\n            const signUpRes = await tokenPost(POST_TYPES.SIGN_UP, {\n                newUserID,\n                password,\n                userAttributes\n            });\n            g.analyticsEnabled && g.analyticsEventsToTrack.sign_up && g.analyticsEvent('sign_up', { method: \"Easybase\" });\n            return {\n                success: signUpRes.success,\n                message: signUpRes.data\n            }\n        } catch (error) {\n            return {\n                success: false,\n                message: error.message || \"Error\",\n                errorCode: error.errorCode || undefined\n            }\n        }\n    }\n\n    const signIn = async (userID: string, password: string): Promise<StatusResponse> => {\n        const t1 = Date.now();\n        g.session = Math.floor(100000000 + Math.random() * 900000000);\n\n        const integrationType = g.ebconfig.integration.split(\"-\")[0].toUpperCase() === \"PROJECT\" ? \"PROJECT\" : \"REACT\";\n\n        try {\n            const res = await fetch(generateBareUrl(integrationType, g.ebconfig.integration), {\n                method: \"POST\",\n                headers: {\n                    'Eb-Post-Req': POST_TYPES.HANDSHAKE,\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    version: g.ebconfig.version,\n                    session: g.session,\n                    instance: g.instance,\n                    userID,\n                    password\n                })\n            });\n\n            const resData = await res.json();\n\n            if (resData.token) {\n                g.token = resData.token;\n                g.refreshToken = resData.refreshToken;\n                g.newTokenCallback();\n                g.userID = resData.userID;\n                g.mounted = true;\n                const [validTokenRes, { hash }, { fromUtf8 }] = await Promise.all([tokenPost(POST_TYPES.VALID_TOKEN), import('fast-sha256'), import('@aws-sdk/util-utf8-browser')])\n                const elapsed = Date.now() - t1;\n                if (validTokenRes.success) {\n                    log(\"Valid auth initiation in \" + elapsed + \"ms\");\n                    if (g.analyticsEnabled && g.analyticsEventsToTrack.login) {\n                        const hashOut = hash(fromUtf8(g.GA_USER_ID_SALT + resData.userID));\n                        const hexHash = Array.prototype.map.call(hashOut, x => ('00' + x.toString(16)).slice(-2)).join('');\n                        g.analyticsIdentify(hexHash);\n                        g.analyticsEvent('login', { method: \"Easybase\" });\n                    }\n                    return {\n                        success: true,\n                        message: \"Successfully signed in user\"\n                    };\n                } else {\n                    return {\n                        success: false,\n                        message: \"Could not sign in user\"\n                    };\n                }\n            } else {\n                return {\n                    success: false,\n                    message: \"Could not sign in user\",\n                    errorCode: resData.ErrorCode || undefined\n                };\n            }\n        } catch (error) {\n            return {\n                success: false,\n                message: error.message || \"Could not sign in user\",\n                errorCode: error.errorCode || undefined\n            };\n        }\n    }\n\n    const resetUserPassword = async (currentPassword: string, newPassword: string): Promise<StatusResponse> => {\n        if (typeof newPassword !== \"string\" || newPassword.length > 100) {\n            return {\n                success: false,\n                message: \"newPassword must be of type string\"\n            };\n        }\n\n        if (typeof currentPassword !== \"string\" || currentPassword.length > 100) {\n            return {\n                success: false,\n                message: \"currentPassword must be of type string\"\n            };\n        }\n\n        try {\n            const setAttrsRes = await tokenPost(POST_TYPES.RESET_PASSWORD, { currentPassword, newPassword });\n            g.analyticsEnabled && g.analyticsEventsToTrack.reset_user_password && g.analyticsEvent('reset_user_password');\n            return {\n                success: setAttrsRes.success,\n                message: JSON.stringify(setAttrsRes.data)\n            };\n        } catch (error) {\n            return {\n                success: false,\n                message: error.message || \"Error\",\n                errorCode: error.errorCode || undefined\n            };\n        }\n    }\n\n    const userID = (): string | undefined => g.userID || undefined;\n\n    const signOut = (): void => {\n        g.token = \"\";\n        g.newTokenCallback();\n        g.userID = undefined;\n    }\n\n    const initAuth = async (): Promise<boolean> => {\n        const t1 = Date.now();\n        g.session = Math.floor(100000000 + Math.random() * 900000000);\n\n        log(`Handshaking on${g.instance} instance`);\n\n        const integrationType = g.ebconfig.integration.split(\"-\")[0].toUpperCase() === \"PROJECT\" ? \"PROJECT\" : \"REACT\";\n\n        try {\n            const res = await fetch(generateBareUrl(integrationType, g.ebconfig.integration), {\n                method: \"POST\",\n                headers: {\n                    'Eb-Post-Req': POST_TYPES.HANDSHAKE,\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    version: g.ebconfig.version,\n                    tt: g.ebconfig.tt,\n                    session: g.session,\n                    instance: g.instance\n                })\n            });\n\n            const resData = await res.json();\n\n            if (resData.token) {\n                g.token = resData.token;\n                g.mounted = true;\n                const validTokenRes = await tokenPost(POST_TYPES.VALID_TOKEN);\n                const elapsed = Date.now() - t1;\n                if (validTokenRes.success) {\n                    log(\"Valid auth initiation in \" + elapsed + \"ms\");\n                    return true;\n                } else {\n                    return false;\n                }\n            } else {\n                return false;\n            }\n        } catch (error) {\n            console.error(error);\n            return false;\n        }\n    }\n\n    const tokenPost = async (postType: POST_TYPES, body?: {}): Promise<AuthPostResponse> => {\n        if (!g.mounted) {\n            await initAuth();\n        }\n\n        const integrationType = g.ebconfig.integration.split(\"-\")[0].toUpperCase() === \"PROJECT\" ? \"PROJECT\" : \"REACT\";\n\n        const res = await fetch(generateBareUrl(integrationType, g.ebconfig.integration), {\n            method: \"POST\",\n            headers: {\n                'Eb-Post-Req': postType,\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                _auth: generateAuthBody(),\n                ...body\n            })\n        });\n\n        const resData = await res.json();\n\n        if ({}.hasOwnProperty.call(resData, 'ErrorCode') || {}.hasOwnProperty.call(resData, 'code')) {\n            if (resData.ErrorCode === \"TokenExpired\") {\n                if (integrationType === \"PROJECT\") {\n                    try {\n                        const req_res = await tokenPost(POST_TYPES.REQUEST_TOKEN, {\n                            refreshToken: g.refreshToken,\n                            token: g.token\n                        });\n                        if (req_res.success) {\n                            g.token = req_res.data.token\n                            g.newTokenCallback();\n                            return tokenPost(postType, body);\n                        } else {\n                            throw new Error(req_res.data || \"Error\");\n                        }\n                    } catch (error) {\n                        _clearTokens();\n                        return {\n                            success: false,\n                            data: error.message || error\n                        }\n                    }\n                } else {\n                    await initAuth();\n                }\n                return tokenPost(postType, body);\n            } else {\n                const err = new Error(resData.body || resData.ErrorCode || resData.code || \"Error\");\n                (err as any).errorCode = resData.ErrorCode || resData.code;\n                throw err;\n            }\n        } else {\n            return {\n                success: resData.success,\n                data: resData.body\n            }\n        }\n    }\n\n    const tokenPostAttachment = async (formData: FormData, customHeaders: {}): Promise<AuthPostResponse> => {\n        if (!g.mounted) {\n            await initAuth();\n        }\n\n        const regularAuthbody = generateAuthBody();\n\n        const attachmentAuth = {\n            'Eb-token': regularAuthbody.token,\n            'Eb-token-time': regularAuthbody.token_time,\n            'Eb-now': regularAuthbody.now\n        };\n\n        const integrationType = g.ebconfig.integration.split(\"-\")[0].toUpperCase() === \"PROJECT\" ? \"PROJECT\" : \"REACT\";\n\n        const res = await fetch(generateBareUrl(integrationType, g.ebconfig.integration), {\n            method: \"POST\",\n            headers: {\n                'Eb-Post-Req': POST_TYPES.UPLOAD_ATTACHMENT,\n                ...customHeaders,\n                ...attachmentAuth\n            },\n            body: formData\n        });\n\n        const resData = await res.json();\n\n        if ({}.hasOwnProperty.call(resData, 'ErrorCode') || {}.hasOwnProperty.call(resData, 'code')) {\n            if (resData.ErrorCode === \"TokenExpired\") {\n                if (integrationType === \"PROJECT\") {\n                    try {\n                        const req_res = await tokenPost(POST_TYPES.REQUEST_TOKEN, {\n                            refreshToken: g.refreshToken,\n                            token: g.token\n                        });\n\n                        if (req_res.success) {\n                            g.token = req_res.data.token\n                            g.newTokenCallback();\n                            return tokenPostAttachment(formData, customHeaders);\n                        } else {\n                            throw new Error(req_res.data || \"Error\");\n                        }\n                    } catch (error) {\n                        _clearTokens();\n                        return {\n                            success: false,\n                            data: error.message || error\n                        }\n                    }\n                } else {\n                    await initAuth();\n                }\n                return tokenPostAttachment(formData, customHeaders);\n            } else {\n                const err = new Error(resData.body || resData.ErrorCode || resData.code || \"Error\");\n                (err as any).errorCode = resData.ErrorCode || resData.code;\n                throw err;\n            }\n        } else {\n            return {\n                success: resData.success,\n                data: resData.body\n            }\n        }\n    }\n\n    return {\n        initAuth,\n        tokenPost,\n        tokenPostAttachment,\n        signUp,\n        setUserAttribute,\n        getUserAttributes,\n        signIn,\n        signOut,\n        resetUserPassword,\n        forgotPassword,\n        forgotPasswordConfirm,\n        userID\n    }\n}\n","import {\n    POST_TYPES,\n    QueryOptions,\n    Globals\n} from \"./types\";\nimport _g from \"./g\";\n\nimport authFactory from \"./auth\";\n\nexport default function tableFactory(globals?: Globals): any {\n\n    const g = globals || _g;\n\n    const { tokenPost } = authFactory(g);\n\n    const Query = async (options: QueryOptions): Promise<Record<string, any>[]> => {\n        const defaultOptions: QueryOptions = {\n            queryName: \"\"\n        }\n    \n        const fullOptions: QueryOptions = { ...defaultOptions, ...options };\n\n        const res = await tokenPost(POST_TYPES.GET_QUERY, fullOptions);\n        if (res.success) {\n            g.analyticsEnabled && g.analyticsEventsToTrack.query && g.analyticsEvent('query', { queryName: fullOptions.queryName, tableName: fullOptions.tableName || undefined });\n            return res.data\n        } else {\n            return [];\n        }\n    }\n\n    async function fullTableSize(): Promise<number>;\n    async function fullTableSize(tableName: string): Promise<number>;\n    async function fullTableSize(tableName?: string): Promise<number> {\n        const res = await tokenPost(POST_TYPES.TABLE_SIZE, tableName ? { tableName } : {});\n        if (res.success) {\n            g.analyticsEnabled && g.analyticsEventsToTrack.full_table_size && g.analyticsEvent('full_table_size', { tableName: tableName || undefined });\n            return res.data;\n        } else {\n            return 0;\n        }\n    }\n\n    async function tableTypes(): Promise<Record<string, any>>;\n    async function tableTypes(tableName: string): Promise<Record<string, any>>\n    async function tableTypes(tableName?: string): Promise<Record<string, any>> {\n        const res = await tokenPost(POST_TYPES.COLUMN_TYPES, tableName ? { tableName } : {});\n        if (res.success) {\n            g.analyticsEnabled && g.analyticsEventsToTrack.table_types && g.analyticsEvent('table_types', { tableName: tableName || undefined });\n            return res.data;\n        } else {\n            return {};\n        }\n    }\n\n    return {\n        Query,\n        fullTableSize,\n        tableTypes\n    };\n}","/** Returns a function the creates a new context */\nconst createNewContext = defaultContext => {\n    const { parameterize, escape, mapKey, build } = defaultContext\n\n    return (inherit = {}) => {\n        const { params = [], unparameterized = false } = inherit\n\n        const whr = []\n        return {\n            // properties set by the EasyQB instance\n            parameterize,\n            escape,\n            mapKey,\n            build,\n\n            // properties inherited from the parent query\n            params,\n            unparameterized,\n\n            // properties of the current query\n            type: 'select',\n            // | sql' | 'select' | 'delete' | 'insert' | 'update'\n            target: whr,\n            join: undefined,\n            separator: ' ',\n            sql: [],\n            ret: [],\n            frm: [],\n            whr,\n            grp: [],\n            hav: [],\n            setop: [],\n            ord: [],\n            with: [],\n            set: []\n\n            // properties that may be added dynamically:\n            // userType\n            // distinct\n        }\n    }\n}\n\nmodule.exports = createNewContext\n","const createNewContext = require('./context')\nconst createQueryBuilder = ({ defaultContext, query, e, config }) => {\n    const { queries, methods, properties } = query\n    const newContext = createNewContext(defaultContext)\n    const reducers = createReducers(methods)\n    const updateContext = applyReducers(reducers)\n    reducers.extend = (ctx, args) => {\n        const arr = Array.isArray(args[0]) ? args[0] : args\n        for (let i = 0; i < arr.length; ++i) {\n            updateContext(arr[i].method, ctx)\n        }\n    }\n    const builder = () => { } // must not be object literal\n    const chain = createChain(builder)\n\n    const executeProperties = {\n        one: {\n            value: async function () {\n                const ret = await config.oneCallback(this.query, config.tableName, config.userAssociatedRecordsOnly)\n                return ret;\n            }\n        },\n        all: {\n            value: async function () {\n                const ret = await config.allCallback(this.query, config.tableName, config.userAssociatedRecordsOnly)\n                return ret;\n            }\n        },\n        _tableName: {\n            get: function () {\n                return config.tableName\n            }\n        }\n    }\n\n    // EasyQB no access to from\n    const _methodProperties = methodProperties({ methods, chain });\n    delete _methodProperties.from;\n\n    Object.defineProperties(builder, {\n        ...builderProperties({ chain, newContext, updateContext, queries }),\n        ..._methodProperties,\n        ...executeProperties,\n        ...properties,\n        e: {\n            value: e\n        }\n    })\n    return chain()\n}\n\n/** Creates a new builder instance */\nconst createChain = prototype => {\n    const chain = method => {\n        const fn = (...args) => chain({ name: 'express', args, prev: method })\n        fn.method = method\n        Object.setPrototypeOf(fn, prototype)\n        return fn\n    }\n    return chain\n}\n\n/** Creates an object containing all method reducers */\nconst createReducers = methods => {\n    const reducers = {}\n    for (const name in methods) {\n        const { updateContext, properties = {} } = methods[name]\n        reducers[name] = updateContext\n        // some methods have subproperties, e.g. .unionAll\n        for (const key in properties) {\n            reducers[`${name}.${key}`] = properties[key]\n        }\n    }\n    return reducers\n}\n\n/** Follows a method chain, applying each method's reducer, to ctx */\nconst applyReducers = reducers => (method, ctx) => {\n    // follow method links to construct methods array (in reverse)\n    const methods = []\n    for (; method !== undefined; method = method.prev) {\n        methods.push(method)\n    }\n    // build methods object by processing methods in call order\n    const express = { id: 0 }\n    for (let i = methods.length - 1; i >= 0; --i) {\n        const method = methods[i]\n        reducers[method.name](ctx, method.args, express)\n    }\n    return ctx\n}\n\n/** Default properties of all SQL Query Builders */\nconst builderProperties = ({ newContext, updateContext, queries }) => ({\n    _build: {\n        value: function (inheritedContext) {\n            const ctx = updateContext(this.method, newContext(inheritedContext))\n            return queries[ctx.type](ctx)\n        }\n    },\n    query: {\n        get: function () {\n            return this._build()\n        }\n    },\n    unparameterized: {\n        get: function () {\n            return this._build({ unparameterized: true }).text\n        }\n    }\n})\n\n/** Builds object containing a property for every query building method */\nconst methodProperties = ({ methods, chain }) => {\n    const properties = {}\n    for (const name in methods) {\n        const { getter } = methods[name]\n        if (getter) {\n            // add getter methods\n            properties[name] = {\n                get: function () {\n                    return chain({ name, prev: this.method })\n                }\n            }\n        } else {\n            // add function call methods\n            properties[name] = {\n                value: function (...args) {\n                    return chain({ name, args, prev: this.method })\n                }\n            }\n        }\n    }\n    return properties\n}\n\nmodule.exports = createQueryBuilder","const isTaggedTemplate = ([strings]) => Array.isArray(strings) && strings.raw\n\nconst buildTaggedTemplate = (ctx, [strings, ...args]) => {\n  let txt = strings[0]\n  for (let i = 0; i < args.length; ++i) {\n    txt += ctx.build(args[i]) + strings[i + 1]\n  }\n  return txt\n}\n\nmodule.exports = {\n  isTaggedTemplate,\n  buildTaggedTemplate\n}","const { isTaggedTemplate, buildTaggedTemplate } = require('./tagged_template')\n\nconst isObject = arg => arg && arg.constructor.prototype === Object.prototype\n\nconst buildCall = callbackfn => (ctx, args) =>\n  isTaggedTemplate(args)\n    ? buildTaggedTemplate(ctx, args)\n    : callbackfn(ctx, args)\n\nconst mapJoin = (callbackfn, separator = ', ') => (ctx, args) => {\n  let txt = ''\n  for (let i = 0; i < args.length; ++i) {\n    if (i !== 0) txt += separator\n    txt += callbackfn(ctx, args[i])\n  }\n  return txt\n}\n\nconst mapJoinWrap = (callbackfn, separator = ', ', open = '(', close = ')') => (\n  ctx,\n  args\n) => {\n  let txt = open\n  for (let i = 0; i < args.length; ++i) {\n    if (i !== 0) txt += separator\n    txt += callbackfn(ctx, args[i])\n  }\n  return txt + close\n}\n\nconst objectMapJoin = (callbackfn, separator = ', ') => (ctx, object) => {\n  let txt = ''\n  const keys = Object.keys(object)\n  for (let i = 0; i < keys.length; ++i) {\n    if (i !== 0) txt += separator\n    const key = keys[i]\n    txt += callbackfn(ctx, key, object[key])\n  }\n  return txt\n}\n\nmodule.exports = {\n  isObject,\n  buildCall,\n  mapJoin,\n  mapJoinWrap,\n  objectMapJoin\n}","// included to mitigate cost of case conversion\nconst memoize = fn => {\n  const cache = {}\n  return key => cache[key] || (cache[key] = fn(key))\n}\n\nconst normalKey = given_key => given_key.indexOf('(') === -1 ? given_key.toLowerCase().trim().replace(/ /g, '_') : given_key;\n\nmodule.exports = {\n  memoize,\n  normalKey\n}","const buildUtils = require('./build_utils')\nconst changeCase = require('./change_case')\nconst taggedTemplate = require('./tagged_template')\n\nmodule.exports = {\n  ...buildUtils,\n  ...changeCase,\n  ...taggedTemplate\n}","const { isTaggedTemplate } = require('../lib-util')\n\nconst createExpressionCompiler = expressionTable => {\n  const callsCompiler = createCallsCompiler(expressionTable)\n  return (ctx, current) => {\n    const calls = buildCalls(current)\n    const text = callsCompiler(ctx, calls)\n    return {\n      text,\n      args: ctx.params,\n      type: 'expression'\n    }\n  }\n}\n\n// TODO: Performance optimization:\n// inline expression building with this method so at most only one array\n// is allocated in total, no array of object containing arrays nonsense\nconst buildCalls = current => {\n  // get call nodes\n  const calls = []\n  for (; current; current = current.prev) calls.push(current)\n  if (calls.length === 0) throw Error('Error: Empty expression')\n\n  // build expression list\n  let expression = { name: 'arg', args: [] }\n  const expressions = [expression]\n  const last = calls.length - 1\n  for (let i = last; i >= 0; --i) {\n    const { name, args } = calls[i]\n    if (i === last) {\n      if (name) expression.name = name\n      else pushCall(expression.args, args)\n    } else {\n      if (name) expressions.push((expression = { name, args: [undefined] }))\n      else pushCall(expression.args, args)\n    }\n  }\n  return expressions\n}\n\nconst pushCall = (array, args) => {\n  if (isTaggedTemplate(args)) {\n    array.push({ tag: args })\n  } else {\n    if (args.length === 0)\n      throw Error('Error: Expression call requires at least one argument')\n    for (let i = 0; i < args.length; ++i) {\n      array.push({ arg: args[i] })\n    }\n  }\n}\n\nconst createCallsCompiler = expressionTable => (ctx, calls) => {\n  let exp\n  for (let i = 0; i < calls.length; ++i) {\n    const { name, args } = calls[i]\n    const { build, minArgs, maxArgs } = expressionTable[name]\n    if (i !== 0) args[0] = { exp }\n    const numArgs = args.length\n    if (numArgs < minArgs)\n      throw Error(`Error: ${name} requires at least ${minArgs} arguments`)\n    if (numArgs > maxArgs)\n      throw Error(`Error: ${name} accepts at most ${maxArgs} arguments`)\n    exp = build(ctx, args)\n  }\n  return exp\n}\n\nmodule.exports = createExpressionCompiler\n","const createExpressionCompiler = require('./compile')\nconst { normalKey } = require('../lib-util');\n\nconst aggregator = (op) => (columnName) => `${op}(${normalKey(columnName)})`;\n\nmodule.exports = ({ defaultContext, expression }) => {\n  const { expressions } = expression\n  const newContext = createNewContext(defaultContext)\n  const compile = createExpressionCompiler(expressions)\n  const builder = () => {} // must not be object literal\n  const chain = createChain(builder)\n  Object.defineProperties(builder, {\n    ...builderProperties({ compile, newContext }),\n    ...methodProperties({ expressions, chain }),\n  })\n  const ret = chain();\n  ret.max = aggregator('max');\n  ret.min = aggregator('min');\n  ret.avg = aggregator('avg');\n  ret.count = aggregator('count');\n  ret.sum = aggregator('sum');\n  return ret;\n}\n\nconst builderProperties = ({ compile, newContext }) => ({\n  _build: {\n    value: function(inherit) {\n      return compile(newContext(inherit), this.current)\n    }\n  },\n  query: {\n    get: function() {\n      return this._build()\n    }\n  },\n  unparameterized: {\n    get: function() {\n      return this._build({ unparameterized: true }).text\n    }\n  }\n})\n\nconst createNewContext = defaultContext => {\n  const { build, parameterize, escape, mapKey } = defaultContext\n  return inherit => {\n    const { params = [], unparameterized = false } = inherit || {}\n    return {\n      // EasyQB instance properties\n      build,\n      parameterize,\n      escape,\n      mapKey,\n\n      // inherited properties\n      params,\n      unparameterized\n    }\n  }\n}\n\nconst createChain = prototype => {\n  const chain = current => {\n    const fn = (...args) => chain({ prev: current, args })\n    fn.current = current\n    Object.setPrototypeOf(fn, prototype)\n    return fn\n  }\n  return chain\n}\n\nconst methodProperties = ({ expressions, chain }) => {\n  const properties = {}\n  for (const name in expressions) {\n    properties[name] = {\n      get: function() {\n        return chain({ prev: this.current, name })\n      }\n    }\n  }\n  return properties\n}\n","const createQueryBuilder = require('../builder-sq')\nconst createExpressionBuilder = require('../builder-expression')\nconst { memoize, normalKey } = require('../lib-util')\n\n\n/**\n * Creates a version of EasyQB for the given SQL dialect and database adapter.\n *\n * A dialect is variant of the SQL language,\n * while an adapter is the driver that communicates with the database.\n *\n * This design makes it easy to swap drivers, e.g. mysql vs mysql2 or\n * add new databases just by connecting a new adapter to an existing dialect.\n *\n */\n\nconst createSqorn = ({ dialect }) => (config = {}) => {\n  const { query, expression, parameterize, escape } = dialect\n\n  // 1. Create default context properties passed through build tree\n  const mapKey = memoize(normalKey)\n  const defaultContext = { parameterize, escape, mapKey, build }\n\n  // 2. Create Expression Builder\n  const e = createExpressionBuilder({ defaultContext, expression })\n\n  // 3. Create Query Builder\n  const sq = createQueryBuilder({ defaultContext, query, e, config })\n\n  // 4. TODO: Build Executor, Attach e and execute functions\n\n  // 5. TODO: Return { sq, e, transaction, db }\n  return sq\n}\n\nfunction build(arg) {\n  if (arg === undefined) throw Error('Error: undefined argument')\n  if (typeof arg === 'function') {\n    if (arg._build) {\n      const { type, text } = arg._build(this)\n      if (type === 'expression') return text\n      if (type === 'fragment') return text\n      return `(${text})`\n    }\n    return arg(this)\n  }\n  return this.unparameterized ? this.escape(arg) : this.parameterize(arg)\n}\n\nmodule.exports = createSqorn","const { normalKey } = require('../lib-util')\n\n/** Query building methods */\nconst methods = {\n    with: {\n        updateContext: (ctx, args) => {\n            ctx.with.push(args)\n        }\n    },\n    withRecursive: {\n        updateContext: (ctx, args) => {\n            ctx.recursive = true\n            ctx.with.push(args)\n        }\n    },\n    from: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push({ args, join: ', ' })\n        }\n    },\n    where: {\n        updateContext: (ctx, args) => {\n            ctx.whr.push(args)\n            ctx.target = ctx.whr\n        }\n    },\n    return: {\n        updateContext: (ctx, args) => {\n            ctx.ret.push(Array.isArray(args) ? args.map(normalKey) : args)\n        }\n    },\n    distinct: {\n        getter: true,\n        updateContext: ctx => {\n            ctx.distinct = []\n        }\n    },\n    groupBy: {\n        updateContext: (ctx, args) => {\n            ctx.grp.push(args)\n        }\n    },\n    having: {\n        updateContext: (ctx, args) => {\n            ctx.hav.push(args)\n            ctx.target = ctx.hav\n        }\n    },\n    union: {\n        updateContext: (ctx, args) => {\n            ctx.setop.push({ type: 'union', args })\n        }\n    },\n    unionAll: {\n        updateContext: (ctx, args) => {\n            ctx.setop.push({ type: 'union all', args })\n        }\n    },\n    intersect: {\n        updateContext: (ctx, args) => {\n            ctx.setop.push({ type: 'intersect', args })\n        }\n    },\n    intersectAll: {\n        updateContext: (ctx, args) => {\n            ctx.setop.push({ type: 'intersect all', args })\n        }\n    },\n    except: {\n        updateContext: (ctx, args) => {\n            ctx.setop.push({ type: 'except', args })\n        }\n    },\n    exceptAll: {\n        updateContext: (ctx, args) => {\n            ctx.setop.push({ type: 'except all', args })\n        }\n    },\n    orderBy: {\n        updateContext: (ctx, args) => {\n            ctx.ord.push(args)\n        }\n    },\n    limit: {\n        updateContext: (ctx, args) => {\n            ctx.limit = args\n        }\n    },\n    offset: {\n        updateContext: (ctx, args) => {\n            ctx.offset = args\n        }\n    },\n    join: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push((ctx.join = { args, join: ' join ' }))\n        }\n    },\n    leftJoin: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push((ctx.join = { args, join: ' left join ' }))\n        }\n    },\n    rightJoin: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push((ctx.join = { args, join: ' right join ' }))\n        }\n    },\n    fullJoin: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push((ctx.join = { args, join: ' full join ' }))\n        }\n    },\n    crossJoin: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push((ctx.join = { args, join: ' cross join ' }))\n        }\n    },\n    naturalJoin: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push((ctx.join = { args, join: ' natural join ' }))\n        }\n    },\n    naturalLeftJoin: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push((ctx.join = { args, join: ' natural left join ' }))\n        }\n    },\n    naturalRightJoin: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push((ctx.join = { args, join: ' natural right join ' }))\n        }\n    },\n    naturalFullJoin: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push((ctx.join = { args, join: ' natural full join ' }))\n        }\n    },\n    on: {\n        updateContext: (ctx, args) => {\n            const { join } = ctx\n            if (join.on) {\n                join.on.push(args)\n            } else {\n                ctx.target = join.on = [args]\n            }\n        }\n    },\n    using: {\n        updateContext: (ctx, args) => {\n            const { join } = ctx\n            if (join.using) {\n                join.using.push(args)\n            } else {\n                join.using = [args]\n            }\n        }\n    },\n    delete: {\n        // getter: true,\n        updateContext: ctx => {\n            ctx.type = 'delete'\n        }\n    },\n    insert: {\n        updateContext: (ctx, args) => {\n            ctx.type = 'insert'\n            ctx.insert = args\n        }\n    },\n    set: {\n        updateContext: (ctx, args) => {\n            ctx.type = 'update'\n            ctx.set.push(args)\n        }\n    },\n    express: {\n        updateContext: (ctx, args, count) => {\n            if (count.id === 0) {\n                count.id++\n                ctx.frm.push((ctx.join = { type: 'from', args, join: ', ' }))\n            } else if (count.id === 1) {\n                count.id++\n                ctx.whr.push(args)\n            } else if (count.id === 2) {\n                count.id++\n                ctx.ret.push(args)\n            } else throw Error('Invalid express call')\n        }\n    }\n}\n\nmodule.exports = methods;","const { mapJoin } = require('../../lib-util')\n\nmodule.exports = (ctx, array) => {\n  const keys = uniqueKeys(array)\n  return {\n    columns: columns(ctx, keys),\n    values: values(ctx, array, keys)\n  }\n}\n\n// gets unique keys in object array\nconst uniqueKeys = array => {\n  const keys = {}\n  for (const object of array) {\n    for (const key in object) {\n      keys[key] = true\n    }\n  }\n  return Object.keys(keys)\n}\n\n// gets column string from unique keys of object array\nconst columns = mapJoin((ctx, arg) => ctx.mapKey(arg))\n\n// gets values string of object array\nconst values = (ctx, source, keys) => {\n  let txt = 'values '\n  for (let i = 0; i < source.length; ++i) {\n    if (i !== 0) txt += ', '\n    txt += '('\n    const object = source[i]\n    for (let j = 0; j < keys.length; ++j) {\n      if (j !== 0) txt += ', '\n      txt += value(ctx, object[keys[j]])\n    }\n    txt += ')'\n  }\n  return txt\n}\n\nconst value = (ctx, arg) => {\n  if (arg === undefined) return 'default'\n  return ctx.build(arg)\n}\n","const {\n  isObject,\n  buildCall,\n  mapJoin,\n  objectMapJoin\n} = require('../../lib-util')\nconst valuesArray = require('../common/values_array')\n\nmodule.exports = ctx => {\n  if (ctx.with.length === 0) return\n  const txt = calls(ctx, ctx.with)\n  return txt && `with ${ctx.recursive ? 'recursive ' : ''}${txt}`\n}\n\nconst buildArg = (ctx, arg) => {\n  if (isObject(arg)) return buildObject(ctx, arg)\n  throw Error('Invalid with argument:', arg)\n}\n\nconst buildProperty = (ctx, key, value) => {\n  if (typeof value === 'function') {\n    return `${ctx.mapKey(key)} ${ctx.build(value)}`\n  }\n  if (Array.isArray(value)) {\n    const { columns, values } = valuesArray(ctx, value)\n    return `${ctx.mapKey(key)}(${columns}) (${values})`\n  }\n  throw Error(`Error: Invalid .with argument`)\n}\n\nconst buildObject = objectMapJoin(buildProperty)\nconst calls = mapJoin(buildCall(mapJoin(buildArg)))\n","const {\n  isObject,\n  buildCall,\n  mapJoin,\n  objectMapJoin\n} = require('../../lib-util')\n\nconst buildArg = (ctx, arg) => {\n  if (typeof arg === 'string') return arg\n  if (isObject(arg)) return buildObject(ctx, arg)\n  return ctx.build(arg)\n}\n\nconst buildProperty = (ctx, key, value) => {\n  const expression = typeof value === 'string' ? value : ctx.build(value)\n  return `${expression} ${ctx.mapKey(key)}`\n}\n\nconst buildObject = objectMapJoin(buildProperty)\nmodule.exports = mapJoin(buildCall(mapJoin(buildArg)))\n","const expressions = require('../common/expressions')\n\nmodule.exports = ctx =>\n  `select ${buildDistinct(ctx)}${expressions(ctx, ctx.ret) || '*'}`\n\nconst buildDistinct = ctx =>\n  ctx.distinct\n    ? ctx.distinct.length\n      ? // TODO: expressions shouldn't be aliasable here\n        `distinct on (${expressions(ctx, ctx.distinct)})`\n      : 'distinct'\n    : ''\n","const {\n  isTaggedTemplate,\n  buildTaggedTemplate,\n  isObject,\n  mapJoin,\n  objectMapJoin\n} = require('../../lib-util')\n\nconst buildCall = callbackfn => (ctx, args) =>\n  isTaggedTemplate(args)\n    ? `(${buildTaggedTemplate(ctx, args)})`\n    : callbackfn(ctx, args)\n\nconst buildArg = (ctx, arg) =>\n  isObject(arg) ? buildObject(ctx, arg) : ctx.build(arg)\n\nconst valuesList = mapJoin((ctx, arg) => ctx.build(arg))\n\nconst buildProperty = (ctx, key, value) => {\n  const name = ctx.mapKey(key)\n  if (value === null) return `(${name} is null)`\n  if (Array.isArray(value)) return `(${name} in (${valuesList(ctx, value)}))`\n  return `(${name} = ${ctx.build(value)})`\n}\n\nconst buildObject = objectMapJoin(buildProperty, ' and ')\nmodule.exports = mapJoin(buildCall(mapJoin(buildArg, ' and ')), ' and ')\n","const {\n  isObject,\n  buildCall,\n  mapJoin,\n  objectMapJoin\n} = require('../../lib-util')\nconst conditions = require('./conditions')\nconst valuesArray = require('./values_array')\n\nmodule.exports = (ctx, items, start = 0, end = items.length) => {\n  if (end > items.length) end = items.length\n  let txt = ''\n  for (let i = start; i < end; ++i) {\n    const item = items[i]\n    if (i !== start) txt += item.join\n    txt += fromItem(ctx, item.args)\n    if (item.on) txt += ` on ${conditions(ctx, item.on)}`\n    else if (item.using) txt += ` using (${using(ctx, item.using)})`\n  }\n  return txt\n}\n\nconst usingArg = (ctx, arg) => {\n  if (typeof arg === 'string') return arg\n  if (typeof arg === 'function') return ctx.build(arg)\n  throw Error('Error: Invalid .using arg')\n}\nconst using = mapJoin(buildCall(mapJoin(usingArg)))\n\nconst fromArg = (ctx, arg) => {\n  if (typeof arg === 'string') return arg\n  if (typeof arg === 'function') return ctx.build(arg)\n  if (isObject(arg)) return buildObject(ctx, arg)\n  throw Error('Error: Invalid .from argument:', arg)\n}\n\nconst buildProperty = (ctx, key, value) => {\n  if (typeof value === 'string') return `${value} ${ctx.mapKey(key)}`\n  if (typeof value === 'function')\n    return `${ctx.build(value)} ${ctx.mapKey(key)}`\n  if (Array.isArray(value)) {\n    const { columns, values } = valuesArray(ctx, value)\n    return `(${values}) ${ctx.mapKey(key)}(${columns})`\n  }\n  throw Error('Error: Invalid .from argument')\n}\n\nconst buildObject = objectMapJoin(buildProperty)\nconst fromItem = buildCall(mapJoin(fromArg))\n","const fromItems = require('../common/from_items')\n\nmodule.exports = ctx => {\n  const txt = fromItems(ctx, ctx.frm)\n  return txt && `from ${txt}`\n}\n","const conditions = require('../common/conditions')\n\nmodule.exports = ctx => {\n  if (ctx.whr.length === 0) return\n  const txt = conditions(ctx, ctx.whr)\n  return txt && 'where ' + txt\n}\n","const { isObject, buildCall, mapJoin, mapJoinWrap } = require('../../lib-util')\n\nmodule.exports = ctx => {\n  if (ctx.grp.length === 0) return\n  const txt = calls(ctx, ctx.grp)\n  return txt && `group by ${txt}`\n}\n\nconst buildArg = (ctx, arg) => {\n  if (typeof arg === 'string') return arg\n  if (typeof arg === 'function') return ctx.build(arg)\n  if (Array.isArray(arg)) return buildArrayArg(ctx, arg)\n  if (isObject(arg)) return buildObject(ctx, arg)\n  throw Error('Invalid order by argument:', arg)\n}\n\nconst buildArrayArg = mapJoinWrap(buildArg)\n\n// postgres only\n// clone of buildArg() without support for object args\nconst buildCubeOrRollupArg = (ctx, arg) => {\n  if (typeof arg === 'string') return arg\n  if (typeof arg === 'function') return ctx.build(arg)\n  if (Array.isArray(arg)) return buildCubeOrRollupArrayArg(ctx, arg)\n  throw Error('Invalid cube/rollup argument')\n}\n\n// postgres only\n// clone of buildArrayArg() without support for object args\nconst buildCubeOrRollupArrayArg = mapJoinWrap(buildCubeOrRollupArg)\n\n// postgres only\nconst buildObject = (ctx, obj) => {\n  const { type, args } = obj\n  if (type === 'rollup') {\n    return `rollup ${buildCubeOrRollupArg(ctx, args)}`\n  }\n  if (type === 'cube') {\n    return `cube ${buildCubeOrRollupArg(ctx, args)}`\n  }\n  if (type === 'grouping sets') {\n    return `grouping sets ${buildArg(ctx, args)}`\n  }\n  throw Error('Invalid group by argument')\n}\n\nconst calls = mapJoin(buildCall(mapJoin(buildArg)))\n","const conditions = require('../common/conditions')\n\nmodule.exports = ctx => {\n  if (ctx.hav.length === 0) return\n  const txt = conditions(ctx, ctx.hav)\n  return txt && 'having ' + txt\n}\n","module.exports = ctx => {\n  if (ctx.setop.length === 0) return\n  let txt = ''\n  let first = true\n  const { setop } = ctx\n  for (let i = 0; i < setop.length; ++i) {\n    const { type, args } = ctx.setop[i]\n    for (let j = 0; j < args.length; ++j) {\n      if (!first) {\n        txt += ' '\n      } else {\n        first = false\n      }\n      txt += `${type} ${ctx.build(args[j])}`\n    }\n  }\n  return txt\n}\n","const { isObject, buildCall, mapJoin } = require('../../lib-util')\n\nmodule.exports = ctx => {\n  if (ctx.ord.length === 0) return\n  const txt = calls(ctx, ctx.ord)\n  return txt && `order by ${txt}`\n}\n\nconst buildArg = (ctx, arg) => {\n  if (typeof arg === 'string') return arg\n  if (typeof arg === 'function') return ctx.build(arg)\n  if (isObject(arg)) return buildObject(ctx, arg)\n  throw Error('Invalid order by argument:', arg)\n}\n\nconst buildObject = (ctx, obj) => {\n  let txt = ''\n  const { by, sort, using, nulls } = obj\n  // by\n  if (typeof by === 'string') txt += by\n  else if (typeof by === 'function') txt += ctx.build(by)\n  else throw Error('Invalid order by property \"by\"')\n  // sort\n  if (sort) {\n    if (sort === 'desc') txt += ' desc'\n    else if (sort === 'asc') txt += ' asc'\n    else if (typeof sort === 'string') txt += ` using ${sort}`\n    else throw Error('Invalid order by property \"sort\"')\n  } else if (using) {\n    if (typeof using === 'string') txt += ` using ${using}`\n    else throw Error('Invalid order by property \"using\"')\n  }\n  // nulls\n  if (nulls === undefined);\n  else if (nulls === 'last') txt += ' nulls last'\n  else if (nulls === 'first') txt += ' nulls first'\n  else throw Error('Invalid order by property \"nulls\"')\n  // return\n  return txt\n}\n\nconst calls = mapJoin(buildCall(mapJoin(buildArg)))\n","const { isTaggedTemplate, buildTaggedTemplate } = require('../../lib-util')\n\nmodule.exports = (ctx, args) => {\n  if (isTaggedTemplate(args)) return buildTaggedTemplate(ctx, args)\n  const arg = args[0]\n  if (typeof arg === 'number') return ctx.parameterize(arg)\n  if (typeof arg === 'function') return ctx.build(arg)\n  throw Error('Error: Invalid limit/offset argument')\n}\n","const limitOffset = require('../common/limit_offset')\n\nmodule.exports = ctx => ctx.limit && `limit ${limitOffset(ctx, ctx.limit)}`\n","const limitOffset = require('../common/limit_offset')\n\nmodule.exports = ctx => ctx.offset && `offset ${limitOffset(ctx, ctx.offset)}`\n","const fromItems = require('../common/from_items')\n\nmodule.exports = ctx => {\n  const txt = fromItems(ctx, ctx.frm)\n  return txt && `delete from ${txt}`\n}\n","const expressions = require('../common/expressions')\n\nmodule.exports = ctx => {\n  if (!ctx.ret) return\n  const txt = expressions(ctx, ctx.ret)\n  return txt && `returning ${txt}`\n}\n","const { isTaggedTemplate, buildTaggedTemplate } = require('../../lib-util')\nconst fromItems = require('../common/from_items')\nconst valuesArray = require('../common/values_array')\n\nmodule.exports = ctx => {\n  const table = fromItems(ctx, ctx.frm)\n  const values = buildCall(ctx, ctx.insert)\n  return `insert into ${table}${values}`\n}\n\nconst buildCall = (ctx, args) => {\n  if (isTaggedTemplate(args)) return ' ' + buildTaggedTemplate(ctx, args)\n  if (args.length === 1 && args[0] === undefined) return ' default values'\n  if (Array.isArray(args[0])) return buildValuesArray(ctx, args[0])\n  if (typeof args[0] === 'function') return ' ' + ctx.build(args[0])\n  return buildValuesArray(ctx, args)\n}\n\nconst buildValuesArray = (ctx, array) => {\n  const { values, columns } = valuesArray(ctx, array)\n  return `(${columns}) ${values}`\n}\n","const fromItems = require('../common/from_items')\n\nmodule.exports = ctx => {\n  const txt = fromItems(ctx, ctx.frm)\n  return txt && `update ${txt}`\n}\n","const { buildCall, mapJoin, objectMapJoin } = require('../../lib-util')\n\nmodule.exports = ctx => {\n  if (!ctx.set) return\n  const txt = calls(ctx, ctx.set)\n  return txt && 'set ' + txt\n}\n\nconst buildProperty = (ctx, key, value) =>\n  `${ctx.mapKey(key)} = ${ctx.build(value)}`\n\nconst calls = mapJoin(buildCall(mapJoin(objectMapJoin(buildProperty))))\n","module.exports = {\n  wth: require('./with'),\n  select: require('./select'),\n  from: require('./from'),\n  where: require('./where'),\n  group: require('./group'),\n  having: require('./having'),\n  setop: require('./setop'),\n  order: require('./order'),\n  limit: require('./limit'),\n  offset: require('./offset'),\n  del: require('./delete'),\n  returning: require('./returning'),\n  insert: require('./insert'),\n  update: require('./update'),\n  set: require('./set')\n}\n","const {\n    wth,\n    select,\n    from,\n    where,\n    group,\n    having,\n    setop,\n    order,\n    limit,\n    offset,\n    del,\n    returning,\n    insert,\n    update,\n    set,\n} = require('./clauses')\n\nconst query = (...clauses) => ctx => {\n    let text = ''\n    for (const clause of clauses) {\n        const str = clause && clause(ctx)\n        if (str) {\n            if (text) text += ctx.separator\n            text += str\n        }\n    }\n    return { text, args: ctx.params, type: ctx.userType || ctx.type }\n}\n\nconst queries = {\n    select: query(\n        wth,\n        select,\n        from,\n        where,\n        group,\n        having,\n        setop,\n        order,\n        limit,\n        offset\n    ),\n    update: query(wth, update, set, where, returning),\n    delete: query(wth, del, where, returning),\n    insert: query(wth, insert, returning)\n}\n\nmodule.exports = { query, queries }","const conditions = require('./conditions')\nconst expressions = require('./expressions')\nconst fromItems = require('./from_items')\nconst limitOffset = require('./limit_offset')\nconst valuesArray = require('./values_array')\n\nmodule.exports = {\n  conditions,\n  expressions,\n  fromItems,\n  limitOffset,\n  valuesArray\n}\n","const methods = require('./methods')\nconst { query, queries } = require('./query')\nconst clauses = require('./clauses')\nconst common = require('./common')\n\nmodule.exports = {\n  methods,\n  query,\n  queries,\n  clauses,\n  common\n}","const { methods, queries, query, clauses, common } = require('../lib-sq')\n\nconst { fromItems, expressions } = common\nconst {\n  wth,\n  from,\n  where,\n  group,\n  having,\n  setop,\n  order,\n  limit,\n  offset,\n  returning,\n  set\n} = clauses\n\nconst postgresMethods = {\n  distinctOn: {\n    updateContext: (ctx, args) => {\n      if (ctx.distinct) {\n        ctx.distinct.push(args)\n      } else {\n        ctx.distinct = [args]\n      }\n    }\n  }\n}\n\n// SELECT supports .distinctOn(...expressions)\nconst select = ctx => {\n  let txt = 'select '\n  if (ctx.distinct) {\n    txt += 'distinct '\n    if (ctx.distinct.length) {\n      txt += `on (${expressions(ctx, ctx.distinct)}) `\n    }\n  }\n  txt += expressions(ctx, ctx.ret) || '*'\n  return txt\n}\n// DELETE: first .from call is used in the DELETE clause\n// subsequent .from calls are used in the USING clause\nconst del = ctx => {\n  const txt = fromItems(ctx, ctx.frm, 0, 1)\n  return txt && `delete from ${txt}`\n}\nconst using = ctx => {\n  const txt = fromItems(ctx, ctx.frm, 1)\n  return txt && `using ${txt}`\n}\n// UPDATE: first .from call is used in the UPDATE clause\n// subsequent .from calls are used in the FROM clause\nconst update = ctx => {\n  const txt = fromItems(ctx, ctx.frm, 0, 1)\n  return txt && `update ${txt}`\n}\nconst updateFrom = ctx => {\n  const txt = fromItems(ctx, ctx.frm, 1)\n  return txt && `from ${txt}`\n}\n\nmodule.exports = {\n  methods: { ...methods, ...postgresMethods },\n  queries: {\n    ...queries,\n    select: query(\n      wth,\n      select,\n      from,\n      where,\n      group,\n      having,\n      setop,\n      order,\n      limit,\n      offset\n    ),\n    delete: query(wth, del, using, where, returning),\n    update: query(wth, update, set, updateFrom, where, returning)\n  },\n  properties: {\n    rollup: {\n      value: (...args) => {\n        return {\n          type: 'rollup',\n          args\n        }\n      }\n    },\n    cube: {\n      value: (...args) => {\n        return {\n          type: 'cube',\n          args\n        }\n      }\n    },\n    groupingSets: {\n      value: (...args) => {\n        return {\n          type: 'grouping sets',\n          args\n        }\n      }\n    }\n  }\n}","const { buildTaggedTemplate } = require('../lib-util')\n\nconst dateToYYYYMMDD = d => [\n    d.getFullYear(),\n    ('0' + (d.getMonth() + 1)).slice(-2),\n    ('0' + d.getDate()).slice(-2)\n].join('-');\n\nconst build = (ctx, arg) => {\n    // compiled expression string\n    if (arg.exp) return arg.exp\n    // tagged template argument\n    if (arg.tag) return buildTaggedTemplate(ctx, arg.tag)\n    // expression, subquery or fragment argument\n    return ctx.build(arg.arg)\n}\n\nconst unaryPre = op => ({\n    minArgs: 1,\n    maxArgs: 1,\n    build: (ctx, args) => `(${op} ${build(ctx, args[0])})`\n})\n\nconst unaryPost = op => ({\n    minArgs: 1,\n    maxArgs: 1,\n    build: (ctx, args) => `(${build(ctx, args[0])} ${op})`\n})\n\nconst unaryFunction = op => ({\n    minArgs: 1,\n    maxArgs: 1,\n    build: (ctx, args) => `${op}(${build(ctx, args[0])})`\n})\n\nconst binary = op => ({\n    minArgs: 2,\n    maxArgs: 2,\n    build: (ctx, args) => `(${build(ctx, args[0])} ${op} ${build(ctx, args[1])})`\n})\n\nconst dateBinary = op => ({\n    minArgs: 2,\n    maxArgs: 2,\n    build: (ctx, args) => {\n        const inDate = args[1].arg;\n        if (typeof inDate.getMonth === 'function') {\n            args[1].arg = dateToYYYYMMDD(inDate);\n        }\n        return `date(${build(ctx, args[0])}, 'YYYY-MM-DD') ${op} ${build(ctx, args[1])}`\n    }\n})\n\n\nconst ternary = (op1, op2) => ({\n    minArgs: 3,\n    maxArgs: 3,\n    build: (ctx, args) =>\n        `(${build(ctx, args[0])} ${op1} ${build(ctx, args[1])} ${op2} ${build(\n            ctx,\n            args[2]\n        )})`\n})\n\nconst nary = op => ({\n    minArgs: 1,\n    maxArgs: Number.MAX_SAFE_INTEGER,\n    build: (ctx, args) => {\n        if (args.length === 1) return build(ctx, args[0])\n        let txt = '('\n        for (let i = 0; i < args.length; ++i) {\n            if (i !== 0) txt += ` ${op} `\n            txt += build(ctx, args[i])\n        }\n        return txt + ')'\n    }\n})\n\nconst naryFunction = fn => ({\n    minArgs: 1,\n    maxArgs: Number.MAX_SAFE_INTEGER,\n    build: (ctx, args) => {\n        let txt = `${fn}(`\n        for (let i = 0; i < args.length; ++i) {\n            if (i !== 0) txt += `, `\n            txt += build(ctx, args[i])\n        }\n        return txt + ')'\n    }\n})\n\nconst oneValue = {\n    minArgs: 1,\n    maxArgs: 1,\n    build: (ctx, args) => build(ctx, args[0])\n}\n\nconst compositeValue = {\n    minArgs: 1,\n    maxArgs: Number.MAX_SAFE_INTEGER,\n    build: (ctx, args) => {\n        if (args.length === 1) return build(ctx, args[0])\n        let txt = ''\n        for (let i = 0; i < args.length; ++i) {\n            if (i !== 0) txt += ', '\n            txt += build(ctx, args[i])\n        }\n        return args.length > 1 ? `(${txt})` : txt\n    }\n}\n\nconst buildValuesList = (ctx, values) => {\n    if (values.length === 0) throw Error('Error: .in operation values list empty')\n    let txt = '('\n    for (let i = 0; i < values.length; ++i) {\n        if (i !== 0) txt += ', '\n        txt += ctx.build(values[i])\n    }\n    return txt + ')'\n}\n\nconst membership = op => ({\n    minArgs: 2,\n    maxArgs: 2,\n    build: (ctx, [arg1, arg2]) =>\n        `(${build(ctx, arg1)} ${op} ${Array.isArray(arg2.arg)\n            ? buildValuesList(ctx, arg2.arg)\n            : build(ctx, arg2)\n        })`\n})\n\nconst quantifiedComparison = op => ({\n    minArgs: 2,\n    maxArgs: 2,\n    build: (ctx, args) => `(${build(ctx, args[0])} ${op}(${build(ctx, args[1])}))`\n})\n\nmodule.exports = {\n    build,\n    unaryFunction,\n    unaryPre,\n    unaryPost,\n    binary,\n    ternary,\n    nary,\n    naryFunction,\n    oneValue,\n    compositeValue,\n    membership,\n    quantifiedComparison,\n    dateBinary\n}\n","const {\n    unaryPre,\n    unaryPost,\n    unaryFunction,\n    binary,\n    ternary,\n    nary,\n    naryFunction,\n    oneValue,\n    compositeValue,\n    membership,\n    quantifiedComparison,\n    dateBinary\n} = require('./util')\n\n// value\nconst value = {\n    arg: compositeValue,\n    row: compositeValue,\n    unknown: oneValue,\n    boolean: oneValue,\n    number: oneValue,\n    string: oneValue,\n    array: oneValue,\n    json: oneValue,\n    table: oneValue\n}\n\n// boolean\nconst boolean = {\n    // logical\n    and: nary('and'),\n    or: nary('or'),\n    not: unaryFunction('not'),\n    // comparison\n    isTrue: unaryPost('is true'),\n    isNotTrue: unaryPost('is not true'),\n    isFalse: unaryPost('is false'),\n    isNotFalse: unaryPost('is not false'),\n    isUnknown: unaryPost('is unknown'),\n    isNotUnknown: unaryPost('is not unknown')\n}\n\n// comparison\nconst comparison = {\n    // binary comparison\n    eq: binary('='),\n    neq: binary('<>'),\n    lt: binary('<'),\n    gt: binary('>'),\n    lte: binary('<='),\n    gte: binary('>='),\n    // misc\n    between: ternary('between', 'and'),\n    isDistinctFrom: binary('is distinct from'),\n    isNotDistinctFrom: binary('is not distinct from'),\n    isNull: unaryPost('is null'),\n    isNotNull: unaryPost('is not null'),\n    in: membership('in'),\n    notIn: membership('not in'),\n    // quantified any\n    eqAny: quantifiedComparison('= any'),\n    neqAny: quantifiedComparison('<> any'),\n    ltAny: quantifiedComparison('< any'),\n    gtAny: quantifiedComparison('> any'),\n    lteAny: quantifiedComparison('<= any'),\n    gteAny: quantifiedComparison('>= any'),\n    // quantified all\n    eqAll: quantifiedComparison('= all'),\n    neqAll: quantifiedComparison('<> all'),\n    ltAll: quantifiedComparison('< all'),\n    gtAll: quantifiedComparison('> all'),\n    lteAll: quantifiedComparison('<= all'),\n    gteAll: quantifiedComparison('>= all')\n}\n\n// dates\nconst dateComparison = {\n    // dateEq: dateBinary('='),\n    // dateNeq: dateBinary('<>'),\n    dateLt: dateBinary('<'),\n    dateGt: dateBinary('>'),\n    dateLte: dateBinary('<='),\n    dateGte: dateBinary('>=')\n}\n\n// math\nconst math = {\n    add: binary('+'),\n    sub: binary('-'),\n    mul: binary('*'),\n    div: binary('/'),\n    mod: binary('%'),\n    exp: binary('%'),\n    sqrt: unaryPre('|/'),\n    cbrt: unaryPre('||/'),\n    fact: unaryPre('!!'),\n    abs: unaryFunction('abs')\n}\n\n// string\nconst string = {\n    like: binary('like'),\n    notLike: binary('not like')\n}\n\nconst array = {\n    unnest: naryFunction('unnest')\n}\n\nmodule.exports = {\n    ...value,\n    ...boolean,\n    ...comparison,\n    ...math,\n    ...array,\n    ...dateComparison,\n    ...string\n}\n","const expressions = require('../lib-expression')\n\nmodule.exports = { expressions }","// parameterizes given argument, function should be attached to ctx\nfunction parameterize(arg) {\n    if (arg === undefined) throw Error('Error: parameter is undefined')\n    return `$${this.params.push(arg)}`\n}\n\n/** Escapes an argument for use in UNPARAMETERIZED queries. NOT SAFE AT ALL. */\nconst escape = arg => {\n    if (arg === undefined) throw Error('Error: parameter is undefined')\n    if (arg === null) return 'null'\n    if (typeof arg === 'string') return escapeLiteral(arg)\n    if (typeof arg === 'number') return '' + arg\n    if (typeof arg === 'boolean') return '' + arg\n    if (typeof arg === 'object') {\n        if (Array.isArray(arg)) {\n            return `array[${arg.map(e => escape(e)).join(', ')}]`\n        } else {\n            return escapeLiteral(JSON.stringify(arg))\n        }\n    }\n    throw Error(`Invalid argument SQL argument of type '${typeof arg}'`, arg)\n}\n\n// from https://github.com/brianc/node-postgres/blob/eb076db5d47a29c19d3212feac26cd7b6d257a95/lib/client.js#L351\nconst escapeLiteral = str => {\n    let hasBackslash = false\n    let escaped = \"'\"\n    for (let i = 0; i < str.length; i++) {\n        const c = str[i]\n        if (c === \"'\") {\n            escaped += c + c\n        } else if (c === '\\\\') {\n            escaped += c + c\n            hasBackslash = true\n        } else {\n            escaped += c\n        }\n    }\n    escaped += \"'\"\n    if (hasBackslash === true) {\n        escaped = ' E' + escaped\n    }\n    return escaped\n}\n\nmodule.exports = {\n    parameterize,\n    escape\n}\n","const query = require('./query')\nconst expression = require('./expression')\nconst { parameterize, escape } = require('./parameterize')\n\nmodule.exports = {\n  query,\n  expression,\n  parameterize,\n  escape\n}","const core = require('./lib-core')\nconst dialect = require('./dialect-postgres')\n\nconst a = core({ dialect });\na.from = undefined;\nmodule.exports = a;\n","import _g from \"./g\";\nimport easyqb from 'easyqb';\nimport { SQW } from \"easyqb/types/sq\";\nimport { NewExpression } from \"easyqb/types/expression\";\nimport authFactory from \"./auth\";\nimport { POST_TYPES, DB_STATUS, Globals, EXECUTE_COUNT, FileFromURI, StatusResponse } from \"./types\";\nimport imageExtensions from \"./assets/image-extensions.json\";\nimport videoExtensions from \"./assets/video-extensions.json\";\n\ninterface IdbFactory {\n    db: (tableName?: string, userAssociatedRecordsOnly?: boolean) => SQW;\n    dbEventListener: (callback: (status?: DB_STATUS, queryType?: string, executeCount?: EXECUTE_COUNT, tableName?: string | null, returned?: any) => void) => () => void;\n    e: NewExpression;\n    setImage(recordKey: string, columnName: string, image: File | FileFromURI, tableName?: string): Promise<StatusResponse>;\n    setVideo(recordKey: string, columnName: string, video: File | FileFromURI, tableName?: string): Promise<StatusResponse>;\n    setFile(recordKey: string, columnName: string, file: File | FileFromURI, tableName?: string): Promise<StatusResponse>;\n}\n\ninterface IUploadFile {\n    recordKey: string;\n    columnName: string;\n    attachment: File | FileFromURI;\n    type: \"image\" | \"video\" | \"file\"\n    tableName?: string;\n}\n\nexport default function dbFactory(globals?: Globals): IdbFactory {\n    const g = globals || _g;\n    const { tokenPost, tokenPostAttachment } = authFactory(g);\n    let _listenerIndex = 0;\n\n    const _listeners: Record<string, (status?: DB_STATUS, queryType?: string, executeCount?: EXECUTE_COUNT, tableName?: string | null, returned?: any) => void> = {};\n\n    function _runListeners(...params: any[]) {\n        for (const cb of Object.values(_listeners)) {\n            cb(...params)\n        }\n    }\n\n    const dbEventListener = (callback: (status?: DB_STATUS, queryType?: string, executeCount?: EXECUTE_COUNT, tableName?: string | null, returned?: any) => void): () => void => {\n        const currKey = '' + _listenerIndex++;\n        _listeners[currKey] = callback;\n        return () => {\n            delete _listeners[currKey]\n        }\n    }\n\n    const allCallback = async (trx: any, tableName: string, userAssociatedRecordsOnly?: boolean): Promise<Record<string, any>[] | number[]> => {\n        trx.count = \"all\";\n        trx.tableName = tableName;\n        if (userAssociatedRecordsOnly) trx.userAssociatedRecordsOnly = userAssociatedRecordsOnly;\n        _runListeners(DB_STATUS.PENDING, trx.type, EXECUTE_COUNT.ALL, tableName !== \"untable\" ? tableName : null);\n        try {\n            const res = await tokenPost(POST_TYPES.EASY_QB, trx);\n            if (res.success) {\n                g.analyticsEnabled && g.analyticsEventsToTrack.db_all && g.analyticsEvent('db_all', { tableName: tableName !== \"untable\" ? tableName : undefined, type: trx.type });\n                _runListeners(DB_STATUS.SUCCESS, trx.type, EXECUTE_COUNT.ALL, tableName !== \"untable\" ? tableName : null, res.data);\n                return res.data;\n            } else {\n                _runListeners(DB_STATUS.ERROR, trx.type, EXECUTE_COUNT.ALL, tableName !== \"untable\" ? tableName : null);\n                return res;\n            }\n        } catch (error) {\n            console.warn(error)\n            _runListeners(DB_STATUS.ERROR, trx.type, EXECUTE_COUNT.ALL, tableName !== \"untable\" ? tableName : null);\n            return [];\n        }\n    }\n\n    const oneCallback = async (trx: any, tableName: string, userAssociatedRecordsOnly?: boolean): Promise<Record<string, any> | number> => {\n        trx.count = \"one\";\n        trx.tableName = tableName;\n        if (userAssociatedRecordsOnly) trx.userAssociatedRecordsOnly = userAssociatedRecordsOnly;\n        _runListeners(DB_STATUS.PENDING, trx.type, EXECUTE_COUNT.ONE, tableName !== \"untable\" ? tableName : null);\n        try {\n            const res = await tokenPost(POST_TYPES.EASY_QB, trx);\n            if (res.success) {\n                g.analyticsEnabled && g.analyticsEventsToTrack.db_one && g.analyticsEvent('db_one', { tableName: tableName !== \"untable\" ? tableName : undefined, type: trx.type });\n                _runListeners(DB_STATUS.SUCCESS, trx.type, EXECUTE_COUNT.ONE, tableName !== \"untable\" ? tableName : null, res.data);\n                return res.data;\n            } else {\n                _runListeners(DB_STATUS.ERROR, trx.type, EXECUTE_COUNT.ONE, tableName !== \"untable\" ? tableName : null);\n                return res;\n            }\n        } catch (error) {\n            console.warn(error)\n            _runListeners(DB_STATUS.ERROR, trx.type, EXECUTE_COUNT.ONE, tableName !== \"untable\" ? tableName : null);\n            return {};\n        }\n    }\n\n    const db = (tableName?: string, userAssociatedRecordsOnly?: boolean) => {\n        if (tableName && typeof tableName === \"string\") {\n            return easyqb({ allCallback, oneCallback, userAssociatedRecordsOnly, tableName: tableName.toUpperCase() })(tableName.replace(/[^0-9a-zA-Z]/g, '_').toUpperCase());\n        } else {\n            return easyqb({ allCallback, oneCallback, userAssociatedRecordsOnly, tableName: \"untable\" })(\"untable\");\n        }\n    }\n\n    const _setAttachment = async ({ recordKey, columnName, attachment, tableName, type }: IUploadFile): Promise<StatusResponse> => {\n        const ext: string = attachment.name.split(\".\").pop()!.toLowerCase();\n\n        // Similar pattern as db() naming\n        let fixedTableName: string;\n        if (tableName && typeof tableName === \"string\") {\n            fixedTableName = tableName.toUpperCase();\n        } else {\n            fixedTableName = \"untable\";\n        }\n\n        if (type === \"image\" && !imageExtensions.includes(ext)) {\n            return {\n                success: false,\n                message: \"Image files must have a proper image extension in the file name\"\n            };\n        }\n\n        if (type === \"video\" && !videoExtensions.includes(ext)) {\n            return {\n                success: false,\n                message: \"Video files must have a proper video extension in the file name\"\n            };\n        }\n\n        const formData = new FormData();\n\n        formData.append(\"file\", attachment as Blob);\n        formData.append(\"name\", attachment.name);\n\n        const customHeaders = {\n            'Eb-upload-type': type,\n            'Eb-column-name': columnName,\n            'Eb-record-id': recordKey,\n            'Eb-table-name': fixedTableName\n        }\n\n        try {\n            const res = await tokenPostAttachment(formData, customHeaders);\n            if (res.success) {\n                g.analyticsEnabled && g.analyticsEventsToTrack.db_one && g.analyticsEvent('db_one', { tableName: fixedTableName !== \"untable\" ? fixedTableName : undefined, type: \"update\" });\n                _runListeners(DB_STATUS.SUCCESS, \"update\", EXECUTE_COUNT.ONE, fixedTableName !== \"untable\" ? fixedTableName : null, res.data);\n            } else {\n                _runListeners(DB_STATUS.ERROR, \"update\", EXECUTE_COUNT.ONE, fixedTableName !== \"untable\" ? fixedTableName : null);\n            }\n            return {\n                message: res.data,\n                success: res.success\n            };\n        } catch (error) {\n            console.warn(error)\n            _runListeners(DB_STATUS.ERROR, \"update\", EXECUTE_COUNT.ONE, fixedTableName !== \"untable\" ? fixedTableName : null);\n            return {\n                message: \"\",\n                success: false,\n            };\n        }\n    }\n\n    const setImage = async (recordKey: string, columnName: string, image: File | FileFromURI, tableName?: string) => _setAttachment({\n        recordKey,\n        columnName,\n        tableName,\n        attachment: image,\n        type: \"image\"\n    });\n\n    const setVideo = async (recordKey: string, columnName: string, video: File | FileFromURI, tableName?: string) => _setAttachment({\n        recordKey,\n        columnName,\n        tableName,\n        attachment: video,\n        type: \"video\"\n    });\n\n    const setFile = async (recordKey: string, columnName: string, file: File | FileFromURI, tableName?: string) => _setAttachment({\n        recordKey,\n        columnName,\n        tableName,\n        attachment: file,\n        type: \"file\"\n    });\n\n    return {\n        db,\n        dbEventListener,\n        e: easyqb().e,\n        setImage,\n        setFile,\n        setVideo\n    }\n}\n","function t(){const t=this[d],e=t.target;let o,r,n;for(e.reverse(),o=0,r=e.length;o<r;o++)if((n=e[o])&&\"object\"==typeof n){const i=n[d];i&&(i.ownKey=o)}var s=[new O(h,[],void 0,void 0,this)];return j(t,s),this}function e(t){const e=this[d],o=e.target;let r,n,s;for(o.sort(t),r=0,n=o.length;r<n;r++)if((s=o[r])&&\"object\"==typeof s){const i=s[d];i&&(i.ownKey=r)}return t=[new O(a,[],void 0,void 0,this)],j(e,t),this}function o(t,n,s){const i=this[d],h=i.target,a=[],e=h.length,l=h.slice(0);if(n=void 0===n?0:n<0?Math.max(e+n,0):Math.min(n,e),s=void 0===s?e:s<0?Math.max(e+s,0):Math.min(s,e),n<e&&n<s){h.fill(t,n,s);let r;for(let t=n,e,o;t<s;t++)e=h[t],h[t]=m(e,t,i),t in l?(o=l[t],o&&\"object\"==typeof o&&(r=o[d],r&&(o=r.detach())),a.push(new O(v,[t],h[t],o,this))):a.push(new O(w,[t],h[t],void 0,this));j(i,a)}return this}function r(n,t,e){const s=this[d],i=s.target,o=i.length;n=n<0?Math.max(o+n,0):n,t=void 0===t?0:t<0?Math.max(o+t,0):Math.min(t,o),e=void 0===e?o:e<0?Math.max(o+e,0):Math.min(e,o);var h=Math.min(e-t,o-n);if(n<o&&n!==t&&0<h){const a=i.slice(0),l=[];i.copyWithin(n,t,e);for(let t=n,e,o,r;t<n+h;t++)e=i[t],e&&\"object\"==typeof e&&(e=m(e,t,s),i[t]=e),o=a[t],o&&\"object\"==typeof o&&(r=o[d],r&&(o=r.detach())),\"object\"!=typeof e&&e===o||l.push(new O(v,[t],e,o,this));j(s,l)}return this}const w=\"insert\",v=\"update\",g=\"delete\",h=\"reverse\",a=\"shuffle\",d=Symbol.for(\"object-observer-meta-key-0\"),n={async:1},s={observe:{value:function(e,t){if(\"function\"!=typeof e)throw new Error(`observer MUST be a function, got '${e}'`);const o=this[d].observers;o.some(t=>t[0]===e)?console.warn(\"observer may be bound to an observable only once; will NOT rebind\"):o.push([e,(t=>{if(!t||\"object\"!=typeof t)return null;const e={},o=[];for(var[r,n]of Object.entries(t))if(\"path\"===r){if(\"string\"!=typeof n||\"\"===n)throw new Error('\"path\" option, if/when provided, MUST be a non-empty string');e[r]=n}else if(\"pathsOf\"===r){if(t.path)throw new Error('\"pathsOf\" option MAY NOT be specified together with \"path\" option');if(\"string\"!=typeof n)throw new Error('\"pathsOf\" option, if/when provided, MUST be a string (MAY be empty)');e[r]=t.pathsOf.split(\".\").filter(Boolean)}else if(\"pathsFrom\"===r){if(t.path||t.pathsOf)throw new Error('\"pathsFrom\" option MAY NOT be specified together with \"path\"/\"pathsOf\" option/s');if(\"string\"!=typeof n||\"\"===n)throw new Error('\"pathsFrom\" option, if/when provided, MUST be a non-empty string');e[r]=n}else o.push(r);if(o.length)throw new Error(`'${o.join(\", \")}' is/are not a valid observer option/s`);return e})(t)])}},unobserve:{value:function(){const o=this[d].observers;let r=o.length;if(r){let e=arguments.length;if(e)for(;e--;){let t=r;for(;t--;)o[t][0]===arguments[e]&&(o.splice(t,1),r--)}else o.splice(0)}}}},i=(t,e)=>{const o=Object.defineProperties({},s);o[d]=e;for(const r in t)o[r]=m(t[r],r,e);return o},l=(e,o)=>{var r=e.length;const n=Object.defineProperties(new Array(r),s);n[d]=o;for(let t=0;t<r;t++)n[t]=m(e[t],t,o);return n},f=(t,e)=>(Object.defineProperties(t,s),t[d]=e,t),c=(t,e)=>{if(!t)return e;let o=e;if(t.path){const r=t.path;o=e.filter(t=>t.path.join(\".\")===r)}else if(t.pathsOf){const n=t.pathsOf,s=n.join(\".\");o=e.filter(t=>(t.path.length===n.length+1||t.path.length===n.length&&(t.type===h||t.type===a))&&t.path.join(\".\").startsWith(s))}else if(t.pathsFrom){const i=t.pathsFrom;o=e.filter(t=>t.path.join(\".\").startsWith(i))}return o},p=(e,o)=>{try{e(o)}catch(t){console.error(`failed to notify listener ${e} with `+o,t)}},u=function(){var t,e,o=this.batches;this.batches=null;for([t,e]of o)p(t,e)},j=(t,e)=>{let o=t,r,n,s,i,h;var a=e.length;do{for(r=o.observers,h=r.length;h--;)if([n,s]=r[h],(i=c(s,e)).length)if(o.options.async){o.batches||(o.batches=[],queueMicrotask(u.bind(o)));let t;for(const l of o.batches)if(l[0]===n){t=l;break}t||(t=[n,[]],o.batches.push(t)),Array.prototype.push.apply(t[1],i)}else p(n,i);if(o.parent){const f=new Array(a);for(let t=0;t<a;t++)f[t]={...e[t]},f[t].path=[o.ownKey,...f[t].path];e=f,o=o.parent}else o=null}while(o)},m=(t,e,o)=>t&&\"object\"==typeof t?Array.isArray(t)?new A({target:t,ownKey:e,parent:o}).proxy:ArrayBuffer.isView(t)?new K({target:t,ownKey:e,parent:o}).proxy:t instanceof Date?t:new M({target:t,ownKey:e,parent:o}).proxy:t,y={pop:function(){const t=this[d],e=t.target,o=e.length-1;let r=e.pop();if(r&&\"object\"==typeof r){const s=r[d];s&&(r=s.detach())}var n=[new O(g,[o],void 0,r,this)];return j(t,n),r},push:function(){const e=this[d],o=e.target,r=arguments.length,n=new Array(r),s=o.length;for(let t=0;t<r;t++)n[t]=m(arguments[t],s+t,e);var t=Reflect.apply(o.push,o,n);const i=[];for(let t=s,e=o.length;t<e;t++)i[t-s]=new O(w,[t],o[t],void 0,this);return j(e,i),t},shift:function(){const t=this[d],e=t.target;let o,r,n,s,i;for(o=e.shift(),o&&\"object\"==typeof o&&(i=o[d],i&&(o=i.detach())),r=0,n=e.length;r<n;r++)(s=e[r])&&\"object\"==typeof s&&(i=s[d],i&&(i.ownKey=r));var h=[new O(g,[0],void 0,o,this)];return j(t,h),o},unshift:function(){const e=this[d],r=e.target,o=arguments.length,n=new Array(o);for(let t=0;t<o;t++)n[t]=m(arguments[t],t,e);var t=Reflect.apply(r.unshift,r,n);for(let t=0,e=r.length,o;t<e;t++)if((o=r[t])&&\"object\"==typeof o){const h=o[d];h&&(h.ownKey=t)}var s=n.length;const i=new Array(s);for(let t=0;t<s;t++)i[t]=new O(w,[t],r[t],void 0,this);return j(e,i),t},reverse:t,sort:e,fill:o,copyWithin:r,splice:function(){const e=this[d],o=e.target,r=arguments.length,n=new Array(r),t=o.length;for(let t=0;t<r;t++)n[t]=m(arguments[t],t,e);const s=0===r?0:n[0]<0?t+n[0]:n[0],i=r<2?t-s:n[1],h=Math.max(r-2,0),a=Reflect.apply(o.splice,o,n),l=o.length;let f;for(let t=0,e;t<l;t++)(e=o[t])&&\"object\"==typeof e&&(f=e[d],f&&(f.ownKey=t));let c,p,u;for(c=0,p=a.length;c<p;c++)(u=a[c])&&\"object\"==typeof u&&(f=u[d],f&&(a[c]=f.detach()));const y=[];let b;for(b=0;b<i;b++)b<h?y.push(new O(v,[s+b],o[s+b],a[b],this)):y.push(new O(g,[s+b],void 0,a[b],this));for(;b<h;b++)y.push(new O(w,[s+b],o[s+b],void 0,this));return j(e,y),a}},b={reverse:t,sort:e,fill:o,copyWithin:r,set:function(t,e){const o=this[d],r=o.target,n=t.length,s=r.slice(0);e=e||0,r.set(t,e);const i=new Array(n);for(let t=e;t<n+e;t++)i[t-e]=new O(v,[t],r[t],s[t],this);j(o,i)}};class O{constructor(t,e,o,r,n){this.type=t,this.path=e,this.value=o,this.oldValue=r,this.object=n}}class x{constructor(t,e){var{target:o,parent:r,ownKey:n}=t;r&&void 0!==n?(this.parent=r,this.ownKey=n):(this.parent=null,this.ownKey=null);o=e(o,this);this.observers=[],this.revocable=Proxy.revocable(o,this),this.proxy=this.revocable.proxy,this.target=o,this.options=this.processOptions(t.options)}processOptions(t){if(t){if(\"object\"!=typeof t)throw new Error(`Observable options if/when provided, MAY only be an object, got '${t}'`);const e=Object.keys(t).filter(t=>!(t in n));if(e.length)throw new Error(`'${e.join(\", \")}' is/are not a valid Observable option/s`);return Object.assign({},t)}return{}}detach(){return this.parent=null,this.target}set(t,e,o){let r=t[e];if(o!==r){o=m(o,e,this);if(t[e]=o,r&&\"object\"==typeof r){const n=r[d];n&&(r=n.detach())}o=void 0===r?[new O(w,[e],o,void 0,this.proxy)]:[new O(v,[e],o,r,this.proxy)];j(this,o)}return!0}deleteProperty(t,e){let o=t[e];if(delete t[e],o&&\"object\"==typeof o){const r=o[d];r&&(o=r.detach())}e=[new O(g,[e],void 0,o,this.proxy)];return j(this,e),!0}}class M extends x{constructor(t){super(t,i)}}class A extends x{constructor(t){super(t,l)}get(t,e){return y[e]||t[e]}}class K extends x{constructor(t){super(t,f)}get(t,e){return b[e]||t[e]}}const E=Object.freeze({from:(t,e)=>{if(t&&\"object\"==typeof t){if(t[d])return t;if(Array.isArray(t))return new A({target:t,ownKey:null,parent:null,options:e}).proxy;if(ArrayBuffer.isView(t))return new K({target:t,ownKey:null,parent:null,options:e}).proxy;if(t instanceof Date)throw new Error(t+\" found to be one of a non-observable types\");return new M({target:t,ownKey:null,parent:null,options:e}).proxy}throw new Error(\"observable MAY ONLY be created from a non-null object\")},isObservable:t=>!(!t||!t[d])}),S=Symbol(\"callback-key\"),k=Symbol(\"targets-key\");class T{constructor(t){this[S]=t,this[k]=new Set,Object.freeze(this)}observe(t,e){const o=E.from(t);return o.observe(this[S],e),this[k].add(o),o}unobserve(t){t.unobserve(this[S]),this[k].delete(t)}disconnect(){for(const t of this[k])t.unobserve(this[S]);this[k].clear()}}export{E as Observable,T as ObjectObserver};","import React, { useState, useEffect, Fragment, useRef } from \"react\";\nimport EasybaseContext from \"./EasybaseContext\";\nimport deepEqual from \"fast-deep-equal\";\nimport {\n    EasybaseProviderProps,\n    ContextValue,\n    UseReturnValue,\n    POST_TYPES,\n    FrameConfiguration,\n    FileFromURI,\n    AddRecordOptions,\n    UpdateRecordAttachmentOptions,\n    StatusResponse,\n    ConfigureFrameOptions,\n    DeleteRecordOptions,\n    DB_STATUS,\n    EXECUTE_COUNT\n} from \"./types/types\";\nimport imageExtensions from \"./assets/image-extensions.json\";\nimport videoExtensions from \"./assets/video-extensions.json\";\nimport utilsFactory from \"../node_modules/easybasejs/src/EasybaseProvider/utils\";\nimport tableFactory from \"../node_modules/easybasejs/src/EasybaseProvider/table\";\nimport authFactory from \"../node_modules/easybasejs/src/EasybaseProvider/auth\";\nimport dbFactory from \"../node_modules/easybasejs/src/EasybaseProvider/db\";\nimport { gFactory } from \"../node_modules/easybasejs/src/EasybaseProvider/g\";\nimport { Observable } from \"object-observer\";\nimport { SQW } from \"easyqb/types/sq\";\nimport fetch from 'cross-fetch';\nconst cache = require(\"./cache\");\n\nlet _isFrameInitialized: boolean = true;\n\nlet _frameConfiguration: FrameConfiguration = {\n    offset: 0,\n    limit: 0\n};\n\nlet _effect: React.EffectCallback = () => () => { };\nlet _signInCallback: () => void;\n\nconst _observedChangeStack: Record<string, any>[] = [];\nlet _recordIdMap: WeakMap<Record<string, any>, \"string\"> = new WeakMap();\nlet _proxyRecordMap: WeakMap<Record<string, any>, \"string\"> = new WeakMap();\n\nconst EasybaseProvider = ({ children, ebconfig, options }: EasybaseProviderProps) => {\n    if (typeof ebconfig !== 'object' || ebconfig === null || ebconfig === undefined) {\n        console.error(\"No ebconfig object passed. do `import ebconfig from \\\"./ebconfig.js\\\"` and pass it to the Easybase provider\");\n        return (\n            <Fragment>\n                {children}\n            </Fragment>\n        );\n    } else if (!ebconfig.integration) {\n        console.error(\"Invalid ebconfig object passed. Download ebconfig.json from Easybase.io and try again.\");\n        return (\n            <Fragment>\n                {children}\n            </Fragment>\n        );\n    }\n\n    const [mounted, setMounted] = useState<boolean>(false);\n    const [isSyncing, setIsSyncing] = useState<boolean>(false);\n    const [userSignedIn, setUserSignedIn] = useState<boolean>(false);\n\n    const [_frame, _setFrame] = useState<Record<string, any>[]>([]);\n    const [_observableFrame, _setObservableFrame] = useState<any>({\n        observe: () => { },\n        unobserve: () => { }\n    });\n\n    const _ranSignInCallback = useRef<boolean>(false);\n\n    // TODO: useRef vs useState({})\n    const g = useRef(gFactory({ ebconfig, options })).current;\n\n    const {\n        initAuth,\n        tokenPost,\n        tokenPostAttachment,\n        signUp,\n        setUserAttribute,\n        getUserAttributes,\n        resetUserPassword,\n        signIn,\n        signOut,\n        forgotPassword,\n        forgotPasswordConfirm,\n        userID\n    } = useRef(authFactory(g)).current;\n\n    const { log } = useRef(utilsFactory(g)).current;\n\n    const {\n        Query,\n        fullTableSize,\n        tableTypes\n    } = useRef(tableFactory(g)).current;\n\n    const {\n        db,\n        dbEventListener,\n        e,\n        setFile,\n        setImage,\n        setVideo\n    } = useRef(dbFactory(g)).current;\n\n    useEffect(() => {\n        const mount = async () => {\n            // eslint-disable-next-line dot-notation\n            const isIE = typeof document !== 'undefined' && !!document['documentMode'];\n\n            if (isIE) {\n                console.error(\"EASYBASE â€” easybase-react does not support Internet Explorer. Please use a different browser.\");\n            }\n\n            g.instance = (typeof navigator !== 'undefined' && navigator.product === 'ReactNative') ? \"React Native\" : \"React\";\n\n            if (options?.googleAnalyticsId) {\n                if (options.googleAnalyticsId.startsWith(\"G-\")) {\n                    if (g.instance === \"React\") {\n                        const { GA4React } = await import('ga-4-react');\n                        const ga4ReactLoader = new GA4React(options.googleAnalyticsId);\n                        try {\n                            const ga4React = await ga4ReactLoader.initialize();\n                            g.analyticsEvent = (eventTitle: string, params?: Record<string, any>) => ga4React.gtag('event', eventTitle, params);\n                            g.analyticsIdentify = (hashedUserId: string) => ga4React.gtag('config', options.googleAnalyticsId, { user_id: hashedUserId });\n                            g.analyticsEnabled = true;\n                            if (window.location.hash) {\n                                // Using hash router - https://github.com/unrealmanu/ga-4-react/issues/15\n                                window.onhashchange = () => {\n                                    ga4React.pageview(window.location.hash);\n                                };\n                            }\n                        } catch (error) {\n                            log(\"Analytics initialization error: \", error)\n                        }\n                    } else if (g.instance === \"React Native\") {\n                        if (options.googleAnalyticsSecret) {\n                            const genUUID = () => {\n                                // https://www.w3resource.com/javascript-exercises/javascript-math-exercise-23.php\n                                let dt = new Date().getTime();\n                                const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n                                    const r = (dt + Math.random() * 16) % 16 | 0;\n                                    dt = Math.floor(dt / 16);\n                                    return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n                                });\n                                return uuid;\n                            }\n\n                            let _userIdHash: string;\n                            const _mockDeviceId = genUUID();\n\n                            // Mocking a 'pageview'\n                            fetch(`https://www.google-analytics.com/mp/collect?measurement_id=${options.googleAnalyticsId}&api_secret=${options.googleAnalyticsSecret}`, {\n                                method: \"POST\",\n                                body: JSON.stringify({\n                                    client_id: _mockDeviceId,\n                                    events: [{ name: 'select_content' }]\n                                })\n                            });\n\n                            g.analyticsEvent = (eventTitle: string, params?: Record<string, any>) => fetch(`https://www.google-analytics.com/mp/collect?measurement_id=${options.googleAnalyticsId}&api_secret=${options.googleAnalyticsSecret}`, {\n                                method: \"POST\",\n                                body: JSON.stringify({\n                                    client_id: _mockDeviceId,\n                                    user_id: _userIdHash,\n                                    events: [{\n                                        name: eventTitle,\n                                        params\n                                    }]\n                                })\n                            });\n                            g.analyticsIdentify = (hashedUserId: string) => { _userIdHash = hashedUserId };\n                            g.analyticsEnabled = true;\n                        } else {\n                            console.error(\"EASYBASE â€” React Native analytics requires the presence of 'googleAnalyticsSecret'. To create a new secret, navigate in the Google Analytics UI to: Admin > Data Streams > choose your stream > Measurement Protocol > Create\");\n                        }\n                    }\n                } else if (options.googleAnalyticsId.startsWith(\"UA-\")) {\n                    console.error(\"EASYBASE â€” Detected Universal Analytics tag in googleAnalyticsId parameter. This version is not supported â€“Â please update to Google Analytics 4.\\nhttps://support.google.com/analytics/answer/9744165?hl=en\");\n                } else {\n                    console.error(\"EASYBASE â€” Unknown googleAnalyticsId version parameter. Please use Google Analytics 4.\\nhttps://support.google.com/analytics/answer/9744165?hl=en\");\n                }\n            }\n\n            if (g.ebconfig.tt && g.ebconfig.integration.split(\"-\")[0].toUpperCase() !== \"PROJECT\") {\n                const t1 = Date.now();\n                log(\"mounting...\");\n                await initAuth();\n                const res = await tokenPost(POST_TYPES.VALID_TOKEN);\n                const elapsed = Date.now() - t1;\n                if (res.success) {\n                    log(\"Valid auth initiation in \" + elapsed + \"ms\");\n                    setMounted(true);\n                }\n            } else {\n                g.mounted = true; // Bypass initAuth()\n\n                const cookieName = g.ebconfig.integration.slice(-10);\n\n                const {\n                    cacheToken,\n                    cacheRefreshToken,\n                    cacheSession\n                } = await cache.getCacheTokens(cookieName);\n\n                if (cacheRefreshToken) {\n                    g.token = cacheToken;\n                    g.refreshToken = cacheRefreshToken;\n                    g.session = +cacheSession;\n\n                    const fallbackMount = setTimeout(() => { setMounted(true) }, 2500);\n\n                    const [refreshTokenRes, { hash }, { fromUtf8 }] = await Promise.all([\n                        tokenPost(POST_TYPES.REQUEST_TOKEN, {\n                            refreshToken: g.refreshToken,\n                            token: g.token,\n                            getUserID: true\n                        }),\n                        import('fast-sha256'),\n                        import('@aws-sdk/util-utf8-browser')\n                    ])\n\n                    if (refreshTokenRes.success) {\n                        clearTimeout(fallbackMount);\n                        g.token = refreshTokenRes.data.token;\n                        g.userID = refreshTokenRes.data.userID;\n                        if (g.analyticsEnabled && g.analyticsEventsToTrack.login) {\n                            const hashOut = hash(fromUtf8(g.GA_USER_ID_SALT + refreshTokenRes.data.userID));\n                            const hexHash = Array.prototype.map.call(hashOut, x => ('00' + x.toString(16)).slice(-2)).join('');\n                            g.analyticsIdentify(hexHash);\n                            g.analyticsEvent('login', { method: \"Easybase\" });\n                        }\n                        await cache.setCacheTokens(g, cookieName);\n                        setUserSignedIn(true);\n                    } else {\n                        cache.clearCacheTokens(cookieName);\n                    }\n                }\n\n                setMounted(true);\n            }\n        }\n\n        mount();\n    }, []);\n\n    const useFrameEffect = (effect: React.EffectCallback) => {\n        _effect = effect;\n    };\n\n    useEffect(() => {\n        if (userSignedIn === true && _ranSignInCallback.current === false && _signInCallback !== undefined) {\n            _signInCallback();\n            _ranSignInCallback.current = true;\n        }\n    }, [userSignedIn])\n\n    const onSignIn = (callback: () => void) => {\n        _signInCallback = callback;\n\n        if (userSignedIn === true && _ranSignInCallback.current === false && _signInCallback !== undefined) {\n            _signInCallback();\n            _ranSignInCallback.current = true;\n        }\n    }\n\n    useEffect(() => {\n        _observableFrame.observe((allChanges: any[]) => {\n            allChanges.forEach((change: any) => {\n                _observedChangeStack.push({\n                    type: change.type,\n                    path: change.path,\n                    value: change.value,\n                    _id: _recordIdMap.get(_frame[Number(change.path[0])])\n                    // Not bringing change.object or change.oldValue\n                });\n                log(JSON.stringify({\n                    type: change.type,\n                    path: change.path,\n                    value: change.value,\n                    _id: _recordIdMap.get(_frame[Number(change.path[0])])\n                    // Not bringing change.object or change.oldValue\n                }))\n            });\n        });\n\n        _proxyRecordMap = new WeakMap();\n        _frame.forEach((_: any, i: number) => _proxyRecordMap.set(_observableFrame[i], \"\" + i as any))\n\n        _effect(); // call useFrameEffect\n    }, [_observableFrame]);\n\n    useEffect(() => {\n        _observableFrame.unobserve();\n        _setObservableFrame(Observable.from(_frame));\n    }, [_frame]);\n\n    function Frame(): Record<string, any>[];\n    function Frame(index: number): Record<string, any>;\n    function Frame(index?: number): Record<string, any>[] | Record<string, any> {\n        if (typeof index === \"number\") {\n            return _observableFrame[index];\n        } else {\n            return _observableFrame;\n        }\n    }\n\n    const _recordIDExists = (record: Record<string, any>): Boolean => !!_recordIdMap.get(record) || !!_recordIdMap.get(_getRawRecordFromProxy(record) || {});\n    const _getRawRecordFromProxy = (proxyRecord: Record<string, any>): Record<string, any> | undefined => _proxyRecordMap.get(proxyRecord) ? _frame[+_proxyRecordMap.get(proxyRecord)!] : undefined\n\n    const configureFrame = (options: ConfigureFrameOptions): StatusResponse => {\n        _frameConfiguration = { ..._frameConfiguration };\n\n        if (options.limit !== undefined) _frameConfiguration.limit = options.limit;\n        if (options.offset !== undefined && options.offset >= 0) _frameConfiguration.offset = options.offset;\n        if (options.tableName !== undefined) _frameConfiguration.tableName = options.tableName;\n\n        _isFrameInitialized = false;\n        return {\n            message: \"Successfully configured frame. Run sync() for changes to be shown in frame\",\n            success: true\n        }\n    }\n\n    const currentConfiguration = (): FrameConfiguration => ({ ..._frameConfiguration });\n\n    const addRecord = async (options: AddRecordOptions): Promise<StatusResponse> => {\n        const defaultValues: AddRecordOptions = {\n            insertAtEnd: false,\n            newRecord: {},\n            tableName: undefined\n        }\n\n        const fullOptions: AddRecordOptions = { ...defaultValues, ...options };\n\n        try {\n            const res = await tokenPost(POST_TYPES.SYNC_INSERT, fullOptions);\n            return {\n                message: res.data,\n                success: res.success\n            }\n        } catch (err: any) {\n            console.error(\"Easybase Error: addRecord failed \", err);\n            return {\n                message: \"Easybase Error: addRecord failed \" + err,\n                success: false,\n                errorCode: err\n            }\n        }\n    }\n\n    const deleteRecord = async (options: DeleteRecordOptions): Promise<StatusResponse> => {\n        const _frameRecord = _getRawRecordFromProxy(options.record) || _frame.find(ele => deepEqual(ele, options.record));\n\n        if (_frameRecord && _recordIdMap.get(_frameRecord)) {\n            const res = await tokenPost(POST_TYPES.SYNC_DELETE, {\n                _id: _recordIdMap.get(_frameRecord),\n                tableName: options.tableName\n            });\n            return {\n                success: res.success,\n                message: res.data\n            }\n        } else {\n            try {\n                const res = await tokenPost(POST_TYPES.SYNC_DELETE, {\n                    record: options.record,\n                    tableName: options.tableName\n                });\n                return {\n                    success: res.success,\n                    message: res.data\n                }\n            } catch (error: any) {\n                console.error(\"Easybase Error: deleteRecord failed \", error);\n                return {\n                    success: false,\n                    message: \"Easybase Error: deleteRecord failed \" + error,\n                    errorCode: error.errorCode || undefined\n                }\n            }\n        }\n    }\n\n    // Only allow the deletion of one element at a time\n    // First handle shifting of the array size. Then iterate\n    const sync = async (): Promise<StatusResponse> => {\n        const _realignFrames = (newData: Record<string, any>[]) => {\n            let isNewDataTheSame = true;\n\n            if (newData.length !== _frame.length) {\n                isNewDataTheSame = false;\n            } else {\n                for (let i = 0; i < newData.length; i++) {\n                    const newDataNoId = { ...newData[i] };\n                    delete newDataNoId._id;\n                    if (!deepEqual(newDataNoId, _frame[i])) {\n                        isNewDataTheSame = false;\n                        break;\n                    }\n                }\n            }\n\n            if (!isNewDataTheSame) {\n                _recordIdMap = new WeakMap();\n                _frame.length = newData.length;\n\n                newData.forEach((currNewEle, i) => {\n                    _frame[i] = currNewEle;\n                    _recordIdMap.set(currNewEle, currNewEle._id);\n                    delete currNewEle._id;\n                });\n                _setFrame([..._frame]);\n            }\n        }\n\n        if (isSyncing) {\n            return {\n                success: false,\n                message: \"Easybase Error: the provider is currently syncing, use 'await sync()' before calling sync() again\"\n            };\n        }\n        setIsSyncing(true);\n\n        if (_isFrameInitialized) {\n            if (_observedChangeStack.length > 0) {\n                log(\"Stack change: \", _observedChangeStack);\n                const res = await tokenPost(POST_TYPES.SYNC_STACK, {\n                    stack: _observedChangeStack,\n                    ..._frameConfiguration\n                });\n                if (res.success) {\n                    _observedChangeStack.length = 0;\n                }\n            }\n        }\n\n        try {\n            const res = await tokenPost(POST_TYPES.GET_FRAME, _frameConfiguration);\n\n            // Check if the array received from db is the same as frame\n            // If not, update it and send useFrameEffect\n\n            if (res.success === false) {\n                console.error(res.data);\n                setIsSyncing(false);\n                return {\n                    success: false,\n                    message: \"\" + res.data\n                }\n            } else {\n                _isFrameInitialized = true;\n                _realignFrames(res.data);\n                setIsSyncing(false);\n                return {\n                    message: 'Success. Call frame for data',\n                    success: true\n                }\n            }\n        } catch (error: any) {\n            console.error(\"Easybase Error: get failed \", error);\n            setIsSyncing(false);\n            return {\n                success: false,\n                message: \"Easybase Error: get failed \" + error,\n                errorCode: error.errorCode || undefined\n            }\n        }\n    }\n\n    const updateRecordImage = async (options: UpdateRecordAttachmentOptions): Promise<StatusResponse> => {\n        const res = await _updateRecordAttachment(options, \"image\");\n        return res;\n    }\n    const updateRecordVideo = async (options: UpdateRecordAttachmentOptions): Promise<StatusResponse> => {\n        const res = await _updateRecordAttachment(options, \"video\");\n        return res;\n    }\n    const updateRecordFile = async (options: UpdateRecordAttachmentOptions): Promise<StatusResponse> => {\n        const res = await _updateRecordAttachment(options, \"file\");\n        return res;\n    }\n\n    const _updateRecordAttachment = async (options: UpdateRecordAttachmentOptions, type: string): Promise<StatusResponse> => {\n        const _frameRecord: Record<string, any> | undefined = _getRawRecordFromProxy(options.record) || _frame.find(ele => deepEqual(ele, options.record));\n\n        if (_frameRecord === undefined || !_recordIDExists(_frameRecord)) {\n            log(\"Attempting to add attachment to a new record that has not been synced. Please sync() before trying to add attachment.\");\n            return {\n                success: false,\n                message: \"Attempting to add attachment to a new record that has not been synced. Please sync() before trying to add attachment.\"\n            }\n        }\n\n        const ext: string = options.attachment.name.split(\".\").pop()!.toLowerCase();\n\n        log(ext);\n\n        if (type === \"image\" && !imageExtensions.includes(ext)) {\n            return {\n                success: false,\n                message: \"Image files must have a proper image extension in the file name\"\n            };\n        }\n\n        if (type === \"video\" && !videoExtensions.includes(ext)) {\n            return {\n                success: false,\n                message: \"Video files must have a proper video extension in the file name\"\n            };\n        }\n\n        function isFileFromURI(f: File | FileFromURI): f is FileFromURI {\n            return (f as FileFromURI).uri !== undefined;\n        }\n\n        const formData = new FormData();\n\n        if (isFileFromURI(options.attachment)) {\n            formData.append(\"file\", options.attachment as any);\n            formData.append(\"name\", options.attachment.name);\n        } else {\n            formData.append(\"file\", options.attachment);\n            formData.append(\"name\", options.attachment.name);\n        }\n\n        const customHeaders = {\n            'Eb-upload-type': type,\n            'Eb-column-name': options.columnName,\n            'Eb-record-id': _recordIdMap.get(_frameRecord),\n            'Eb-table-name': options.tableName\n        }\n\n        const res = await tokenPostAttachment(formData, customHeaders);\n\n        await sync();\n\n        return {\n            message: res.data,\n            success: res.success\n        };\n    }\n\n    const isUserSignedIn = (): boolean => userSignedIn;\n\n    g.newTokenCallback = () => {\n        const cookieName = g.ebconfig.integration.slice(-10);\n\n        if (!g.token) {\n            // User signed out\n            cache.clearCacheTokens(cookieName).then((_: any) => {\n                setUserSignedIn(false);\n                _ranSignInCallback.current = false;\n            });\n        } else {\n            // User signed in or refreshed token\n            cache.setCacheTokens(g, cookieName).then((_: any) => {\n                setUserSignedIn(true);\n            });\n        }\n    }\n\n    const useReturn = <T, >(dbInstance: () => SQW, deps?: React.DependencyList): UseReturnValue<T> => {\n        // eslint-disable-next-line no-extra-parens\n        const [unsubscribe, setUnsubscribe] = useState<() => void>(() => () => { });\n        const [frame, setFrame] = useState<T[]>([]);\n        const [error, setError] = useState<any>(null);\n        const [loading, setLoading] = useState<boolean>(false);\n        const [dead, setDead] = useState<boolean>(false);\n\n        const doFetch = async (): Promise<void> => {\n            setLoading(true);\n            try {\n                const res = await dbInstance().all();\n                if (Array.isArray(res)) {\n                    setFrame(res as T[]);\n                }\n            } catch (error) {\n                setError(error);\n            }\n            setLoading(false);\n        }\n\n        useEffect(() => {\n            let isAlive = true;\n            if (!dead) {\n                const _instanceTableName: string = (dbInstance() as any)._tableName;\n                (unsubscribe as any)(\"true\");\n\n                const _listener = dbEventListener((status?: DB_STATUS, queryType?: string, executeCount?: EXECUTE_COUNT, tableName?: string | null, returned?: any) => {\n                    if (!isAlive) {\n                        return;\n                    }\n                    log(_instanceTableName, status, queryType, executeCount, tableName)\n                    if ((tableName === null && _instanceTableName === \"untable\") || tableName === _instanceTableName) {\n                        if (status === DB_STATUS.SUCCESS && queryType !== \"select\") {\n                            if (typeof returned === \"number\" && returned > 0) {\n                                doFetch();\n                            } else if (Array.isArray(returned) && typeof returned[0] === \"number\" && returned[0] > 0) {\n                                doFetch();\n                            }\n                        }\n                    }\n                });\n\n                setUnsubscribe(() => (stayAlive?: string) => {\n                    _listener();\n                    stayAlive !== \"true\" && setDead(true);\n                });\n\n                doFetch();\n            }\n            return () => { isAlive = false; }\n        }, deps || []);\n\n        return {\n            frame,\n            unsubscribe,\n            error,\n            manualFetch: doFetch,\n            loading\n        };\n    };\n\n    const c: ContextValue = {\n        configureFrame,\n        addRecord,\n        deleteRecord,\n        sync,\n        updateRecordImage,\n        updateRecordVideo,\n        updateRecordFile,\n        Frame,\n        useFrameEffect,\n        fullTableSize,\n        tableTypes,\n        currentConfiguration,\n        Query,\n        signIn,\n        signOut,\n        isUserSignedIn,\n        signUp,\n        setUserAttribute,\n        getUserAttributes,\n        resetUserPassword,\n        onSignIn,\n        db,\n        dbEventListener,\n        e,\n        setFile,\n        setImage,\n        setVideo,\n        useReturn,\n        forgotPassword,\n        forgotPasswordConfirm,\n        userID\n    }\n\n    return (\n        <EasybaseContext.Provider value={c}>\n            {mounted && children}\n        </EasybaseContext.Provider>\n    )\n}\n\nexport default EasybaseProvider;\n","import { useContext } from \"react\";\nimport EasybaseContext from \"./EasybaseContext\";\n\nconst useEasybase = () => {\n    const easybase = useContext(EasybaseContext);\n    return easybase;\n}\n\nexport default useEasybase;\n","import React, { Suspense, Fragment, lazy } from 'react';\nimport { IAuth } from '../uiTypes';\n\nconst Auth = lazy(() => import('./Auth'));\n\nexport default function (props: IAuth): JSX.Element {\n    return (\n        <Suspense fallback={<Fragment />}>\n            <Auth {...props} />\n        </Suspense>\n    )\n}\n\n/**\n * Note that this wrapper component exists to force code-splitting\n */\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}